<UserControl                x:Class="aEMR.Pharmacy.Views.PurchaseOrderView"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                            xmlns:cal="http://www.caliburnproject.org"
                            xmlns:AxControls="clr-namespace:aEMR.Controls;assembly=aEMR.Controls"
                            xmlns:Converters="clr-namespace:aEMR.Common.Converters;assembly=aEMR.Common"
                            xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
                            xmlns:Resources="clr-namespace:eHCMSLanguage;assembly=aEMRLanguage" 
                            d:DesignHeight="440" d:DesignWidth="1100"
                            mc:Ignorable="d">
    <UserControl.Resources>
	    <Resources:eHCMSResources x:Key="eHCMSResources"/>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibility"/>
        <Converters:IntConverter x:Key="IntConverter"/>
        <Converters:DecimalConverter2 x:Key="DecimalConverter2"/>
        <Converters:DecimalConverter x:Key="DecimalConverter"/>
        <Converters:InverseBoolConverter x:Key="InverseBoolConverter"/>
        <DataTemplate x:Key="AutoCompleteTemplate">
            <StackPanel Orientation="Horizontal">
                <TextBlock  Text="{Binding DrugCode}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" />
                <TextBlock  Text=" - " Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" />
                <TextBlock  Text="{Binding BrandName}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" />
            </StackPanel>
               
        </DataTemplate>
        <DataTemplate x:Key="QtyCellTemplate">

            <TextBlock Name="txtDrugName" Text="{Binding PoUnitQty,Converter={StaticResource IntConverter}}" Margin="1,0,1,0" Padding="0" VerticalAlignment="Center" HorizontalAlignment="Right"/>

        </DataTemplate>
        <DataTemplate x:Key="QtyCellEditTemplate">

            <AxControls:AxTextBox Name="txtDrugName" Text="{Binding PoUnitQty,Mode=TwoWay,Converter={StaticResource IntConverter}}"  Margin="0" Padding="0" VerticalAlignment="Center" TextAlignment="Right" />

        </DataTemplate>
        <DataTemplate x:Key="PackageQtyCellTemplate">

            <TextBlock Name="txtDrugName" Text="{Binding PoPackageQty,Converter={StaticResource DecimalConverter2}}" Margin="1,0,1,0" Padding="0" VerticalAlignment="Center" HorizontalAlignment="Right"/>

        </DataTemplate>
        <DataTemplate x:Key="PackageQtyCellEditTemplate">

            <AxControls:AxTextBox Name="txtDrugName" Text="{Binding PoPackageQty,Mode=TwoWay,Converter={StaticResource DecimalConverter2}}"  Margin="0" Padding="0" VerticalAlignment="Center" TextAlignment="Right" />

        </DataTemplate>
        <DataTemplate x:Key="PriceCellTemplate">

            <TextBlock  Text="{Binding UnitPrice,Converter={StaticResource DecimalConverter}}" Margin="1,0,1,0" Padding="0" VerticalAlignment="Center" HorizontalAlignment="Right"/>

        </DataTemplate>
        <DataTemplate x:Key="PriceCellEditTemplate">

            <AxControls:AxTextBox Text="{Binding UnitPrice,Mode=TwoWay,Converter={StaticResource DecimalConverter}}"  Margin="0" Padding="0" VerticalAlignment="Center" TextAlignment="Right" />

        </DataTemplate>
        <DataTemplate x:Key="PackagePriceCellTemplate">

            <TextBlock  Text="{Binding PackagePrice,Converter={StaticResource DecimalConverter}}" Margin="1,0,1,0" Padding="0" VerticalAlignment="Center" HorizontalAlignment="Right"/>

        </DataTemplate>
        <DataTemplate x:Key="PackagePriceCellEditTemplate">

            <AxControls:AxTextBox Text="{Binding PackagePrice,Mode=TwoWay,Converter={StaticResource DecimalConverter}}"  Margin="0" Padding="0" VerticalAlignment="Center" TextAlignment="Right" />

        </DataTemplate>
        <DataTemplate x:Key="CollnkDelete">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                <!--;[Event Loaded]=[Action lnkDelete_Loaded($source)]-->
                <Button x:Name="lnkDelete" cal:Message.Attach="[Event Click]=[Action lnkDelete_Click($source,$eventArgs)]" ToolTipService.ToolTip="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}">
                    
                        <Image Source="/aEMR.CommonViews;component/Assets/Images/Delete.png" Height="13" Width="13" Opacity="1" />
                    
                </Button>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="ColCanWaiting">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                <CheckBox IsEnabled="{Binding CanWaiting}" IsChecked="{Binding NoWaiting,TargetNullValue=False,Mode=TwoWay}" cal:Message.Attach="[Event Checked]=[Action lnkCanWaiting_Click($source,$eventArgs)]"></CheckBox>
                <!--;[Event Loaded]=[Action lnkDelete_Loaded($source)]-->
                <!--<Button x:Name="lnkDelete" cal:Message.Attach="[Event Checked]=[Action lnkCanWaiting_Click($source,$eventArgs)]" ToolTipService.ToolTip="{Binding T2460_G1_KhongChoNua, Source={StaticResource eHCMSResources}}" Content="{Binding T2460_G1_KhongChoNua, Source={StaticResource eHCMSResources}}" IsEnabled="{Binding CanWaiting}">
                </Button>-->
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="AutoSupplierTemplate">
            <StackPanel Orientation="Horizontal">
                <TextBlock Name="txtDrugName" Text="{Binding SupplierName}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" />
            </StackPanel>
        </DataTemplate>
        <!--<DataTemplate x:Key="DrugNameTemplete">
            <StackPanel>
                <TextBlock Name="txtDrugName" Text="{Binding RefGenericDrugDetail.BrandName}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" VerticalAlignment="Center" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="AutoDrugTemplete">
            <AxControls:AxAutoComplete Name="acbDrug" Text="{Binding RefGenericDrugDetail.BrandName}" TextBoxStyle="{StaticResource TextBoxStyleAuotoOnGrid}"
                                                     Style="{StaticResource AxAutoCompleteMyStyle}" 
                                                     ValueMemberBinding="{Binding BrandName, Mode=TwoWay}" 
                                                     cal:Message.Attach="[Event Populating]=[Action acbDrug_Populating($source,$eventArgs)]
                                                                        ;[Event DropDownClosed] = [Action acbDrug_DropDownClosed($source, $eventArgs)]"                    
                                                     ItemsSource="{Binding RefGenericDrugDetail,Mode=OneWay}"
                                                     ToolTipService.ToolTip="Press F2 to edit"  >
                <AutoCompleteBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Name="txtDrugName" Text="{Binding BrandName}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" />
                        </StackPanel>
                    </DataTemplate>
                </AutoCompleteBox.ItemTemplate>
            </AxControls:AxAutoComplete>
        </DataTemplate>-->
    </UserControl.Resources>
    <xctk:BusyIndicator BusyContent="{Binding DlgBusyContent}" IsBusy="{Binding DlgIsBusyFlag}" >
        <Grid x:Name="LayoutRoot">
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="30"/>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition></RowDefinition>
                    <RowDefinition Height="Auto"></RowDefinition>
                </Grid.RowDefinitions>
                <TextBlock x:Name="TitleForm" Text="{Binding TitleForm}" 
                               HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="#3595CB" 
                               FontSize="14" FontWeight="Bold" />
                <StackPanel Orientation="Horizontal"  Margin="2" Grid.Row="1" Grid.ColumnSpan="2"  
                        Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mDatHang_Tim,Converter={StaticResource BooleanToVisibility} }">
                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Center" TextWrapping="Wrap" Text="{Binding T3453_G1_MaPhDatHgCu, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Margin="11,1,5,1" Style="{StaticResource MainFrame.TextBlock.00}"/>
                    <TextBox Name="tbx_Search" Margin="1,1,1,1" d:LayoutOverrides="Width" Style="{StaticResource MainFrame.TextBox}"  Text="{Binding ElementName=LayoutRoot,Path=DataContext.SearchCriteria.Code, Mode=TwoWay}" Width="200" cal:Message.Attach="[Event KeyUp]=[Action KeyUp_Click($source,$eventArgs)]"/>
                    <Button  Name="btnSearch" Content="{Binding G0981_G1_Tim, Source={StaticResource eHCMSResources}}" Margin="2,1,2,1" Style="{StaticResource MainFrame.Button}" Width="75" cal:Message.Attach="[Event Click]=[Action btnSearch_Click($source,$eventArgs)]"
                         />
                    <!--Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.bView,Converter={StaticResource BooleanToVisibility} }"-->
                </StackPanel>
                <Border  Margin="2" Grid.Row="2" Style="{StaticResource LightBlueBorderStyle}" DataContext="{Binding CurrentPharmacyPurchaseOrder}">
                    <Grid  
                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mDatHang_ThongTin,Converter={StaticResource BooleanToVisibility} }"
                    >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="100*" />
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition  Width="50*" />
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="100*"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition  Width="150*"/>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                        </Grid.RowDefinitions>

                        <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.ColumnSpan="4">
                            <!--TTM 14072018
                            Comment IsChecked="{Binding IsTrongNuoc,Mode=TwoWay}"-->
                            <RadioButton Content="{Binding G1800_G1_TrongNuoc, Source={StaticResource eHCMSResources}}" Name="rdtTrongNuoc" GroupName="rdtChooseType" Margin="30,2,2,2" IsChecked="{Binding IsTrongNuoc,Mode=TwoWay}"  cal:Message.Attach="[Event Checked]=[Action rdtTrongNuoc_Checked($source,$eventArgs)]" ></RadioButton>
                            <RadioButton Content="{Binding N0145_G1_NgoaiNuoc, Source={StaticResource eHCMSResources}}" Name="rdtNgoaiNuoc" GroupName="rdtChooseType" Margin="10,2,2,2" IsChecked="{Binding IsForeign,Mode=TwoWay}" cal:Message.Attach="[Event Checked]=[Action rdtNgoaiNuoc_Checked($source,$eventArgs)]"></RadioButton>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Grid.Column="5" Grid.ColumnSpan="8" HorizontalAlignment="Right">
                            <Button Content="{Binding T1305_G1_GuiDi, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Margin="2" IsEnabled="{Binding CanDelete}" cal:Message.Attach="[Event Click] = [Action HyperlinkButton_Click($source, $eventArgs)]" FontWeight="Bold" Style="{StaticResource MainFrame.Button01}"></Button>
                            <Button Name="hblNoWaiting" Content="{Binding T2460_G1_KhongChoNua, Source={StaticResource eHCMSResources}}"  Margin="2" IsEnabled="{Binding CanWaiting}" FontWeight="Bold" Style="{StaticResource MainFrame.Button01}"></Button>
                            <TextBlock HorizontalAlignment="Left" VerticalAlignment="Center" Margin="2,0,0,0" Text="{Binding G1691_G1_TThai, StringFormat='{}{0} :', Source={StaticResource eHCMSResources}}" Style="{StaticResource Title}"/>
                            <TextBlock HorizontalAlignment="Left" VerticalAlignment="Center" Margin="2,0,0,0" Text="{Binding V_PurchaseOrderStatusName}" Style="{StaticResource MainFrame.TextBlock.00}" />
                        </StackPanel>
                        <TextBlock HorizontalAlignment="Left" Margin="2,0,0,0" Text="{Binding S0630_G1_SoDH, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center" Grid.Row="1" Style="{StaticResource Title}" />
                        <TextBox Grid.Column="1" Margin="2,1" Grid.Row="1" Style="{StaticResource MainFrame.TextBox}" IsReadOnly="True" Text="{Binding PONumber,Mode=TwoWay}"/>

                        <TextBlock HorizontalAlignment="Left" Margin="2,0,0,0" Text="{Binding N0056_G1_NgDH, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center" Grid.Row="2" Style="{StaticResource Title}" />
                        <DatePicker Grid.Column="1"  Margin="2,1"  Grid.Row="2" Style="{StaticResource MainFrame.DatePicker}" SelectedDate="{Binding OrderDate,TargetNullValue=null,Mode=TwoWay}" />

                        <TextBlock Grid.Row="1" HorizontalAlignment="Left" Margin="2,0,0,0" Grid.Column="2" Text="{Binding G2183_G1_VATx, Source={StaticResource eHCMSResources}}" VerticalAlignment="Center" Style="{StaticResource Title}" />
                        <TextBox Grid.Row="1" Grid.Column="3"  Margin="2,1" Text="{Binding VAT,Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True,Converter={StaticResource DecimalConverter}}" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right"  cal:Message.Attach="[Event LostFocus]=[Action TextBox_LostFocus($source,$eventArgs)]" IsReadOnly="True" />

                        <TextBlock Grid.Row="1" Grid.Column="4"  HorizontalAlignment="Left" Margin="2,0,0,0" Text="{Binding P0370_G1_PhDuTru, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                        <TextBox Grid.Row="1" Grid.Column="5" Margin="2,1"  Style="{StaticResource MainFrame.TextBox}" IsReadOnly="True" Text="{Binding PharmacyEstimationForPO.EstimationCode}"/>
                        <Button Content="..." Grid.Row="1" Grid.Column="6" Style="{StaticResource MainFrame.Button}" Name="btnFindEstimate" IsEnabled="{Binding CanSave}"
                             ToolTipService.ToolTip="Lấy phiếu dự trù cho đơn hàng mới"/>
                        <!--Visibility="{Binding bView,Converter={StaticResource BooleanToVisibility} }"-->

                        <TextBlock Grid.Row="1" Grid.Column="7"  HorizontalAlignment="Left" Margin="2,0,0,0" Text="{Binding N0273_G1_NSX, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                        <AxControls:KeyEnabledComboBox   Grid.Row="1" Grid.Column="8"  Margin="2,1" Style="{StaticResource MainFrame.ComboBox}" SelectedValuePath="PCOID" DisplayMemberPath="PCOName" ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.PharmaceuticalCompanies}"  
                          SelectedValueEx="{Binding ElementName=LayoutRoot,Path=DataContext.PCOID,Mode=TwoWay}" cal:Message.Attach="[Event SelectionChanged] = [Action cbxNSX_SelectionChanged($source, $eventArgs)]"  IsEnabled="{Binding CanSave}" />
                        <Button Name="btnSearchNSX" Margin="2,1" Content="..." Grid.Row="1" Grid.Column="9" Style="{StaticResource MainFrame.Button}"  IsEnabled="{Binding CanSave}"
                             ToolTipService.ToolTip="QLDM NSX"/>
                        <!--Visibility="{Binding bView,Converter={StaticResource BooleanToVisibility} }"-->

                        <TextBlock Grid.Row="2" Grid.Column="7"  HorizontalAlignment="Left" Margin="2,0,0,0" Text="{Binding N0175_G1_NhaCC, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                        <!--<AxControls:KeyEnabledComboBox   Grid.Row="2" Grid.Column="8"  Margin="2,1" Style="{StaticResource MainFrame.ComboBox}" SelectedValuePath="SupplierID" DisplayMemberPath="SupplierName" ItemsSource="{Binding ElementName=LayoutRoot,Path=DataContext.Suppliers}"  
                          SelectedItemEx="{Binding SelectedSupplier,Mode=TwoWay}" cal:Message.Attach="[Event SelectionChanged] = [Action cbxNCC_SelectionChanged($source, $eventArgs)]" IsEnabled="{Binding CanSave}" Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.Visibility}"/>-->
                        <TextBlock Grid.Row="2" Grid.Column="8"  HorizontalAlignment="Left" Margin="2,1" Text="{Binding SelectedSupplier.SupplierName}" VerticalAlignment="Top"  Style="{StaticResource MainFrame.TextBlock.00}" Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.ElseVisibility}"/>
                        <AxControls:AxAutoComplete Text="{Binding SelectedSupplier.SupplierName}"  IsTabStop="False" 
                                                ValueMemberBinding="{Binding SupplierName, Mode=TwoWay}"   
                                                cal:Message.Attach="[Event Populating] = [Action Supplier_Populating($source, $eventArgs)]
                                                                    ;[Event DropDownClosed] = [Action Supplier_DropDownClosed($source, $eventArgs)]"     
                                                FontWeight="Bold" IsDropDownOpen="True" Style="{StaticResource AxAutoCompleteMyStyle}"
                                                TextBoxStyle="{StaticResource MainFrame.TextBox}" MinimumPrefixLength="0" MinimumPopulateDelay="300"
                                                Grid.Row="2" Grid.Column="8"  Margin="2,1" SelectedItem="{Binding SelectedSupplier,Mode=TwoWay}"
                                                
                                             FilterMode="None"
                                                IsEnabled="{Binding CanSave}" Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.Visibility}"
                                                   ItemContainerStyle="{StaticResource AxAutoCompleteBoxBkg}">
                            <AxControls:AxAutoComplete.ItemTemplate>
                                <DataTemplate>
                                    <!--ItemsSource="{Binding ElementName=LayoutRoot,Path=DataContext.Suppliers}"-->
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding SupplierCode}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0,0,10,0" Width="160" HorizontalAlignment="Left" />
                                        <TextBlock Text="{Binding SupplierName}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" HorizontalAlignment="Left"/>
                                    </StackPanel>
                                </DataTemplate>
                            </AxControls:AxAutoComplete.ItemTemplate>
                        </AxControls:AxAutoComplete>
                        <Button Name="btnSupplier" Content="..." Grid.Row="2" Grid.Column="9" Margin="2,1" Style="{StaticResource MainFrame.Button}" IsEnabled="{Binding CanSave}" />
                        <!--<Button Name="btnTest" Content="{Binding T0918_G1_Test, Source={StaticResource eHCMSResources}}" Grid.Row="3" Grid.Column="9" Margin="2,1" Style="{StaticResource MainFrame.Button}" IsEnabled="{Binding CanSave}" />-->
                        <!--Visibility="{Binding bView,Converter={StaticResource BooleanToVisibility} }"-->

                        <TextBlock Grid.Row="2" Grid.Column="2"  HorizontalAlignment="Left" Margin="2,0,0,0" Text="{Binding G1272_G1_TinhBang, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                        <AxControls:KeyEnabledComboBox  Name="cbxCurrency" Grid.Row="2" Grid.Column="3"  Margin="2,1" Style="{StaticResource MainFrame.ComboBox}" SelectedValuePath="CurrencyID" DisplayMemberPath="CurrencyName" ItemsSource="{Binding ElementName=LayoutRoot,Path=DataContext.Currencies}"  MinWidth="60"
                          SelectedValueEx="{Binding CurrencyID,Mode=TwoWay}"/>

                        <TextBlock Grid.Row="2" Grid.Column="4"  HorizontalAlignment="Left" Margin="2,0,0,0" Text="{Binding G2087_G1_TyGiaNT, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                        <TextBox Grid.Row="2" Grid.Column="5" Grid.ColumnSpan="2"  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding ExchangeRates,Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True,Converter={StaticResource DecimalConverter}}"/>

                    </Grid>
                </Border>
                <Border Margin="2" Style="{StaticResource LightBlueBorderStyle}" Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3">
                    <AxControls:AxGrid Name="grid1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="80*" MaxWidth="100"></ColumnDefinition>
                            <ColumnDefinition Width="240*"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="60*" MaxWidth="80"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="80*" MaxWidth="100"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>

                        </Grid.ColumnDefinitions>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Margin="2,1" Text="{Binding K2170_G1_ChonThuoc, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.00}" VerticalAlignment="Center"></TextBlock>
                            <RadioButton Content="{Binding K2569_G1_Code, Source={StaticResource eHCMSResources}}" Margin="2,1" GroupName="ChooseDrug"  cal:Message.Attach="[Event Checked]=[Action Code_Checked($source,$eventArgs)]" VerticalAlignment="Center"></RadioButton>
                            <RadioButton Content="{Binding T0829_G1_Ten, Source={StaticResource eHCMSResources}}" Margin="2,1" GroupName="ChooseDrug" IsChecked="True"  cal:Message.Attach="[Event Checked]=[Action Name_Checked($source,$eventArgs)]" VerticalAlignment="Center"></RadioButton>
                        </StackPanel>


                        <!--<TextBlock Margin="2,1"  HorizontalAlignment="Right" VerticalAlignment="Center" Text="{Binding K2170_G1_ChonThuoc, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.01}"/>-->
                        <AxControls:AxTextBox Grid.Column="1" Margin="2,1" Style="{StaticResource MainFrame.TextBox}" Text="{Binding CurrentPharmacyPurchaseOrderDetail.RefGenericDrugDetail.DrugCode,Mode=TwoWay}" cal:Message.Attach="[Event LostFocus] = [Action AxTextBox_LostFocus($source, $eventArgs)];[Event Loaded] = [Action AxTextBox_Loaded($source, $eventArgs)]" TabIndex="6"
                                                   IsEnabled="{Binding VisibilityCode,Mode=OneWay}" />
                        <AxControls:AxAutoComplete Text="{Binding CurrentPharmacyPurchaseOrderDetail.RefGenericDrugDetail.BrandName,Mode=TwoWay}" Name="AutoDrug_Text" Grid.Column="2" Margin="2,1" IsTabStop="False" ValueMemberBinding="{Binding BrandName, Mode=TwoWay}"   
                                              cal:Message.Attach="[Event Populating] = [Action AutoCompleteBox_Populating($source, $eventArgs)]
                                                       ;[Event DropDownClosed] = [Action AutoDrug_Text_DropDownClosed($source, $eventArgs)]
                                                       ;[Event Loaded] = [Action AutoDrug_Text_Loaded($source, $eventArgs)]"
                                                     TextBoxStyle="{StaticResource MainFrame.TextBox}" FontWeight="Bold" MinimumPrefixLength="0"
                                                     IsEnabled="{Binding VisibilityName,Mode=OneWay}" TabIndex="7" SelectedItem="{Binding CurrentPharmacyPurchaseOrderDetail.RefGenericDrugDetail,Mode=OneWay}"
                                                     Style="{StaticResource AxAutoCompleteMyStyle}"  ItemTemplate="{StaticResource AutoCompleteTemplate}" >
                        </AxControls:AxAutoComplete>
                        <TextBlock Margin="2,1" Grid.Column="3"   HorizontalAlignment="Right" VerticalAlignment="Center" Text="{Binding K3966_G1_Dvt, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.01}"/>
                        <TextBox Grid.Column="4" Margin="2,1" Style="{StaticResource MainFrame.TextBox}" Text="{Binding CurrentPharmacyPurchaseOrderDetail.RefGenericDrugDetail.SeletedUnit.UnitName,Mode=OneWay}" IsEnabled="False"></TextBox>

                        <TextBlock Margin="2,1" Grid.Column="5"   HorizontalAlignment="Right" VerticalAlignment="Center" Text="{Binding S0660_G1_SLggDat, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.01}"/>
                        <AxControls:AxTextBox Grid.Column="6" Margin="2,1" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding CurrentPharmacyPurchaseOrderDetail.PoUnitQty,Mode=TwoWay,NotifyOnValidationError=True,ValidatesOnExceptions=True}" IsEnabled="{Binding CurrentPharmacyPurchaseOrder.CanSave,Mode=OneWay}" TabIndex="8" cal:Message.Attach="[Event Loaded] = [Action Quantity_Loaded($source, $eventArgs)];[Event LostFocus] = [Action txtQuantity_LostFocus($source, $eventArgs)]"></AxControls:AxTextBox>

                        <Button Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}" Grid.Column="7" Margin="2,1"  Name="AddItem" VerticalAlignment="Center" Width="75" Style="{StaticResource MainFrame.Button}" IsEnabled="{Binding CurrentPharmacyPurchaseOrder.CanSave,Mode=OneWay}" TabIndex="9"/>
                    </AxControls:AxGrid>
                </Border>
                <Border Margin="2" Grid.Row="4" Grid.ColumnSpan="2">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <!--;[Event CellEditEnding]=[Action GridSuppliers_CellEditEnding($source,$eventArgs)]-->
                        <AxControls:AxDataGridNy x:Name="GridSuppliers" HeadersVisibility="All" AutoGenerateColumns="False" 
                                  cal:Message.Attach="[Event LoadingRow]=[Action GridSuppliers_LoadingRow($source,$eventArgs)]
                                   ; [Event CellEditEnding]=[Action GridSuppliers_CellEditEnding($source,$eventArgs)]             
                                  ;[Event CurrentCellChanged]=[Action GridSuppliers_CurrentCellChanged($source,$eventArgs)]
                                  ;[Event PreparingCellForEdit] = [Action GridSuppliers_PreparingCellForEdit($source, $eventArgs)]
                                  ;[Event Loaded]=[Action GridSuppliers_Loaded($source,$eventArgs)]"
                                             Unloaded="GridSuppliers_Unloaded"
                                             ItemsSource="{Binding CurrentPharmacyPurchaseOrder.PurchaseOrderDetails}" 
                                             Margin="2" 
                                             HorizontalScrollBarVisibility="Auto" 
                                             VerticalScrollBarVisibility="Auto" 
                                             IsReadOnly="{Binding CurrentPharmacyPurchaseOrder.CanSave,
                                             Converter={StaticResource InverseBoolConverter}}"
                                             ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle}" 
                                             Style="{StaticResource MainFrame.DataGridStyle.OneColor}" >
                            <DataGrid.Columns>
                                <DataGridTemplateColumn Header="" CellTemplate="{StaticResource CollnkDelete}" CellStyle="{StaticResource CellStyleVerticalAlignCenter}" IsReadOnly="True"></DataGridTemplateColumn>
                                <DataGridTextColumn x:Name="col01"
                                                    Header="{Binding K2569_G1_Code, Source={StaticResource eHCMSResources}}"
                                                    Binding="{Binding  RefGenericDrugDetail.DrugCode}"
                                                    CellStyle="{StaticResource CellStyleReadOnly}" IsReadOnly="True">

                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="col02"
                                                    Header="{Binding T0904_G1_TenThuoc, Source={StaticResource eHCMSResources}}"
                                                    Binding="{Binding  RefGenericDrugDetail.BrandName}"
                                                    CellStyle="{StaticResource CellStyleReadOnly}" IsReadOnly="True">

                                </DataGridTextColumn>
                                <!--<DataGridTemplateColumn x:Name="col02"
                                                 Header="{Binding T0904_G1_TenThuoc, Source={StaticResource eHCMSResources}}" CellEditingTemplate="{StaticResource AutoDrugTemplete}" CellTemplate="{StaticResource DrugNameTemplete}">
                                </DataGridTemplateColumn>-->
                                <DataGridTextColumn x:Name="ColMed01"
                                                    Binding="{Binding  RefGenericDrugDetail.Packaging}"
                                                    Header="{Binding Q0420_G1_QCDongGoi, Source={StaticResource eHCMSResources}}"
                                                    CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True">

                                </DataGridTextColumn>
                                <DataGridTextColumn 
                                                    Binding="{Binding  RefGenericDrugDetail.UnitPackaging}"
                                                    Header="{Binding S0619_G1_SLgQC, Source={StaticResource eHCMSResources}}"
                                                    CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True">
                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="ColLast04"
                                                    Header="{Binding K3954_G1_DViLe, Source={StaticResource eHCMSResources}}"
                                                    Binding="{Binding  RefGenericDrugDetail.SeletedUnit.UnitName}"
                                                    CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True">

                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="ColLast05"
                                                    Header="{Binding S0588_G1_SLgCho, Source={StaticResource eHCMSResources}}"
                                                    Binding="{Binding  WaitingDeliveryQty,Converter={StaticResource IntConverter}}"
                                                    CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True">

                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="ColLast06"
                                                    Binding="{Binding  EstimateQty,Converter={StaticResource IntConverter}}"
                                                    Header="{Binding S0596_G1_SLgDuTru, Source={StaticResource eHCMSResources}}"
                                                    CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True">

                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="ColLast09" 
                                                    Header="{Binding S0590_G1_SLgDaDat, Source={StaticResource eHCMSResources}}"
                                                    Binding="{Binding  OrderedQty,Converter={StaticResource IntConverter}}"
                                                    CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True">
                                </DataGridTextColumn>
                                <DataGridCheckBoxColumn Header="{Binding K3335_G1_DHTheoQuyh, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Binding="{Binding IsUnitPackage,TargetNullValue=False,Mode=TwoWay}" Width="75" >

                                </DataGridCheckBoxColumn>
                                <DataGridTemplateColumn x:Name="ColLast07" 
                                                        Header="{Binding S0616_G1_SLgDGDatHg, Source={StaticResource eHCMSResources}}" 
                                                        CellTemplate="{StaticResource PackageQtyCellTemplate}" 
                                                        CellEditingTemplate="{StaticResource PackageQtyCellEditTemplate}" 
                                                        CellStyle="{StaticResource CellStyleVerticalAlignCenter}"
                                                  >

                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="{Binding S0593_G1_SLgDatHg, Source={StaticResource eHCMSResources}}"
                                                        CellTemplate="{StaticResource QtyCellTemplate}" 
                                                        CellEditingTemplate="{StaticResource QtyCellEditTemplate}" 
                                                        CellStyle="{StaticResource CellStyleVerticalAlignCenter}"
                                                  >

                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn Header="{Binding K3651_G1_DGiaDGoi, Source={StaticResource eHCMSResources}}"
                                                        CellTemplate="{StaticResource PackagePriceCellTemplate}" 
                                                        CellEditingTemplate="{StaticResource PackagePriceCellEditTemplate}" 
                                                        CellStyle="{StaticResource CellStyleVerticalAlignCenter}"
                                                  >
                                </DataGridTemplateColumn>
                                <DataGridTemplateColumn x:Name="ColLast08"
                                                        Header="{Binding K3661_G1_DGiaLe, Source={StaticResource eHCMSResources}}"
                                                        CellTemplate="{StaticResource PriceCellTemplate}" 
                                                        CellEditingTemplate="{StaticResource PriceCellEditTemplate}" 
                                                        CellStyle="{StaticResource CellStyleVerticalAlignCenter}"
                                                  >

                                </DataGridTemplateColumn>
                                <DataGridTextColumn x:Name="ColLast10" 
                                                    Header="{Binding G0085_G1_TTien, Source={StaticResource eHCMSResources}}" 
                                                    Binding="{Binding  PoTotalPriceNotVAT,Converter={StaticResource DecimalConverter}}"
                                                    CellStyle="{StaticResource CellStyleReadOnlyRight}"  IsReadOnly="True">

                                </DataGridTextColumn>
                                <DataGridTemplateColumn 
                                                            Header="{Binding T2460_G1_KhongChoNua, Source={StaticResource eHCMSResources}}"
                                                            CellTemplate="{StaticResource ColCanWaiting}" 
                                                            CellStyle="{StaticResource CellStyleVerticalAlignCenter}" 
                                                            IsReadOnly="True" Visibility="Collapsed" >
                                </DataGridTemplateColumn>
                                <DataGridTextColumn Header="{Binding G2156_G1_VAT, Source={StaticResource eHCMSResources}}"
                                                        Binding="{Binding RefGenericDrugDetail.VAT}"
                                                    AxControls:DataGridColNamingUtil.ColName="colVAT"/>
                                <DataGridTemplateColumn Header="{Binding Z2991_G1_KhongThue, Source={StaticResource eHCMSResources}}"
                                                        AxControls:DataGridColNamingUtil.ColName="colIsNotVat">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding IsNotVat, Mode=OneWay}"
                                              cal:Message.Attach="[Event Click]=[Action chkIsNotVat_Click($source,$datacontext)]" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                    <DataGridTemplateColumn.CellStyle>
                                        <Style TargetType="DataGridCell">
                                            <Setter Property="IsTabStop" Value="False" />
                                        </Style>
                                    </DataGridTemplateColumn.CellStyle>
                                </DataGridTemplateColumn>
                                <!--<DataGridTextColumn x:Name="ColLast11"  Binding="{Binding  PackagePrice}"
                                                 Header="Đơn giá đóng gói"  CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True">
                            </DataGridTextColumn>-->

                            </DataGrid.Columns>
                        </AxControls:AxDataGridNy>
                        <Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="130"></ColumnDefinition>
                                <ColumnDefinition MinWidth="70" MaxWidth="130"></ColumnDefinition>
                                <ColumnDefinition Width="70"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="24"></RowDefinition>
                                <RowDefinition Height="24"></RowDefinition>
                                <RowDefinition Height="24"></RowDefinition>
                                <RowDefinition Height="24"></RowDefinition>
                                <RowDefinition Height="24"></RowDefinition>
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="2" Orientation="Horizontal">
                                <TextBlock  Margin="2,1,2,1" Text="{Binding G0431_G1_TGianGHg, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                                <TextBox  Margin="2,1,2,1"  Style="{StaticResource MainFrame.TextBox}" Text="{Binding  CurrentPharmacyPurchaseOrder.DeliveryDayNo,Mode=TwoWay,ValidatesOnExceptions=True}" Width="25" TextAlignment="Right" IsEnabled="{Binding CurrentPharmacyPurchaseOrder.CanSave}"/>
                                <TextBlock  Margin="2,1,2,1" Text="{Binding I0928_G1_I, Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                            </StackPanel>
                            <StackPanel Grid.Row="1" Grid.Column="2" Grid.ColumnSpan="2" Orientation="Horizontal">
                                <TextBlock  Margin="2,1,2,1" Text="{Binding T1539_G1_HThucCTra, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                                <AxControls:KeyEnabledComboBox  Grid.Row="0" Grid.Column="1" Margin="2,1" Style="{StaticResource MainFrame.ComboBox}" SelectedValuePath="LookupID" DisplayMemberPath="ObjectValue" ItemsSource="{Binding ElementName=LayoutRoot,Path=DataContext.PaymentModes}" 
                          SelectedValueEx="{Binding CurrentPharmacyPurchaseOrder.V_PaymentMode,Mode=TwoWay}" IsEnabled="{Binding CurrentPharmacyPurchaseOrder.CanSave}" MinWidth="100"/>
                                <TextBlock  Margin="2,1,2,1" Text="{Binding G1806_G1_TrongVong, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                                <TextBox  Margin="2,1,2,1"  Style="{StaticResource MainFrame.TextBox}" Text="{Binding CurrentPharmacyPurchaseOrder.DeliveryMoneyDayNo,Mode=TwoWay,ValidatesOnExceptions=True}" Width="25" TextAlignment="Right" IsEnabled="{Binding CurrentPharmacyPurchaseOrder.CanSave}"/>
                                <TextBlock  Margin="2,1,2,1" Text="{Binding I0929_G1_I, Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                            </StackPanel>

                            <Grid Grid.Column="2" Grid.Row="2" Grid.ColumnSpan="2" Grid.RowSpan="3">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                                    <ColumnDefinition></ColumnDefinition>
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Row="2" Grid.Column="0" Margin="2,1,2,1" HorizontalAlignment="Left" Text="{Binding G1183_G1_Ghichu, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Top"  Style="{StaticResource Title}" Width="60" />
                                <TextBox Grid.Row="2" Margin="2,1,2,1" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" Text="{Binding CurrentPharmacyPurchaseOrder.PoNotes,Mode=TwoWay}" AcceptsReturn="True" Grid.RowSpan="3"/>
                            </Grid>
                            <TextBlock Grid.Row="0" Grid.Column="0" Margin="2,1,2,1" Text="{Binding Z0283_G1_TgTienChuaVAT, Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                            <TextBox Grid.Row="0" Grid.Column="1" Margin="2,1" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding ElementName=LayoutRoot,Path=DataContext.TotalPriceNotVAT,Converter={StaticResource DecimalConverter}}"  IsReadOnly="True"/>
                            <TextBlock Grid.Row="1"  Grid.Column="0" Margin="2,1,2,1" Text="{Binding G1633_G1_TgTienVAT, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                            <TextBox  Grid.Row="1" Margin="2,1" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding ElementName=LayoutRoot,Path=DataContext.TotalVAT,Converter={StaticResource DecimalConverter}}"  IsReadOnly="True"/>
                            <TextBlock Grid.Row="2" Grid.Column="0" Margin="2,1,2,1" Text="{Binding Z0284_G1_TgTienCoVAT, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                            <TextBox Grid.Row="2" Margin="2,1" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding ElementName=LayoutRoot,Path=DataContext.TotalPriceHaveVAT,Converter={StaticResource DecimalConverter}}"  IsReadOnly="True"/>

                            <TextBox Grid.Row="3" Margin="2,1" Grid.Column="0" Style="{StaticResource MainFrame.TextBox}" Grid.ColumnSpan="2" Text="{Binding ElementName=LayoutRoot,Path=DataContext.ReadMoney}" IsReadOnly="True" AcceptsReturn="True" Grid.RowSpan="3" TextWrapping="Wrap"/>

                            <StackPanel Grid.Column="4" Grid.Row="0" Orientation="Vertical" Grid.RowSpan="5" DataContext="{Binding ElementName=LayoutRoot,Path=DataContext.CurrentPharmacyPurchaseOrder}">
                                <Button Name="btnNewPurchase" Content="{Binding K3678_G1_DHgMoi, Source={StaticResource eHCMSResources}}" Margin="2,1,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75"  IsEnabled="{Binding CanNew}"
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mThemMoi,Converter={StaticResource BooleanToVisibility} }"/>
                                <Button Name="btnSave" Content="{Binding T2937_G1_Luu, Source={StaticResource eHCMSResources}}" Margin="2,1,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" IsEnabled="{Binding CanSave}"
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mThemMoi,Converter={StaticResource BooleanToVisibility} }"/>
                                <Button Name="btnDeletePurchase" Content="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}" Margin="2,1,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" IsEnabled="{Binding CanDelete}"
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mChinhSua,Converter={StaticResource BooleanToVisibility} }"/>
                                <Button Name="btnPreview" Content="{Binding T1945_G1_InTiengViet, Source={StaticResource eHCMSResources}}" Margin="2,1,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" IsEnabled="{Binding CanPrint}"
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mIn,Converter={StaticResource BooleanToVisibility} }"/>
                                <Button Name="KiemTraHangDat" Content="{Binding T2515_G1_KTraHgDat, Source={StaticResource eHCMSResources}}" Margin="2,1,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" 
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mIn,Converter={StaticResource BooleanToVisibility} }"/>
                            </StackPanel>
                        </Grid>
                        <!--<Grid Grid.Row="1">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                                <ColumnDefinition></ColumnDefinition>
                                <ColumnDefinition Width="Auto"></ColumnDefinition>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                                <RowDefinition></RowDefinition>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Column="0" Margin="2,2,0,2" Text="{Binding N0065_G1_NgGiaoHg, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Top"  Style="{StaticResource Title}" />
                            <DatePicker  Grid.Column="1" Margin="2,1" Style="{StaticResource MainFrame.DatePicker}" Width="150" SelectedDate="{Binding ExpectedDeliveryDate,Mode=TwoWay}"/>
                            <TextBlock Grid.Row="1" Grid.Column="0" Margin="2,2,0,2" Text="{Binding N0093_G1_NgNhanTien, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Top"  Style="{StaticResource Title}" />
                            <DatePicker Grid.Row="1"  Grid.Column="1" Margin="2,1" Style="{StaticResource MainFrame.DatePicker}" Width="150" SelectedDate="{Binding DeliveryDate,Mode=TwoWay}"/>
                            <TextBlock Grid.Row="0" Grid.Column="2" Margin="2,2,0,2" HorizontalAlignment="Left" Text="{Binding G1183_G1_Ghichu, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Top"  Style="{StaticResource Title}" Width="60" />
                            <TextBox Grid.Row="0" Margin="62,1,2,1" Grid.Column="2" Style="{StaticResource MainFrame.TextBox}" Text="{Binding PoNotes,Mode=TwoWay}" AcceptsReturn="True" Grid.RowSpan="2"/>


                            <TextBlock Grid.Row="2" Grid.Column="0" Margin="2,2,0,2" Text="{Binding Z0283_G1_TgTienChuaVAT, Source={StaticResource eHCMSResources}}" VerticalAlignment="Top"  Style="{StaticResource Title}" />
                            <TextBox Grid.Row="2" Grid.Column="1" Margin="2,1" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding ElementName=LayoutRoot,Path=DataContext.TotalPriceNotVAT,Converter={StaticResource DecimalConverter}}"  IsReadOnly="True"/>
                            <TextBlock Grid.Row="3"  Grid.Column="0" Margin="2,2,0,2" Text="{Binding G1633_G1_TgTienVAT, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Top"  Style="{StaticResource Title}" />
                            <TextBox  Grid.Row="3" Margin="2,1" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding ElementName=LayoutRoot,Path=DataContext.TotalVAT,Converter={StaticResource DecimalConverter}}"  IsReadOnly="True"/>
                            <TextBlock Grid.Row="4" Grid.Column="0" Margin="2,2,0,2" Text="{Binding Z0284_G1_TgTienCoVAT, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Top"  Style="{StaticResource Title}" />
                            <TextBox Grid.Row="4" Margin="2,1" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding ElementName=LayoutRoot,Path=DataContext.TotalPriceHaveVAT,Converter={StaticResource DecimalConverter}}"  IsReadOnly="True"/>

                            <TextBlock Grid.Row="2" Grid.Column="2" Margin="2,2,0,2" Text="{Binding G1581_G1_TgTienBangChu, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Top"  Style="{StaticResource Title}" />
                            <TextBox Grid.Row="3" Margin="2,1" Grid.Column="2" Style="{StaticResource MainFrame.TextBox}" Text="{Binding ElementName=LayoutRoot,Path=DataContext.ReadMoney}" IsReadOnly="True" AcceptsReturn="True" Grid.RowSpan="2"/>

                            <StackPanel Grid.Column="3" Grid.Row="0" Orientation="Vertical" Grid.RowSpan="5" DataContext="{Binding ElementName=LayoutRoot,Path=DataContext.CurrentPharmacyPurchaseOrder}">
                                <Button Name="btnNewPurchase" Content="{Binding K3678_G1_DHgMoi, Source={StaticResource eHCMSResources}}" Margin="2,2,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75"
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mDatHang_Them,Converter={StaticResource BooleanToVisibility} }"/>
                                <Button Name="btnSave" Content="{Binding T2937_G1_Luu, Source={StaticResource eHCMSResources}}" Margin="2,2,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" IsEnabled="{Binding CanSave}"
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mDatHang_Them,Converter={StaticResource BooleanToVisibility} }"/>
                                <Button Name="btnDeletePurchase" Content="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}" Margin="2,2,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" IsEnabled="{Binding CanDelete}"
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mDatHang_Edit,Converter={StaticResource BooleanToVisibility} }"/>
                                <Button Name="btnPreview" Content="{Binding T1945_G1_InTiengViet, Source={StaticResource eHCMSResources}}" Margin="2,2,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" IsEnabled="{Binding CanPrint}"
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mDatHang_In,Converter={StaticResource BooleanToVisibility} }"/>
                                <Button Content="{Binding T1943_G1_InTiengPhap, Source={StaticResource eHCMSResources}}" Margin="2,2,2,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" IsEnabled="{Binding CanPrint}"
                                    Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mDatHang_In,Converter={StaticResource BooleanToVisibility} }"/>
                            </StackPanel>
                        </Grid>-->
                    </Grid>
                </Border>
            </Grid>
            <!--Style="{StaticResource CustomeExpanderStyle}"-->
            <!--Header="{Binding K3903_G1_DSThuocCanDaTh, Source={StaticResource eHCMSResources}}"-->
            <Expander x:Name="RightExpander" Grid.Column="1"
                                      Margin="0,0,0,0" Width="Auto" 
                                      ExpandDirection="Right" MinWidth="10" 
                                      IsExpanded="True" 
                                      Background="#FFDBE5F1" 
                                      RenderTransformOrigin="0,0" 
                                      DockPanel.Dock="Right">

                <Border Margin="2,1" Style="{StaticResource LightBlueBorderStyle}">
                    <Grid Width="220"                       
                      Visibility="{Binding mDatHang_DSThuocCanDatHang,Converter={StaticResource BooleanToVisibility} }" >
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                        </Grid.RowDefinitions>
                        <Button Name="RefeshListOrder" Style="{StaticResource MainFrame.Button01}" Content="{Binding R0510_G1_Refresh, Source={StaticResource eHCMSResources}}" Width="150" HorizontalAlignment="Left"/>
                        <CheckBox HorizontalAlignment="Right" Content="{Binding T0822_G1_TatCa, Source={StaticResource eHCMSResources}}" IsThreeState="False" IsChecked="{Binding IsAll,Mode=TwoWay}" Style="{StaticResource MainFrame.Checkbox.Title1}" FlowDirection="RightToLeft" FontFamily="Portable User Interface" />
                        <TextBlock Grid.Row="1" Text="{Binding K3903_G1_DSThuocCanDaTh, Source={StaticResource eHCMSResources}}"  FontWeight="Bold" Style="{StaticResource MainFrame.TextBlock.00}"></TextBlock>
                        <AxControls:DoubleClickDataGrid     x:Name="GridRefGenericDrugDetailWarningOrders" Grid.Column="0" Grid.Row="2" 
                                                            AutoGenerateColumns="False"  
                                                            ItemsSource="{Binding RefGenericDrugDetailWarningOrders}" 
                                                            HorizontalScrollBarVisibility="Auto" 
                                                            VerticalScrollBarVisibility="Auto" IsReadOnly="True"
                                                            ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle}" 
                                                            cal:Message.Attach="[Event LoadingRow] = [Action GridRefGenericDrugDetailWarningOrders_LoadingRow($source, $eventArgs)]"
                                                            Style="{StaticResource MainFrame.DataGridStyle}">
                            <DataGrid.Columns>
                                <DataGridTextColumn Binding="{Binding SupplierMain.SupplierCode}"  Header="{Binding K2683_G1_CodeNCC, Source={StaticResource eHCMSResources}}" ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"></DataGridTextColumn>
                                <DataGridTextColumn x:Name="colFirstName"
                                                    Header="{Binding K2569_G1_Code, Source={StaticResource eHCMSResources}}"
                                                        Binding="{Binding DrugCode}">

                                </DataGridTextColumn>
                                <DataGridTextColumn     x:Name="colBankName"
                                                        Header="{Binding T0904_G1_TenThuoc, Source={StaticResource eHCMSResources}}"
                                                        Binding="{Binding BrandName}">

                                </DataGridTextColumn>
                                <DataGridTextColumn x:Name="colMiddleName"
                                                    Header="{Binding K3966_G1_Dvt, Source={StaticResource eHCMSResources}}" 
                                                 Binding="{Binding SeletedUnit.UnitName}"
                                                 >

                                </DataGridTextColumn>
                                <DataGridTextColumn     x:Name="colCityStateZipCode"
                                                        Header="{Binding S0610_G1_SLgTon, Source={StaticResource eHCMSResources}}"
                                                        Binding="{Binding Remaining,Converter={StaticResource IntConverter}}"
                                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}">

                                </DataGridTextColumn>

                                <DataGridTextColumn         x:Name="colTelephoneNumber"
                                                            Header="{Binding S0584_G1_SLgAnToan, Source={StaticResource eHCMSResources}}"
                                                            Binding="{Binding FactorSafety,Converter={StaticResource IntConverter}}"
                                                            ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}">

                                </DataGridTextColumn>
                                <DataGridTextColumn     x:Name="colWaitingDeliveryQty"
                                                        Header="{Binding S0588_G1_SLgCho, Source={StaticResource eHCMSResources}}"
                                                        Binding="{Binding WaitingDeliveryQty,Converter={StaticResource IntConverter}}"
                                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}">

                                </DataGridTextColumn>
                            </DataGrid.Columns>
                        </AxControls:DoubleClickDataGrid>
                        <AxControls:DataPager Grid.Row="3"  Source="{Binding RefGenericDrugDetailWarningOrders}" Margin="0"/>
                    </Grid>
                </Border>
            </Expander>

        </Grid>
    </xctk:BusyIndicator>
</UserControl>
