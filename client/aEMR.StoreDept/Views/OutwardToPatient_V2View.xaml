<UserControl
    x:Class="aEMR.StoreDept.Views.OutwardToPatient_V2View"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:AxControls="clr-namespace:aEMR.Controls;assembly=aEMR.Controls"
    xmlns:Converter="clr-namespace:aEMR.Common.Converters;assembly=aEMR.Common"
    xmlns:Resources="clr-namespace:eHCMSLanguage;assembly=aEMRLanguage"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="http://schemas.xceed.com/wpf/xaml/toolkit"
    d:DesignHeight="950"
    d:DesignWidth="1400"
    mc:Ignorable="d">
    <UserControl.Resources>
        <Resources:eHCMSResources x:Key="eHCMSResources" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
        <Converter:BooleanToVisibilityNotConverter x:Key="BooleanToNotVisibility" />
        <Converter:DecimalConverter x:Key="DecimalConverter" />
        <Converter:DecimalConverter3 x:Key="DecimalConverter3" />
        <Converter:InverseBoolConverter x:Key="InverseBoolConverter" />
        <DataTemplate x:Key="ColDeleteTemplate">
            <Button
                x:Name="lnkDelete"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                cal:Message.Attach="[Event Click] = [Action lnkDelete_Click($source, $eventArgs)]"
                ToolTipService.ToolTip="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}">
                <Image
                    Width="13"
                    Height="13"
                    Opacity="1"
                    Source="/aEMR.CommonViews;component/Assets/Images/Delete.png" />
            </Button>
        </DataTemplate>

        <DataTemplate x:Key="ColMedicalMaterialTemplate">
            <StackPanel
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Orientation="Horizontal">
                <RadioButton
                    Name="rdbReplaceMedicalMaterial"
                    Content="{Binding G1836_G1_TT, Source={StaticResource eHCMSResources}}"
                    IsChecked="{Binding IsReplaceMedMat, Mode=TwoWay}"
                    Style="{StaticResource MainFrame.RadioButton}" />
                <RadioButton
                    Name="rdbDisposeMedicalMaterial"
                    Margin="5,0,0,0"
                    Content="{Binding G0033_G1_TH, Source={StaticResource eHCMSResources}}"
                    IsChecked="{Binding IsDisposeMedMat, Mode=TwoWay}"
                    Style="{StaticResource MainFrame.RadioButton}" />
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="SelectCountHITemplate">
            <CheckBox
                cal:Message.Attach="[Event Click] = [Action chkCountHI_Click($source,$eventArgs)]"
                IsChecked="{Binding IsCountHI, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                Style="{StaticResource MainFrame.Checkbox.Title1}" />
        </DataTemplate>

        <DataTemplate x:Key="SelectCountPatientTemplate">
            <CheckBox
                cal:Message.Attach="[Event Click] = [Action chkCountPatient_Click($source,$eventArgs)]"
                IsChecked="{Binding IsCountPatient, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                Style="{StaticResource MainFrame.Checkbox.Title1}" />
        </DataTemplate>
        <DataTemplate x:Key="ColChooseLoTemplate">
            <Button
                x:Name="lnkChooseBatchNumber"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                cal:Message.Attach="[Event Click] = [Action lnkChooseBatchNumber_Click($source, $eventArgs)]"
                CommandParameter="{Binding GenMedProductItem.GenMedProductID}"
                Content="{Binding InBatchNumber, Mode=TwoWay}"
                Style="{StaticResource MainFrame.HyperlinkButton.01}"
                ToolTipService.ToolTip="{Binding Z0056_G1_ChonLoKhac, Source={StaticResource eHCMSResources}}" />
        </DataTemplate>
        <DataTemplate x:Key="AutoCompleteTemplate">
            <StackPanel Orientation="Horizontal">
                <TextBlock
                    Margin="5,1,10,1"
                    Style="{StaticResource MainFrame.TextBlock.Auto}"
                    Text="{Binding Code}" />
                <TextBlock
                    Name="txtDrugName"
                    Margin="0"
                    Padding="0"
                    Style="{StaticResource MainFrame.TextBlock.Auto}"
                    Text="{Binding BrandName}" />
                <TextBlock Style="{StaticResource MainFrame.TextBlock.Auto}" Text=" - " />
                <TextBlock
                    Margin="0"
                    Padding="0"
                    Style="{StaticResource MainFrame.TextBlock.Auto}"
                    Text="{Binding Remaining, Converter={StaticResource DecimalConverter3}}" />
                <TextBlock
                    Margin="10,0,0,0"
                    Padding="0"
                    Style="{StaticResource MainFrame.TextBlock.Auto}"
                    Text="{Binding SelectedUnit.UnitName}" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="MDose_CellTemplate">
            <TextBlock
                Margin="1,0,1,0"
                VerticalAlignment="Center"
                Text="{Binding MDoseStr}"
                TextAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="MDose_CellEditTemplate">
            <AxControls:AxTextBox
                x:Name="tbMDose"
                Text="{Binding MDoseStr, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                TextAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="ADose_CellTemplate">
            <TextBlock
                Margin="1,0,1,0"
                VerticalAlignment="Center"
                Text="{Binding ADoseStr}"
                TextAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="ADose_CellEditTemplate">
            <AxControls:AxTextBox
                x:Name="tbADose"
                Text="{Binding ADoseStr, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                TextAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="EDose_CellTemplate">
            <TextBlock
                Margin="1,0,1,0"
                VerticalAlignment="Center"
                Text="{Binding EDoseStr}"
                TextAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="EDose_CellEditTemplate">
            <AxControls:AxTextBox
                x:Name="tbEDose"
                Text="{Binding EDoseStr, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                TextAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="NDose_CellTemplate">
            <TextBlock
                Margin="1,0,1,0"
                VerticalAlignment="Center"
                Text="{Binding NDoseStr}"
                TextAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="NDose_CellEditTemplate">
            <AxControls:AxTextBox
                x:Name="tbNDose"
                Text="{Binding NDoseStr, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                TextAlignment="Right" />
        </DataTemplate>

    </UserControl.Resources>
    <toolkit:BusyIndicator
        Margin="0,0,0,10"
        HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch"
        DisplayAfter="0:0:0.100"
        IsBusy="{Binding IsLoading, Mode=OneWay}">
        <ScrollViewer
            CanContentScroll="True"
            HorizontalScrollBarVisibility="Auto"
            VerticalScrollBarVisibility="Auto">
            <Grid x:Name="LayoutRoot">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <Grid Grid.Row="0" Grid.ColumnSpan="2">
                    <TextBlock
                        HorizontalAlignment="Center"
                        Style="{StaticResource TBlock.TitleFormSmall}"
                        Text="{Binding strHienThi, Mode=OneWay}" />
                </Grid>

                <GroupBox
                    Grid.Row="1"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Header="{Binding G0525_G1_TTinBN, Source={StaticResource eHCMSResources}}"
                    Style="{StaticResource MainFrame.BlueGroupBox}">
                    <Grid Margin="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <StackPanel Grid.ColumnSpan="10" Orientation="Horizontal">
                            <ContentControl
                                Name="SearchRegistrationContent"
                                HorizontalContentAlignment="Stretch"
                                VerticalContentAlignment="Stretch" />

                        </StackPanel>

                        <Line
                            Grid.Row="1"
                            Grid.ColumnSpan="10"
                            Height="1"
                            Margin="2,5,2,5"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Top"
                            Fill="#FFF4F4F5"
                            Stroke="#FFCCCCCC" />

                        <TextBlock
                            Grid.Row="2"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding T1567_G1_HoTen, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            Grid.Row="2"
                            Grid.Column="1"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Foreground="Red"
                            Style="{StaticResource MainFrame.TextBlock.Title}"
                            Text="{Binding SelectedOutInvoice.PatientRegistration.Patient.FullName}"
                            TextWrapping="NoWrap" />

                        <TextBlock
                            Grid.Row="3"
                            Margin="0,0,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding T3274_G1_MaBN, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            Grid.Row="3"
                            Grid.Column="1"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding SelectedOutInvoice.PatientRegistration.Patient.PatientCode}"
                            TextWrapping="NoWrap" />

                        <TextBlock
                            Grid.Row="4"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding S0650_G1_SoHS, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            Grid.Row="4"
                            Grid.Column="1"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            FontWeight="Bold"
                            Foreground="Red"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding SelectedOutInvoice.PatientRegistration.Patient.FileCodeNumber}"
                            TextWrapping="NoWrap" />

                        <TextBlock
                            Grid.Row="5"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding N0221_G1_NhapVien, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            Grid.Row="5"
                            Grid.Column="1"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding SelectedOutInvoice.PatientRegistration.AdmissionDate, StringFormat='dd/MM/yyyy HH:mm:ss'}" />

                        <TextBlock
                            Grid.Row="2"
                            Grid.Column="2"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding N0107_G1_NgSinh, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            x:Name="txtDOB"
                            Grid.Row="2"
                            Grid.Column="3"
                            Margin="2,0,5,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding SelectedOutInvoice.PatientRegistration.Patient.DOB, StringFormat='dd/MM/yyyy'}"
                            TextWrapping="NoWrap" />

                        <TextBlock
                            Grid.Row="3"
                            Grid.Column="2"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding T1223_G1_GTinh, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            x:Name="txtGender"
                            Grid.Row="3"
                            Grid.Column="3"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding SelectedOutInvoice.PatientRegistration.Patient.GenderString}"
                            TextWrapping="NoWrap" />

                        <TextBlock
                            Grid.Row="4"
                            Grid.Column="2"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding T3257_G1_MaBHYT, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            x:Name="txtHICardNumber"
                            Grid.Row="4"
                            Grid.Column="3"
                            Margin="0,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding SelectedOutInvoice.PatientRegistration.Patient.CurrentHealthInsurance.HICardNo}"
                            TextWrapping="NoWrap" />

                        <TextBlock
                            Grid.Row="5"
                            Grid.Column="2"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding T1478_G1_HetHan, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            x:Name="txtPtClass"
                            Grid.Row="5"
                            Grid.Column="3"
                            Margin="2,0,5,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding SelectedOutInvoice.PatientRegistration.Patient.CurrentHealthInsurance.ValidDateTo, StringFormat='dd/MM/yyyy'}"
                            TextWrapping="NoWrap" />


                    </Grid>
                </GroupBox>

                <GroupBox
                    Grid.Row="1"
                    Grid.Column="1"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Header="{Binding G0656_G1_TTinPhXuat, Source={StaticResource eHCMSResources}}"
                    Style="{StaticResource MainFrame.BlueGroupBox}"
                    Visibility="{Binding mXuatChoBenhNhan_Xem, Converter={StaticResource BooleanToVisibility}}">
                    <Grid Margin="2">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <TextBlock
                            Margin="5,2,5,2"
                            HorizontalAlignment="Right"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding T3446_G1_MaPhCanTim, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                            TextWrapping="Wrap" />
                        <TextBox
                            Grid.Column="1"
                            Margin="2"
                            cal:Message.Attach="[Event KeyUp] = [Action Search_KeyUp($source, $eventArgs)]"
                            Style="{StaticResource MainFrame.TextBox}"
                            TabIndex="0"
                            Text="{Binding SearchCriteria.CodeInvoice, Mode=TwoWay}" />
                        <Button
                            x:Name="btnSearch"
                            Grid.Column="2"
                            Width="75"
                            Margin="0,1"
                            HorizontalAlignment="Left"
                            Content="{Binding G0981_G1_Tim, Source={StaticResource eHCMSResources}}"
                            Style="{StaticResource MainFrame.Button}"
                            TabIndex="1" />

                        <Line
                            Grid.Row="1"
                            Grid.ColumnSpan="8"
                            Height="1"
                            Margin="2,5,2,5"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Center"
                            Fill="#FFF4F4F5"
                            Stroke="#FFCCCCCC" />


                        <TextBlock
                            Grid.Row="2"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding T2204_G1_KhoXuat, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                            TextWrapping="Wrap" />
                        <AxControls:KeyEnabledComboBox
                            Name="comboBox1"
                            Grid.Row="2"
                            Grid.Column="1"
                            Margin="3"
                            cal:Message.Attach="[Event SelectionChanged] = [Action comboBox1_SelectionChanged($source, $eventArgs)]"
                            DisplayMemberPath="swhlName"
                            IsEnabled="{Binding SelectedOutInvoice.CanSaveAndPaid}"
                            IsTabStop="True"
                            ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.StoreCbx}"
                            SelectedValueEx="{Binding SelectedOutInvoice.StoreID, Mode=TwoWay}"
                            SelectedValuePath="StoreID"
                            Style="{StaticResource MainFrame.ComboBox}"
                            TabIndex="2" />

                        <TextBlock
                            Grid.Row="3"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding T3534_G1_MaPhX, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                            TextWrapping="Wrap" />
                        <TextBox
                            Grid.Row="3"
                            Grid.Column="1"
                            Margin="3"
                            VerticalAlignment="Top"
                            IsReadOnly="True"
                            Style="{StaticResource MainFrame.TextBox}"
                            Text="{Binding SelectedOutInvoice.OutInvID}"
                            d:LayoutOverrides="Width" />

                        <TextBlock
                            Grid.Row="4"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding T3273_G1_MaBill, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                            TextWrapping="Wrap" />
                        <TextBox
                            Grid.Row="4"
                            Grid.Column="1"
                            Margin="3"
                            VerticalAlignment="Top"
                            IsReadOnly="True"
                            Style="{StaticResource MainFrame.TextBox}"
                            Text="{Binding SelectedOutInvoice.BillingInvNum}"
                            d:LayoutOverrides="Width" />

                        <TextBlock
                            Grid.Row="2"
                            Grid.Column="2"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding N0130_G1_NgXuat, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                            TextWrapping="Wrap" />
                        <DatePicker
                            Grid.Row="2"
                            Grid.Column="3"
                            Margin="3"
                            VerticalAlignment="Center"
                            IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.Is_Enabled, Mode=OneWay}"
                            SelectedDate="{Binding SelectedOutInvoice.OutDate, TargetNullValue=null, Mode=TwoWay}"
                            Style="{StaticResource MainFrame.DatePicker}" />

                        <TextBlock
                            Grid.Row="3"
                            Grid.Column="2"
                            Margin="15,2,5,2"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding N0111_G1_NgTao, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                            TextWrapping="Wrap" />
                        <TextBox
                            Grid.Row="3"
                            Grid.Column="3"
                            Margin="3"
                            VerticalAlignment="Top"
                            IsReadOnly="True"
                            Style="{StaticResource MainFrame.TextBox}"
                            Text="{Binding SelectedOutInvoice.RecCreatedDate, StringFormat='dd/MM/yyyy HH:mm:ss'}"
                            d:LayoutOverrides="Width" />

                        <TextBlock
                            Grid.Row="4"
                            Grid.Column="2"
                            Margin="5,1,5,1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.02}"
                            Text="{Binding G1183_G1_Ghichu, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                            TextWrapping="Wrap" />
                        <TextBox
                            Grid.Row="4"
                            Grid.Column="3"
                            Margin="3"
                            IsEnabled="{Binding CanSaveAndPaid}"
                            Style="{StaticResource MainFrame.TextBox}"
                            TabIndex="2"
                            Text="{Binding SelectedOutInvoice.Notes, Mode=TwoWay}"
                            d:LayoutOverrides="Width" />


                    </Grid>
                </GroupBox>

                <Grid
                    x:Name="Details"
                    Grid.Row="3"
                    Grid.ColumnSpan="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="3*" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <TabControl
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        cal:Message.Attach="[Event Loaded]=[Action TCTempOutward_Loaded($source,$eventArgs)]"
                        Style="{StaticResource MainFrame.TabControl}">
                        <TabItem Header="{Binding G2896_G1_XuatTheoPhYc, Source={StaticResource eHCMSResources}}" Visibility="{Binding IsLoadTempByReqInvoice, Converter={StaticResource BooleanToVisibility}}">
                            <Grid Height="150">
                                <Grid.RowDefinitions>
                                    <RowDefinition />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <AxControls:ReadOnlyDataGrid
                                    Name="dataGrid1"
                                    Grid.Row="0"
                                    Margin="2,1"
                                    AutoGenerateColumns="False"
                                    ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle.01}"
                                    HeadersVisibility="All"
                                    IsReadOnly="True"
                                    ItemsSource="{Binding RequestDrugInwardClinicDeptLst}"
                                    Style="{StaticResource MainFrame.DataGridStyle}">
                                    <DataGrid.Columns>
                                        <DataGridTemplateColumn Width="Auto">
                                            <DataGridTemplateColumn.HeaderTemplate>
                                                <DataTemplate>
                                                    <CheckBox
                                                        IsChecked="{Binding Path=DataContext.AllChecked, ElementName=LayoutRoot, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                        IsEnabled="{Binding Path=DataContext.SelectedOutInvoice.CanSave, ElementName=LayoutRoot, Mode=OneWay}"
                                                        IsThreeState="False"
                                                        ToolTipService.ToolTip="{Binding K2122_G1_ChonTatCa, Source={StaticResource eHCMSResources}}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.HeaderTemplate>
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <CheckBox
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        IsChecked="{Binding Checked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTextColumn
                                            x:Name="colFaxNumber01"
                                            Binding="{Binding ReqNumCode}"
                                            Header="{Binding T3423_G1_MaPh, Source={StaticResource eHCMSResources}}" />
                                        <DataGridTextColumn
                                            x:Name="colFaxNumber"
                                            Binding="{Binding ReqDate, StringFormat='dd/MM/yyyy'}"
                                            Header="{Binding N0045_G1_Ng, Source={StaticResource eHCMSResources}}" />
                                        <DataGridTextColumn Binding="{Binding SelectedStaff.FullName}" Header="{Binding N0157_G1_NguoiLapPh, Source={StaticResource eHCMSResources}}" />
                                        <DataGridCheckBoxColumn Binding="{Binding IsApproved, TargetNullValue=False}" Header="{Binding K2787_G1_DaDuyet, Source={StaticResource eHCMSResources}}" />
                                        <DataGridCheckBoxColumn Binding="{Binding DaNhanHang}" Header="{Binding K2807_G1_DaLanhHg, Source={StaticResource eHCMSResources}}" />
                                    </DataGrid.Columns>
                                </AxControls:ReadOnlyDataGrid>
                                <StackPanel
                                    Grid.Row="1"
                                    HorizontalAlignment="Center"
                                    Orientation="Horizontal">
                                    <Button
                                        Name="btnAddMoreReq"
                                        Grid.Row="3"
                                        Width="35"
                                        Margin="5,1"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Content="..."
                                        Style="{StaticResource MainFrame.Button}" />
                                    <Button
                                        Name="btnGetOut"
                                        Grid.Row="1"
                                        Width="80"
                                        Content="{Binding K3847_G1_DongY, Source={StaticResource eHCMSResources}}"
                                        IsEnabled="{Binding SelectedOutInvoice.CanSave}"
                                        Style="{StaticResource MainFrame.Button}" />
                                </StackPanel>
                            </Grid>
                        </TabItem>
                        <TabItem
                            x:Name="TIInstructionTemp"
                            Header="{Binding Z2896_G1_XuatTheoYLenh, Source={StaticResource eHCMSResources}}"
                            Visibility="{Binding IsLoadTempByReqInvoice, Converter={StaticResource BooleanToNotVisibility}}">
                            <Grid Height="150">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>
                                <DataGrid
                                    Margin="2,1"
                                    AutoGenerateColumns="False"
                                    IsReadOnly="True"
                                    ItemsSource="{Binding CurrentInstructionCollection}"
                                    Style="{StaticResource MainFrame.DataGridStyle}">
                                    <DataGrid.Columns>
                                        <DataGridTemplateColumn>
                                            <DataGridTemplateColumn.CellTemplate>
                                                <DataTemplate>
                                                    <CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                </DataTemplate>
                                            </DataGridTemplateColumn.CellTemplate>
                                        </DataGridTemplateColumn>
                                        <DataGridTextColumn Binding="{Binding InstructionDate, StringFormat='dd/MM/yyyy'}" Header="{Binding N0133_G1_NgYLenh, Source={StaticResource eHCMSResources}}" />
                                        <DataGridTextColumn Binding="{Binding DoctorStaff.FullName}" Header="{Binding Z2896_G1_BSYLenh, Source={StaticResource eHCMSResources}}" />
                                    </DataGrid.Columns>
                                </DataGrid>
                                <StackPanel
                                    Grid.Row="1"
                                    HorizontalAlignment="Center"
                                    Orientation="Horizontal">
                                    <!--<Button Content="..." HorizontalAlignment="Right" Margin="5,1" VerticalAlignment="Bottom" Width="35" Style="{StaticResource MainFrame.Button}" />-->
                                    <Button
                                        x:Name="btnGetOutFromInstruction"
                                        Grid.Row="1"
                                        Width="80"
                                        Content="{Binding K3847_G1_DongY, Source={StaticResource eHCMSResources}}"
                                        IsEnabled="{Binding SelectedOutInvoice.CanSave}"
                                        Style="{StaticResource MainFrame.Button}" />
                                </StackPanel>
                            </Grid>
                        </TabItem>
                    </TabControl>
                    <GroupBox
                        Grid.Column="1"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Header="{Binding K1954_G1_ChonHg, Source={StaticResource eHCMSResources}}"
                        IsEnabled="{Binding SelectedOutInvoice.CanSaveAndPaid}"
                        Style="{StaticResource MainFrame.BlueGroupBox}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="2*" />
                            </Grid.ColumnDefinitions>

                            <Border
                                Grid.RowSpan="2"
                                Margin="1"
                                Padding="3,3,15,3"
                                BorderBrush="#FF5E5E5E"
                                BorderThickness="0,0,1,0">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <TextBlock
                                        Margin="5,0,1,0"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.00}"
                                        Text="{Binding K1377_G1_BSiCDinh, StringFormat='{}{0}: ', Source={StaticResource eHCMSResources}}"
                                        TextWrapping="Wrap" />
                                    <ContentControl
                                        x:Name="aucHoldConsultDoctor"
                                        Grid.Column="1"
                                        Margin="1,3,1,3"
                                        HorizontalContentAlignment="Stretch" />
                                    <Button
                                        Name="btnChangeDoctor"
                                        Grid.Column="2"
                                        Width="75"
                                        Margin="2,1,2,1"
                                        Content="{Binding K3576_G1_DoiBs, Source={StaticResource eHCMSResources}}"
                                        IsEnabled="{Binding SelectedOutInvoice.IsFromInstruction, Converter={StaticResource InverseBoolConverter}}"
                                        Style="{StaticResource MainFrame.Button}" />
                                    <TextBlock
                                        Grid.Row="1"
                                        Margin="5,0,1,0"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.00}"
                                        Text="{Binding N0133_G1_NgYLenh, StringFormat='{}{0}: ', Source={StaticResource eHCMSResources}}"
                                        TextWrapping="Wrap" />
                                    <!--<DatePicker Grid.Column="1"  Margin="1, 2, 1, 2"  Grid.Row="1" Style="{StaticResource MainFrame.DatePicker}" SelectedDate="{Binding MedicalInstructionDate,TargetNullValue=null,Mode=TwoWay}" />-->
                                    <ContentControl
                                        x:Name="MedicalInstructionDateContent"
                                        Grid.Row="1"
                                        Grid.Column="1"
                                        Height="20"
                                        Margin="1,2,1,2"
                                        HorizontalAlignment="Left" />
                                    <Button
                                        Name="btnChangeMedicalInstructionDate"
                                        Grid.Row="1"
                                        Grid.Column="2"
                                        Width="75"
                                        Margin="2,1,2,1"
                                        Content="{Binding K3582_G1_DoiNg, Source={StaticResource eHCMSResources}}"
                                        IsEnabled="{Binding SelectedOutInvoice.IsFromInstruction, Converter={StaticResource InverseBoolConverter}}"
                                        Style="{StaticResource MainFrame.Button}" />
                                    <TextBlock
                                        Grid.Row="2"
                                        Margin="5,0,1,0"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.00}"
                                        Text="{Binding T3748_G1_MauXuat, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                        TextWrapping="Wrap" />
                                    <AxControls:KeyEnabledComboBox
                                        Name="cbOutwardTemplates"
                                        Grid.Row="2"
                                        Grid.Column="1"
                                        Margin="1,3,1,3"
                                        DisplayMemberPath="OutwardDrugClinicDeptTemplateName"
                                        ItemsSource="{Binding OutwardTemplateList, Mode=TwoWay}"
                                        SelectedItemEx="{Binding SelectedOutwardTemplate, Mode=TwoWay}"
                                        SelectedValuePath="OutwardDrugClinicDeptTemplateID"
                                        Style="{StaticResource MainFrame.ComboBox}" />
                                    <Button
                                        Name="btnGetProductByOutwardTemplate"
                                        Grid.Row="2"
                                        Grid.Column="2"
                                        Width="75"
                                        Margin="2,1,2,1"
                                        Content="{Binding T2567_G1_LayMau, Source={StaticResource eHCMSResources}}"
                                        Style="{StaticResource MainFrame.Button}" />
                                </Grid>
                            </Border>

                            <Border
                                Grid.RowSpan="2"
                                Grid.Column="1"
                                Margin="1"
                                Padding="5,3,3,3"
                                BorderBrush="#FF5E5E5E"
                                BorderThickness="0">
                                <AxControls:AxGrid cal:Message.Attach="[Event Loaded] = [Action AxGrid_Loaded($source,$eventArgs)]">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>
                                    <!--<StackPanel Orientation="Horizontal" >
                                        <TextBlock Margin="2,1" Text="{Binding K1954_G1_ChonHg, StringFormat='{}{0}:',Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.02}" VerticalAlignment="Center"></TextBlock>
                                        <RadioButton Content="{Binding K2569_G1_Code,Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" GroupName="ChooseDrug"  cal:Message.Attach="[Event Checked]=[Action Code_Checked($source,$eventArgs)]" ></RadioButton>
                                        <RadioButton Content="{Binding T0829_G1_Ten,Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" GroupName="ChooseDrug" IsChecked="True"  cal:Message.Attach="[Event Checked]=[Action Name_Checked($source,$eventArgs)]" ></RadioButton>
                                    </StackPanel>-->

                                    <!--<AxControls:AxTextBox Grid.Column="1"  Margin="2,1" Style="{StaticResource MainFrame.TextBox}" Text="{Binding  CurrentReqOutwardDrugClinicDeptPatient.RefGenericDrugDetail.Code,Mode=TwoWay}" cal:Message.Attach="[Event LostFocus] = [Action AxTextBox_LostFocus($source, $eventArgs)];[Event Loaded] = [Action AxTextBox_Loaded($source, $eventArgs)]" TabIndex="0"
                                                   IsEnabled="{Binding VisibilityCode,Mode=OneWay}" MinWidth="75"/>
                                    <AxControls:AxAutoComplete Grid.Column="2" Name="AutoDrug_Text"  Margin="2,1" IsTabStop="False"
                                                       ValueMemberBinding="{Binding BrandName, Mode=TwoWay}"
                                                        cal:Message.Attach="[Event Populating] = [Action AutoCompleteBox_Populating($source, $eventArgs)]
                                                       ;[Event DropDownClosed] = [Action AutoDrug_Text_DropDownClosed($source, $eventArgs)]; [Event Loaded] = [Action AutoDrug_Text_Loaded($source, $RoutedEventArgs)]"
                                                        TextBoxStyle="{StaticResource MainFrame.TextBox}" FontWeight="Bold" MinimumPopulateDelay="300"
                                                            IsEnabled="{Binding VisibilityName,Mode=OneWay}" TabIndex="1" SelectedItem="{Binding CurrentReqOutwardDrugClinicDeptPatient.RefGenericDrugDetail,Mode=TwoWay}"
                                                  Style="{StaticResource  AxAutoCompleteMyStyle}"  ItemTemplate="{StaticResource AutoCompleteTemplate}" ItemsSource="{Binding RefGenMedProductDetails,Mode=OneWay}" FilterMode="None">
                                    </AxControls:AxAutoComplete>-->

                                    <CheckBox
                                        Grid.ColumnSpan="13"
                                        Margin="5,2,2,2"
                                        VerticalAlignment="Center"
                                        Content="{Binding N0211_G1_NhapLieuDung, Source={StaticResource eHCMSResources}}"
                                        IsChecked="{Binding IsInputDosage, Mode=TwoWay}"
                                        IsThreeState="False"
                                        Style="{StaticResource MainFrame.Checkbox}"
                                        Visibility="{Binding DoseVisibility, Converter={StaticResource BooleanToVisibility}}" />

                                    <!--  KMx: Bỏ IsEnabled vì không sử dụng Radio Button Code - Tên nữa (04/02/2016 11:52).  -->
                                    <TextBlock
                                        Grid.Row="1"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.02}"
                                        Text="{Binding K2569_G1_Code, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                    <AxControls:AxTextBox
                                        Grid.Row="1"
                                        Grid.Column="1"
                                        Margin="3"
                                        cal:Message.Attach="[Event LostFocus] = [Action AxTextBox_LostFocus($source, $eventArgs)];[Event Loaded] = [Action AxTextBox_Loaded($source, $eventArgs)]"
                                        Style="{StaticResource MainFrame.TextBox}"
                                        Text="{Binding SelectedSellVisitor.Code, Mode=TwoWay}" />

                                    <TextBlock
                                        Grid.Row="1"
                                        Grid.Column="2"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.02}"
                                        Text="{Binding T0829_G1_Ten, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />

                                    <AxControls:AxAutoComplete
                                        Name="AutoDrug_Text"
                                        Grid.Row="1"
                                        Grid.Column="3"
                                        Grid.ColumnSpan="5"
                                        Width="350"
                                        Margin="3"
                                        cal:Message.Attach="[Event Populating] = [Action AutoCompleteBox_Populating($source, $eventArgs)]                                                                        ;[Event DropDownClosed] = [Action AutoDrug_Text_DropDownClosed($source, $eventArgs)]                                                                        ;[Event Loaded] = [Action AutoDrug_Text_Loaded($source, $RoutedEventArgs)]"
                                        FilterMode="None"
                                        FontWeight="Bold"
                                        ItemContainerStyle="{StaticResource AxAutoCompleteBoxBkg}"
                                        ItemTemplate="{StaticResource AutoCompleteTemplate}"
                                        MinimumPopulateDelay="300"
                                        SelectedItem="{Binding SelectedSellVisitor, Mode=TwoWay}"
                                        Style="{StaticResource AxAutoCompleteMyStyle}"
                                        TextBoxStyle="{StaticResource MainFrame.TextBox}"
                                        ValueMemberBinding="{Binding BrandName, Mode=TwoWay}" />

                                    <TextBlock
                                        Grid.Row="1"
                                        Grid.Column="8"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.01}"
                                        Text="{Binding S0610_G1_SLgTon, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />

                                    <!--  KMx: Không được làm tròn lên 2 số sau dấu thập phân, nếu không sẽ bị lỗi 0.125 làm tròn lên 1.3 (31/12/2014 15:29).  -->
                                    <!--<AxControls:AxTextBox Grid.Column="6" Margin="2,1" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding SelectedSellVisitor.Remaining,Converter={StaticResource DecimalConverter}}" IsEnabled="False"></AxControls:AxTextBox>-->
                                    <AxControls:AxTextBox
                                        Grid.Row="1"
                                        Grid.Column="9"
                                        Margin="3"
                                        IsEnabled="False"
                                        Style="{StaticResource MainFrame.TextBox}"
                                        Text="{Binding SelectedSellVisitor.Remaining, Converter={StaticResource DecimalConverter3}}"
                                        TextAlignment="Right" />


                                    <TextBlock
                                        Grid.Row="1"
                                        Grid.Column="10"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.02}"
                                        Text="{Binding K3966_G1_Dvt, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                    <TextBox
                                        Grid.Row="1"
                                        Grid.Column="11"
                                        Margin="3"
                                        IsEnabled="False"
                                        Style="{StaticResource MainFrame.TextBox}"
                                        Text="{Binding SelectedSellVisitor.SelectedUnit.UnitName, Mode=OneWay}" />

                                    <TextBlock
                                        Grid.Row="2"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.02}"
                                        Text="{Binding Z2128_G1_YLenh, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                        Visibility="{Binding DrugIsInputDosage, Converter={StaticResource BooleanToVisibility}}" />
                                    <TextBox
                                        Grid.Row="2"
                                        Grid.Column="1"
                                        Grid.ColumnSpan="7"
                                        Margin="3"
                                        MaxLength="128"
                                        Style="{StaticResource MainFrame.TextBox}"
                                        Text="{Binding SelectedSellVisitor.Administration, Mode=TwoWay}"
                                        Visibility="{Binding DrugIsInputDosage, Converter={StaticResource BooleanToVisibility}}" />

                                    <TextBlock
                                        Grid.Row="2"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.02}"
                                        Text="{Binding S0540_G1_Sang, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                        Visibility="{Binding CheckedDoseVisibility, Converter={StaticResource BooleanToVisibility}}" />
                                    <AxControls:AxTextBox
                                        Grid.Row="2"
                                        Grid.Column="1"
                                        Margin="3"
                                        cal:Message.Attach="[Event Loaded] = [Action tbxMDoseStr_Loaded($source, $eventArgs)];[Event LostFocus] = [Action tbxMDoseStr_LostFocus($source, $eventArgs)]"
                                        Style="{StaticResource MainFrame.TextBox}"
                                        Text="{Binding SelectedSellVisitor.MDoseStr, Mode=TwoWay}"
                                        TextAlignment="Right"
                                        Visibility="{Binding CheckedDoseVisibility, Converter={StaticResource BooleanToVisibility}}" />

                                    <TextBlock
                                        Grid.Row="2"
                                        Grid.Column="2"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.02}"
                                        Text="{Binding G1808_G1_Trua, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                        Visibility="{Binding CheckedDoseVisibility, Converter={StaticResource BooleanToVisibility}}" />
                                    <AxControls:AxTextBox
                                        Grid.Row="2"
                                        Grid.Column="3"
                                        Margin="3"
                                        cal:Message.Attach="[Event LostFocus] = [Action tbxADoseStr_LostFocus($source, $eventArgs)]"
                                        Style="{StaticResource MainFrame.TextBox}"
                                        Text="{Binding SelectedSellVisitor.ADoseStr, Mode=TwoWay}"
                                        TextAlignment="Right"
                                        Visibility="{Binding CheckedDoseVisibility, Converter={StaticResource BooleanToVisibility}}" />

                                    <TextBlock
                                        Grid.Row="2"
                                        Grid.Column="4"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.02}"
                                        Text="{Binding K1860_G1_Chieu, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                        Visibility="{Binding CheckedDoseVisibility, Converter={StaticResource BooleanToVisibility}}" />
                                    <AxControls:AxTextBox
                                        Grid.Row="2"
                                        Grid.Column="5"
                                        Margin="3"
                                        cal:Message.Attach="[Event LostFocus] = [Action tbxEDoseStr_LostFocus($source, $eventArgs)]"
                                        Style="{StaticResource MainFrame.TextBox}"
                                        Text="{Binding SelectedSellVisitor.EDoseStr, Mode=TwoWay}"
                                        TextAlignment="Right"
                                        Visibility="{Binding CheckedDoseVisibility, Converter={StaticResource BooleanToVisibility}}" />

                                    <TextBlock
                                        Grid.Row="2"
                                        Grid.Column="6"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.02}"
                                        Text="{Binding G1446_G1_Toi, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                        Visibility="{Binding CheckedDoseVisibility, Converter={StaticResource BooleanToVisibility}}" />
                                    <AxControls:AxTextBox
                                        Grid.Row="2"
                                        Grid.Column="7"
                                        Margin="3"
                                        cal:Message.Attach="[Event LostFocus] = [Action tbxNDoseStr_LostFocus($source, $eventArgs)]"
                                        Style="{StaticResource MainFrame.TextBox}"
                                        Text="{Binding SelectedSellVisitor.NDoseStr, Mode=TwoWay}"
                                        TextAlignment="Right"
                                        Visibility="{Binding CheckedDoseVisibility, Converter={StaticResource BooleanToVisibility}}" />

                                    <TextBlock
                                        Grid.Row="2"
                                        Grid.Column="8"
                                        Margin="5,2,2,2"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.02}"
                                        Text="{Binding S0612_G1_SLgXuat, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                    <AxControls:AxTextBox
                                        Grid.Row="2"
                                        Grid.Column="9"
                                        Margin="3"
                                        cal:Message.Attach="[Event Loaded] = [Action Quantity_Loaded($source, $eventArgs)]"
                                        Foreground="Red"
                                        Style="{StaticResource MainFrame.TextBox}"
                                        Text="{Binding SelectedSellVisitor.RequiredNumber, Mode=TwoWay}"
                                        TextAlignment="Right" />

                                    <CheckBox
                                        Grid.Row="2"
                                        Grid.Column="10"
                                        Grid.ColumnSpan="2"
                                        Margin="5,2,2,2"
                                        VerticalAlignment="Center"
                                        Content="{Binding G0368_G1_TheoDVD, Source={StaticResource eHCMSResources}}"
                                        IsChecked="{Binding CalByUnitUse, Mode=TwoWay}"
                                        IsTabStop="False"
                                        IsThreeState="False"
                                        Style="{StaticResource MainFrame.Checkbox}" />

                                    <Button
                                        Name="AddItem"
                                        Grid.Row="3"
                                        Grid.Column="10"
                                        Grid.ColumnSpan="2"
                                        Width="75"
                                        Height="24"
                                        Margin="2,1"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        cal:Message.Attach="[Event Click]=[Action AddItem_Click($source,$eventArgs)]                                                                ;[Event PreviewKeyDown]=[Action AddItem_PreviewKeyDown($source,$eventArgs)]"
                                        Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                        IsEnabled="{Binding SelectedOutInvoice.CanSaveAndPaid, Mode=OneWay}"
                                        Style="{StaticResource MainFrame.Button}" />
                                </AxControls:AxGrid>

                            </Border>

                        </Grid>

                        <!--</Border>-->
                    </GroupBox>


                    <AxControls:AxDataGridNy
                        x:Name="grdPrescription"
                        Grid.Row="1"
                        Grid.ColumnSpan="2"
                        Height="450"
                        Margin="2,1"
                        cal:Message.Attach="[Event LoadingRow] = [Action grdPrescription_LoadingRow($source, $eventArgs)]                                              ;[Event Loaded] = [Action grdPrescription_Loaded($source, $eventArgs)]; [Event Unloaded] = [Action grdPrescription_Unloaded($source, $eventArgs)]                                              ;[Event RowEditEnding] = [Action grdPrescription_RowEditEnding($source, $eventArgs)]                                              ;[Event CellEditEnding]=[Action grdOutwardDetails_CellEditEnding($source,$eventArgs)]                                              ;[Event CurrentCellChanged]=[Action grdPrescription_CurrentCellChanged($source,$eventArgs)]"
                        AutoGenerateColumns="False"
                        ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle.01}"
                        HeadersVisibility="All"
                        HorizontalScrollBarVisibility="Auto"
                        IsReadOnly="{Binding SelectedOutInvoice.CanSaveAndPaid, Converter={StaticResource InverseBoolConverter}}"
                        ItemsSource="{Binding SelectedOutInvoice.OutwardDrugClinicDepts, Mode=OneWay}"
                        SelectedItem="{Binding SelectedOutwardDrugClinicDept, Mode=TwoWay}"
                        Style="{StaticResource MainFrame.DataGridStyle}"
                        VerticalScrollBarVisibility="Visible">
                        <DataGrid.Columns>
                            <DataGridTemplateColumn CellTemplate="{StaticResource ColDeleteTemplate}" IsReadOnly="True" />
                            <!--  KMX: Phải set IsReadOnly="True" để tránh lỗi khi user click vào cell rồi sau đó mới click vào checkbox (trên từng row), dẫn đến không binding được. Làm cho event Click bị sai (06/04/2016 10:36).  -->
                            <DataGridTemplateColumn Width="Auto" IsReadOnly="True">
                                <DataGridTemplateColumn.HeaderTemplate>
                                    <DataTemplate>
                                        <CheckBox
                                            cal:Message.Attach="[Event Click] = [Action chkAllOutwardDetail_Click($source,$eventArgs)]"
                                            IsChecked="{Binding Path=DataContext.CheckAllOutwardDetail, ElementName=LayoutRoot, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                            IsThreeState="False"
                                            ToolTipService.ToolTip="{Binding K2122_G1_ChonTatCa, Source={StaticResource eHCMSResources}}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.HeaderTemplate>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox
                                            HorizontalAlignment="Center"
                                            VerticalAlignment="Center"
                                            cal:Message.Attach="[Event Click] = [Action chkOutwardDetail_Click($source,$eventArgs)]"
                                            IsChecked="{Binding IsChecked, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <!--<DataGridCheckBoxColumn Header="{Binding K1209_G1_BH,Source={StaticResource eHCMSResources}}" Binding="{Binding GenMedProductItem.InsuranceCover,TargetNullValue=False}" IsReadOnly="True"></DataGridCheckBoxColumn>-->
                            <DataGridTemplateColumn CellTemplate="{StaticResource SelectCountHITemplate}" IsReadOnly="True">
                                <DataGridTemplateColumn.HeaderTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <TextBlock Text="{Binding K1209_G1_BH, Source={StaticResource eHCMSResources}}" />
                                            <CheckBox
                                                HorizontalAlignment="Center"
                                                IsChecked="{Binding Path=DataContext.CheckAllCountHI, ElementName=LayoutRoot, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                IsThreeState="False"
                                                ToolTipService.ToolTip="{Binding G1281_G1_TinhBHTCa, Source={StaticResource eHCMSResources}}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.HeaderTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn CellTemplate="{StaticResource SelectCountPatientTemplate}" IsReadOnly="True">
                                <DataGridTemplateColumn.HeaderTemplate>
                                    <DataTemplate>
                                        <StackPanel>
                                            <TextBlock Text="{Binding K1270_G1_BN, Source={StaticResource eHCMSResources}}" />
                                            <CheckBox
                                                HorizontalAlignment="Center"
                                                IsChecked="{Binding Path=DataContext.CheckAllCountPatient, ElementName=LayoutRoot, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                IsThreeState="False"
                                                ToolTipService.ToolTip="{Binding G1284_G1_TinhBnTCa, Source={StaticResource eHCMSResources}}" />
                                        </StackPanel>
                                    </DataTemplate>
                                </DataGridTemplateColumn.HeaderTemplate>
                            </DataGridTemplateColumn>
                            <!--  KMx: Hiện tại check box chọn tất cả đã hoạt động đúng chức năng. Nhưng vì load phiếu khác chưa reset về uncheck được và còn bị lỗi khi bỏ check 1 dòng rồi chọn check tất cả thì dòng đó không check (09/12/2014 16:24)  -->
                            <!--<DataGridTemplateColumn x:Name="colCountHI"
                                            CellTemplate="{StaticResource SelectCountHITemplate}"
                                            Width="Auto">
                                    <DataGridTemplateColumn.HeaderStyle>
                                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource MainFrame.DataGridColumnHeaderStyle}">
                                            <Setter Property="Foreground" Value="#164679"/>
                                            <Setter Property="BorderBrush" Value="#FFC1D2E6" />
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="FontFamily" Value="Portable User Interface"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="FontSize" Value="10.667" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                            <Setter Property="IsTabStop" Value="False"/>
                                            <Setter Property="SeparatorBrush" Value="#FFC1D2E6"/>
                                            <Setter Property="Padding" Value="4"/>
                                            <Setter Property="ContentTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <CheckBox IsThreeState="False" Margin="13,0,-13,-20" cal:Message.Attach="[Event Loaded]=[Action chkAllCountHI_Loaded($source)]; [Event Click] = [Action chkAllCountHI_Click($source,$eventArgs)]" ToolTipService.ToolTip="{Binding K2122_G1_ChonTatCa,Source={StaticResource eHCMSResources}}">
                                                            <TextBlock Margin="-35,-18,0,0" Foreground="#164679">Tính BH</TextBlock>
                                                            </CheckBox>
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </DataGridTemplateColumn.HeaderStyle>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn x:Name="colCountPatient"
                                            CellTemplate="{StaticResource SelectCountPatientTemplate}"
                                            Width="Auto">

                                    <DataGridTemplateColumn.HeaderStyle>
                                        <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource MainFrame.DataGridColumnHeaderStyle}">
                                            <Setter Property="Foreground" Value="#164679"/>
                                            <Setter Property="BorderBrush" Value="#FFC1D2E6" />
                                            <Setter Property="BorderThickness" Value="1" />
                                            <Setter Property="FontFamily" Value="Portable User Interface"/>
                                            <Setter Property="FontWeight" Value="Bold"/>
                                            <Setter Property="FontSize" Value="10.667" />
                                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                                            <Setter Property="VerticalContentAlignment" Value="Center"/>
                                            <Setter Property="IsTabStop" Value="False"/>
                                            <Setter Property="SeparatorBrush" Value="#FFC1D2E6"/>
                                            <Setter Property="Padding" Value="4"/>
                                            <Setter Property="ContentTemplate">
                                                <Setter.Value>
                                                    <DataTemplate>
                                                        <CheckBox IsThreeState="False" Margin="13,0,-13,-20" cal:Message.Attach="[Event Loaded]=[Action chkAllCountPatient_Loaded($source)]; [Event Click] = [Action chkAllCountPatient_Click($source,$eventArgs)]" ToolTipService.ToolTip="{Binding K2122_G1_ChonTatCa,Source={StaticResource eHCMSResources}}">
                                                            <TextBlock Margin="-35,-18,0,0" Foreground="#164679">Tính BN</TextBlock>
                                                        </CheckBox>
                                                    </DataTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </DataGridTemplateColumn.HeaderStyle>
                                </DataGridTemplateColumn>-->
                            <DataGridTemplateColumn
                                x:Name="colMedicalMaterial"
                                AxControls:DataGridColNamingUtil.ColName="colMedicalMaterial"
                                CellTemplate="{StaticResource ColMedicalMaterialTemplate}"
                                Header="{Binding T2853_G1_LoaiVT, Source={StaticResource eHCMSResources}}" />
                            <DataGridTextColumn
                                x:Name="colDrugID"
                                Binding="{Binding GenMedProductItem.Code}"
                                ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                Header="{Binding K2569_G1_Code, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTextColumn
                                x:Name="colDrugName"
                                Width="150"
                                Binding="{Binding GenMedProductItem.BrandName}"
                                ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"
                                Header="{Binding T0854_G1_TenHg, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <!--<DataGridTextColumn x:Name="colContent"
                                                 Header="{Binding T1316_G1_HLg,Source={StaticResource eHCMSResources}}" Binding="{Binding GenMedProductItem.Content}" IsReadOnly="True" ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}">
                        </DataGridTextColumn>-->
                            <DataGridTextColumn
                                x:Name="colCityStateZipCode"
                                Binding="{Binding GenMedProductItem.SelectedUnit.UnitName}"
                                ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                Header="{Binding K3966_G1_Dvt, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTemplateColumn
                                Width="33"
                                AxControls:DataGridColNamingUtil.ColName="colMDoseStr"
                                CanUserReorder="True"
                                CanUserResize="True"
                                CanUserSort="True"
                                CellEditingTemplate="{StaticResource MDose_CellEditTemplate}"
                                CellStyle="{StaticResource CellStyleVerticalAlignCenter}"
                                CellTemplate="{StaticResource MDose_CellTemplate}"
                                Header="{Binding S0532_G1_S, Source={StaticResource eHCMSResources}}" />
                            <DataGridTemplateColumn
                                Width="33"
                                AxControls:DataGridColNamingUtil.ColName="colADoseStr"
                                CanUserReorder="True"
                                CanUserResize="True"
                                CanUserSort="True"
                                CellEditingTemplate="{StaticResource ADose_CellEditTemplate}"
                                CellStyle="{StaticResource CellStyleVerticalAlignCenter}"
                                CellTemplate="{StaticResource ADose_CellTemplate}"
                                Header="{Binding G1638_G1_Tr, Source={StaticResource eHCMSResources}}" />
                            <DataGridTemplateColumn
                                Width="35"
                                AxControls:DataGridColNamingUtil.ColName="colEDoseStr"
                                CanUserReorder="True"
                                CanUserResize="True"
                                CanUserSort="True"
                                CellEditingTemplate="{StaticResource EDose_CellEditTemplate}"
                                CellStyle="{StaticResource CellStyleVerticalAlignCenter}"
                                CellTemplate="{StaticResource EDose_CellTemplate}"
                                Header="{Binding K1737_G1_Ch, Source={StaticResource eHCMSResources}}" />
                            <DataGridTemplateColumn
                                Width="33"
                                AxControls:DataGridColNamingUtil.ColName="colNDoseStr"
                                CanUserReorder="True"
                                CanUserResize="True"
                                CanUserSort="True"
                                CellEditingTemplate="{StaticResource NDose_CellEditTemplate}"
                                CellStyle="{StaticResource CellStyleVerticalAlignCenter}"
                                CellTemplate="{StaticResource NDose_CellTemplate}"
                                Header="{Binding T0748_G1_T, Source={StaticResource eHCMSResources}}" />
                            <!--  KMx: Không được làm tròn lên 2 số sau dấu thập phân, nếu không sẽ bị lỗi 0.125 làm tròn lên 1.3 (31/12/2014 15:29).  -->
                            <!--<DataGridTextColumn  Header="{Binding S0597_G1_SLgDuyet,Source={StaticResource eHCMSResources}}"
                                         Binding="{Binding RequestQty,Converter={StaticResource DecimalConverter}}"
                                         ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                         IsReadOnly="True" />
                                <DataGridTextColumn
                                         Binding="{Binding OutQuantity,Mode=TwoWay,Converter={StaticResource DecimalConverter}}"
                                         ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}">
                                <DataGridTextColumn.HeaderStyle>
                                <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource MainFrame.DataGridColumnHeaderStyle}">
                                <Setter Property="ContentTemplate">
                                <Setter.Value>
                                <DataTemplate>
                                <TextBlock Text="{Binding G0771_G1_ThucXuat,Source={StaticResource eHCMSResources}}" />
                                </DataTemplate>
                                </Setter.Value>
                                </Setter>
                                </Style>
                                </DataGridTextColumn.HeaderStyle></DataGridTextColumn>-->
                            <DataGridTextColumn
                                Binding="{Binding RequestQty, Converter={StaticResource DecimalConverter3}}"
                                ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                Header="{Binding K3943_G1_Duyet, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTextColumn
                                AxControls:DataGridColNamingUtil.ColName="colQty"
                                Binding="{Binding OutQuantity, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource DecimalConverter3}}"
                                ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                Header="{Binding G2835_G1_Xuat, Source={StaticResource eHCMSResources}}" />
                            <DataGridTextColumn
                                Binding="{Binding OutPrice, Converter={StaticResource DecimalConverter}}"
                                ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                Header="{Binding T0860_G1_GiaBan, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTextColumn
                                Binding="{Binding HIAllowedPrice, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                Header="{Binding T0895_G1_GiaBH, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <!--<DataGridTextColumn  Binding="{Binding PriceDifference,Mode=OneWay,Converter={StaticResource DecimalConverter}}"
                                         IsReadOnly="True"
                                         Header="{Binding T2576_G1_LechGia,Source={StaticResource eHCMSResources}}"
                                         ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}" />-->
                            <DataGridTextColumn
                                Binding="{Binding OutAmount, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                Header="{Binding G0085_G1_TTien, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTextColumn
                                Binding="{Binding TotalHIPayment, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                Header="{Binding K1232_G1_BHTra, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTextColumn
                                Binding="{Binding TotalPatientPayment, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                Header="{Binding T2090_G1_KHTra, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <!--  KMx: Không cần hiện ngày nhập, để chật chỗ (07/04/2016 17:34).  -->
                            <!--<DataGridTextColumn x:Name="colInwardDate" Binding="{Binding InwardDate,Mode=OneWay,StringFormat='dd/MM/yyyy'}"
                                                 Header="{Binding N0094_G1_NgNhap,Source={StaticResource eHCMSResources}}" IsReadOnly="True" ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}">
                        </DataGridTextColumn>-->
                            <DataGridTextColumn
                                x:Name="colTelephone"
                                Binding="{Binding InExpiryDate, Mode=OneWay, StringFormat='dd/MM/yyyy'}"
                                ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                Header="{Binding T1363_G1_HDung, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTemplateColumn
                                CellTemplate="{StaticResource ColChooseLoTemplate}"
                                Header="{Binding T2628_G1_LoSX, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTextColumn
                                x:Name="colDoctorStaff"
                                Width="100"
                                Binding="{Binding DoctorStaff.FullName}"
                                ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                Header="{Binding K1377_G1_BSiCDinh, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTextColumn
                                x:Name="colMedicalInstructionDate"
                                Binding="{Binding MedicalInstructionDate, Mode=OneWay, StringFormat='dd/MM/yyyy HH:mm:ss'}"
                                ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                Header="{Binding N0133_G1_NgYLenh, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                            <DataGridTextColumn
                                MinWidth="80"
                                Binding="{Binding Administration, Mode=TwoWay}"
                                ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"
                                Header="{Binding Z2128_G1_YLenh, Source={StaticResource eHCMSResources}}" />
                            <DataGridTextColumn
                                x:Name="colNotes"
                                MinWidth="80"
                                Binding="{Binding OutNotes, Mode=TwoWay}"
                                ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"
                                Header="{Binding G1183_G1_Ghichu, Source={StaticResource eHCMSResources}}" />
                            <DataGridTextColumn
                                x:Name="colVAT"
                                MinWidth="80"
                                Binding="{Binding VAT, Mode=TwoWay}"
                                ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"
                                Header="{Binding G2156_G1_VAT, Source={StaticResource eHCMSResources}}"
                                IsReadOnly="True" />
                        </DataGrid.Columns>
                    </AxControls:AxDataGridNy>

                    <!--<StackPanel Grid.Row="2" Orientation="Horizontal" >
                    <TextBlock HorizontalAlignment="Left"  VerticalAlignment="Center" Margin="10,0"  Text="{Binding G1691_G1_TThai, StringFormat='{}{0} :',Source={StaticResource eHCMSResources}}" Width="70" />
                    <TextBlock Text="{Binding SelectedOutInvoice.OutDrugInvStatus}"  HorizontalAlignment="Left" VerticalAlignment="Center" Style="{StaticResource MainFrame.TextBlock.00}" Margin="5,1,0,1"></TextBlock>
                </StackPanel>-->

                    <StackPanel
                        Grid.Row="2"
                        Grid.Column="1"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Orientation="Horizontal">
                        <TextBlock
                            Margin="5,2"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.00}"
                            Text="{Binding G1559_G1_TgTien, StringFormat='{}(1) {0} :', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            Margin="5,2"
                            VerticalAlignment="Center"
                            FontWeight="Bold"
                            Text="{Binding TotalInvoicePrice, Converter={StaticResource DecimalConverter}}"
                            TextAlignment="Right" />
                        <TextBlock
                            Margin="5,2"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.00}"
                            Text="{Binding K1232_G1_BHTra, StringFormat='{}(2) {0} :', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            Margin="5,2"
                            VerticalAlignment="Center"
                            FontWeight="Bold"
                            Text="{Binding TotalHIPayment, Converter={StaticResource DecimalConverter}}"
                            TextAlignment="Right" />
                        <TextBlock
                            Margin="5,2"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.00}"
                            Text="{Binding T2090_G1_KHTra, StringFormat='{}(3) {0} :', Source={StaticResource eHCMSResources}}" />
                        <TextBlock
                            Margin="5,2"
                            VerticalAlignment="Center"
                            FontWeight="Bold"
                            Foreground="Red"
                            Text="{Binding TotalPatientPayment, Converter={StaticResource DecimalConverter}}"
                            TextAlignment="Right" />
                    </StackPanel>
                    <StackPanel
                        Grid.Row="3"
                        Grid.ColumnSpan="2"
                        HorizontalAlignment="Right"
                        Orientation="Horizontal">
                        <Button
                            Name="btnNew"
                            Grid.Row="3"
                            Width="75"
                            Margin="2,1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Content="{Binding P0373_G1_PhMoi, Source={StaticResource eHCMSResources}}"
                            Style="{StaticResource MainFrame.Button}"
                            TabIndex="9"
                            Visibility="{Binding mXuatChoBenhNhan_PhieuMoi, Converter={StaticResource BooleanToVisibility}}" />
                        <Button
                            Name="btnSave"
                            Grid.Row="3"
                            Width="95"
                            Margin="2,1"
                            HorizontalAlignment="Right"
                            Content="{Binding T2937_G1_Luu, Source={StaticResource eHCMSResources}}"
                            IsEnabled="{Binding SelectedOutInvoice.CanSave, Mode=OneWay}"
                            Style="{StaticResource MainFrame.Button}"
                            TabIndex="6"
                            Visibility="{Binding mXuatChoBenhNhan_PhieuMoi, Converter={StaticResource BooleanToVisibility}}" />
                        <Button
                            Name="btnUpdate"
                            Grid.Row="3"
                            Width="95"
                            Margin="2,1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Content="{Binding K1599_G1_CNhat, Source={StaticResource eHCMSResources}}"
                            IsEnabled="{Binding SelectedOutInvoice.CanUpdate, Mode=OneWay}"
                            Style="{StaticResource MainFrame.Button}"
                            TabIndex="6"
                            Visibility="{Binding mXuatChoBenhNhan_PhieuMoi, Converter={StaticResource BooleanToVisibility}}" />
                        <Button
                            Name="btnPreview"
                            Grid.Row="3"
                            Width="75"
                            Margin="2,1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Content="{Binding G2521_G1_XemIn, Source={StaticResource eHCMSResources}}"
                            IsEnabled="{Binding SelectedOutInvoice.CanPrint, TargetNullValue=False, Mode=OneWay}"
                            Style="{StaticResource MainFrame.Button}"
                            TabIndex="10"
                            Visibility="{Binding mXuatChoBenhNhan_XemIn, Converter={StaticResource BooleanToVisibility}}" />
                        <Button
                            Name="btnPrint"
                            Grid.Row="3"
                            Width="75"
                            Margin="2,1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Content="{Binding T1820_G1_In, Source={StaticResource eHCMSResources}}"
                            IsEnabled="{Binding SelectedOutInvoice.CanPrint, TargetNullValue=False, Mode=OneWay}"
                            Style="{StaticResource MainFrame.Button}"
                            TabIndex="11"
                            Visibility="{Binding mXuatChoBenhNhan_In, Converter={StaticResource BooleanToVisibility}}" />
                        <Button
                            Name="btnPreviewDetails"
                            Grid.Row="3"
                            Width="75"
                            Margin="2,1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Bottom"
                            Content="{Binding Z2435_G1_PhieuCongKhaiThuoc, Source={StaticResource eHCMSResources}}"
                            IsEnabled="{Binding SelectedOutInvoice.CanPrint, TargetNullValue=False, Mode=OneWay}"
                            Style="{StaticResource MainFrame.Button}"
                            TabIndex="10"
                            Visibility="{Binding mXuatChoBenhNhan_XemIn, Converter={StaticResource BooleanToVisibility}}" />
                    </StackPanel>
                </Grid>
            </Grid>
        </ScrollViewer>
    </toolkit:BusyIndicator>
</UserControl>