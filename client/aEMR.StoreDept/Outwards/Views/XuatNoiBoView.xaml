<UserControl
    x:Class="aEMR.StoreDept.Outwards.Views.XuatNoiBoView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:AxControls="clr-namespace:aEMR.Controls;assembly=aEMR.Controls"
    xmlns:Converter="clr-namespace:aEMR.Common.Converters;assembly=aEMR.Common"
    xmlns:Resources="clr-namespace:eHCMSLanguage;assembly=aEMRLanguage"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="http://schemas.xceed.com/wpf/xaml/toolkit"
    d:DesignHeight="480"
    d:DesignWidth="750"
    mc:Ignorable="d">
    <UserControl.Resources>
        <Resources:eHCMSResources x:Key="eHCMSResources" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
        <Converter:BooleanToVisibilityNotConverter x:Key="BooleanToVisibilityNotConverter" />
        <DataTemplate x:Key="ColDeleteTemplate">
            <Button
                x:Name="lnkDelete"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                cal:Message.Attach="[Event Click] = [Action lnkDelete_Click($source, $eventArgs)]"
                ToolTipService.ToolTip="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}">
                <Image
                    Width="13"
                    Height="13"
                    Opacity="1"
                    Source="/aEMR.CommonViews;component/Assets/Images/Delete.png" />
            </Button>
        </DataTemplate>
        <DataTemplate x:Key="ColChooseLoTemplate">
            <Button
                x:Name="lnkChooseBatchNumber"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                cal:Message.Attach="[Event Click] = [Action lnkChooseBatchNumber_Click($source, $eventArgs)]"
                CommandParameter="{Binding GenMedProductItem.GenMedProductID}"
                Content="{Binding InBatchNumber, Mode=TwoWay}"
                Style="{StaticResource MainFrame.HyperlinkButton.01}"
                ToolTipService.ToolTip="{Binding Z0056_G1_ChonLoKhac, Source={StaticResource eHCMSResources}}" />
        </DataTemplate>
        <DataTemplate x:Key="AutoCompleteTemplate">
            <StackPanel Orientation="Horizontal">
                <TextBlock
                    Margin="5,1,10,1"
                    Style="{StaticResource MainFrame.TextBlock.Auto}"
                    Text="{Binding Code}" />
                <TextBlock
                    Name="txtDrugName"
                    Margin="0"
                    Padding="0"
                    Style="{StaticResource MainFrame.TextBlock.Auto}"
                    Text="{Binding BrandName}" />
                <TextBlock Style="{StaticResource MainFrame.TextBlock.Auto}" Text=" - " />
                <TextBlock
                    Margin="0"
                    Padding="0"
                    Style="{StaticResource MainFrame.TextBlock.Auto}"
                    Text="{Binding Remaining, Converter={StaticResource DecimalConverter3}}" />
                <TextBlock
                    Margin="10,0,0,0"
                    Padding="0"
                    Style="{StaticResource MainFrame.TextBlock.Auto}"
                    Text="{Binding UnitName}" />
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources>

    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="25" />
            <RowDefinition Height="Auto" />
            <RowDefinition />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>
        <TextBlock
            HorizontalAlignment="Center"
            Style="{StaticResource TBlock.TitleFormSmall}"
            Text="{Binding strHienThi, Mode=OneWay}" />

        <Grid Grid.Row="1" Visibility="{Binding mXuatTraHang_Xem, Converter={StaticResource BooleanToVisibility}}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="180" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <TextBlock
                Margin="4,0,0,2"
                HorizontalAlignment="Right"
                VerticalAlignment="Center"
                Style="{StaticResource MainFrame.TextBlock.00}"
                Text="{Binding P0379_G1_PhXuatCu, Source={StaticResource eHCMSResources}}" />
            <TextBox
                Grid.Column="1"
                Margin="2"
                cal:Message.Attach="[Event KeyUp] = [Action Search_KeyUp($source, $eventArgs)]"
                Style="{StaticResource MainFrame.TextBox}"
                TabIndex="0"
                Text="{Binding SearchCriteria.CodeInvoice, Mode=TwoWay}" />
            <Button
                x:Name="btnSearch"
                Grid.Column="2"
                Width="75"
                Margin="0,1"
                HorizontalAlignment="Left"
                Content="{Binding G0981_G1_Tim, Source={StaticResource eHCMSResources}}"
                Style="{StaticResource MainFrame.Button}"
                TabIndex="1" />
            <StackPanel
                Grid.Column="3"
                Margin="0,1"
                HorizontalAlignment="Right"
                Orientation="Horizontal">
                <!--<TextBlock Grid.Row="2" Grid.Column="2" HorizontalAlignment="Right" TextWrapping="Wrap" Margin="1" Text="{Binding T2873_G1_LoaiXuat, Source={StaticResource eHCMSResources}}"  Style="{StaticResource MainFrame.TextBlock.00}" VerticalAlignment="Center" />

                    <AxControls:KeyEnabledComboBox TabIndex="25"  Grid.Column="3"  Margin="1" Grid.Row="2" SelectedValueEx="{Binding SelectedOutInvoice.TypID, Mode=TwoWay, NotifyOnValidationError=True}" SelectedValuePath="TypID" DisplayMemberPath="TypName"  ItemsSource="{Binding RefOutputTypeLst}"  Style="{StaticResource MainFrame.ComboBox}"
                                              IsEnabled="{Binding SelectedOutInvoice.CanSaveAndPaid}" MinWidth="100" />-->

                <TextBlock
                    Grid.Row="2"
                    Grid.Column="2"
                    Margin="20,1,1,1"
                    Style="{StaticResource MainFrame.TextBlock.00}"
                    Text="{Binding T2204_G1_KhoXuat, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" />
                <AxControls:KeyEnabledComboBox
                    Name="comboBox1"
                    Grid.Row="2"
                    Grid.Column="3"
                    MinWidth="100"
                    Margin="1"
                    cal:Message.Attach="[Event SelectionChanged] = [Action comboBox1_SelectionChanged($source, $eventArgs)]"
                    DisplayMemberPath="swhlName"
                    IsEnabled="{Binding SelectedOutInvoice.CanSave}"
                    IsTabStop="True"
                    ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.StoreCbx}"
                    SelectedValueEx="{Binding SelectedOutInvoice.StoreID, Mode=TwoWay}"
                    SelectedValuePath="StoreID"
                    Style="{StaticResource MainFrame.ComboBox}"
                    TabIndex="2" />
                <!--  30/01/2021 DatTB Thay CanSaveAndPaid bằng SelectedOutInvoice.CanSave  -->
                <TextBlock
                    Margin="1"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Style="{StaticResource MainFrame.TextBlock.00}"
                    Text="{Binding N0194_G1_NhVien, StringFormat='{}{0} :', Source={StaticResource eHCMSResources}}" />
                <TextBlock
                    Grid.Row="1"
                    Grid.Column="2"
                    Margin="1,1,10,1"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Style="{StaticResource MainFrame.TextBlock.00}"
                    Text="{Binding StaffName}"
                    TextWrapping="NoWrap" />
            </StackPanel>
        </Grid>

        <Grid Grid.Row="2" DataContext="{Binding SelectedOutInvoice, Mode=TwoWay}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="350*" />
                <ColumnDefinition Width="600*" />
            </Grid.ColumnDefinitions>
            <Border
                Grid.Row="1"
                Grid.ColumnSpan="2"
                Margin="2"
                Style="{StaticResource LightBlueBorderStyle}">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="120*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="200*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="200" />
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                        <RowDefinition />
                    </Grid.RowDefinitions>
                    <!--<StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Grid.Column="5"  ></StackPanel>-->
                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="0"
                        Margin="5,1,5,1"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Style="{StaticResource MainFrame.TextBlock.00}"
                        Text="{Binding T2873_G1_LoaiXuat, Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap" />

                    <AxControls:KeyEnabledComboBox
                        Grid.Row="0"
                        Grid.Column="1"
                        MinWidth="100"
                        Margin="1"
                        cal:Message.Attach="[Event SelectionChanged] = [Action CbxTypID_SelectionChanged($source, $eventArgs)]"
                        DisplayMemberPath="TypName"
                        IsEnabled="{Binding CanSave}"
                        ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.RefOutputTypeLst}"
                        SelectedValueEx="{Binding TypID, Mode=TwoWay, NotifyOnValidationError=True}"
                        SelectedValuePath="TypID"
                        Style="{StaticResource MainFrame.ComboBox}"
                        TabIndex="25" />

                    <TextBlock
                        Grid.Row="1"
                        Margin="5,1,5,1"
                        HorizontalAlignment="Right"
                        Style="{StaticResource MainFrame.TextBlock.00}"
                        Text="{Binding T3534_G1_MaPhX, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap" />

                    <TextBox
                        Grid.Row="1"
                        Grid.Column="1"
                        Margin="1,1,1,0"
                        VerticalAlignment="Top"
                        IsReadOnly="True"
                        Style="{StaticResource MainFrame.TextBox}"
                        Text="{Binding OutInvID}"
                        d:LayoutOverrides="Width" />

                    <TextBlock
                        Grid.Row="2"
                        Grid.Column="0"
                        Margin="5,1,5,1"
                        HorizontalAlignment="Right"
                        Style="{StaticResource MainFrame.TextBlock.00}"
                        Text="{Binding N0130_G1_NgXuat, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap" />
                    <!--<TextBox Grid.Row="2" Grid.Column="1" Margin="1" d:LayoutOverrides="Width" Style="{StaticResource MainFrame.TextBox}"  Text="{Binding OutDate, StringFormat='dd/MM/yyyy'}" IsReadOnly="True" />-->
                    
                    <!-- VuTTM 280921 - Disable the invoice date - IsEnabled="{Binding eCanChange_DatetimeExProduct, Mode=OneWay}" VuTTM -->
                    <DatePicker
                        x:Name="dpOutDate"
                        Grid.Row="2"
                        Grid.Column="1"
                        Margin="2,1"
                        VerticalAlignment="Center"
                        IsEnabled="False"
                        SelectedDate="{Binding OutDate, TargetNullValue=null, Mode=TwoWay}"
                        Style="{StaticResource MainFrame.DatePicker}"
                        TabIndex="3" />
                    
                    <!--<TextBlock Grid.Row="1" Grid.Column="2"  Text="{Binding T2204_G1_KhoXuat, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.00}" Margin="20,1,1,1" />
                        <AxControls:KeyEnabledComboBox   Grid.Row="1" Grid.Column="3" Name="comboBox1" Style="{StaticResource MainFrame.ComboBox}" Margin="2,1" SelectedValueEx="{Binding StoreID, Mode=TwoWay}" SelectedValuePath="StoreID"  DisplayMemberPath="swhlName" ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.StoreCbx}" IsTabStop="True"
                                                  cal:Message.Attach="[Event SelectionChanged] = [Action comboBox1_SelectionChanged($source, $eventArgs)]" TabIndex="2"  IsEnabled="{Binding CanSaveAndPaid}" />-->

                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="2"
                        Margin="5,1,5,1"
                        HorizontalAlignment="Right"
                        Style="{StaticResource MainFrame.TextBlock.00}"
                        Text="{Binding T2189_G1_KhoNhan, Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}" />

                    <AxControls:KeyEnabledComboBox
                        Grid.Row="0"
                        Grid.Column="3"
                        Margin="1"
                        cal:Message.Attach="[Event SelectionChanged] = [Action comboBox1_Loaded($source, $eventArgs)]; [Event Loaded] = [Action comboBox1_Loaded($source, $eventArgs)]"
                        DisplayMemberPath="swhlName"
                        IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.IsEnableStorageCbx}"
                        ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.StoreCbxReturn}"
                        SelectedValueEx="{Binding OutputToID, Mode=TwoWay, NotifyOnValidationError=True}"
                        SelectedValuePath="StoreID"
                        Style="{StaticResource MainFrame.ComboBox}"
                        TabIndex="25"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}" />

                    <TextBlock
                        Grid.Row="1"
                        Grid.Column="2"
                        Margin="5,1,5,1"
                        HorizontalAlignment="Right"
                        Style="{StaticResource MainFrame.TextBlock.02}"
                        Text="{Binding N0160_G1_NguoiNhan, Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}" />
                    <TextBox
                        Grid.Row="1"
                        Grid.Column="3"
                        MinWidth="100"
                        Margin="1"
                        HorizontalAlignment="Stretch"
                        IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.IsEnableCustomerInfo}"
                        Style="{StaticResource MainFrame.TextBox}"
                        Text="{Binding CustomerName, Mode=TwoWay}"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}" />

                    <Button
                        Name="btnChoose"
                        Grid.Row="1"
                        Grid.Column="4"
                        Width="25"
                        Margin="2,1"
                        HorizontalAlignment="Left"
                        Content="..."
                        IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.IsEnableCustomerInfo}"
                        Style="{StaticResource MainFrame.Button}"
                        TabIndex="0"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}" />

                    <TextBlock
                        Grid.Row="2"
                        Grid.Column="2"
                        Margin="5,1,5,1"
                        HorizontalAlignment="Right"
                        Style="{StaticResource MainFrame.TextBlock.00}"
                        Text="{Binding K3354_G1_DChi, Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}" />
                    <!--Checkbox for XUAT CHONG DICH-->
                    <CheckBox Name="checkBoxNote"
                        Grid.Row="3" Grid.Column="3" 
                        Style="{StaticResource MainFrame.Checkbox}"
                        Content="Xuất chống dịch"
                        Margin="0,10,0,5" 
                        IsChecked="{Binding ElementName=LayoutRoot, Path=DataContext.IsXuatChongDich, Mode=TwoWay}"
                        VerticalContentAlignment="Center"
                        VerticalAlignment="Center" 
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsEnableCheckboxXCD, Converter={StaticResource VisibilityConverter}}"/>

                    <TextBox
                        Grid.Row="2"
                        Grid.Column="3"
                        Margin="1"
                        IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.IsEnableCustomerInfo}"
                        Style="{StaticResource MainFrame.TextBox}"
                        TabIndex="2"
                        Text="{Binding Address, Mode=TwoWay}"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}"
                        d:LayoutOverrides="Width" />

                    <!--<TextBlock
                        Grid.Row="0"
                        Grid.Column="4"
                        Margin="0,-1,2,3"
                        HorizontalAlignment="Right"
                        Style="{StaticResource MainFrame.TextBlock.00}"
                        Text="{Binding G1183_G1_Ghichu, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}"/>
                    <TextBox
                        Grid.Row="0"
                        Grid.RowSpan="2"
                        Grid.Column="5"
                        Margin="1"
                        AcceptsReturn="True"
                        Style="{StaticResource MainFrame.TextBox}"
                        TabIndex="2"
                        Text="{Binding Notes, Mode=TwoWay}"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}"
                        d:LayoutOverrides="Width" 
                        IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.IsEnableTextBoxNote}"/>-->

                    <!--<StackPanel Grid.Row="3" Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button  Content="..."  Margin="2,1" Width="25" HorizontalAlignment="Right"  Style="{StaticResource MainFrame.Button}" Name="btnChoose"
                                TabIndex="0" IsEnabled="{Binding IsVisitor}" Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsOutClinicDept, Converter={StaticResource VisibilityConverter}}" />
                        </StackPanel>-->
                    <!--  30/12/2020 DatTB  -->
                    <TextBlock
                        Grid.Row="3"
                        Grid.Column="0"
                        Margin="1"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Center"
                        Style="{StaticResource MainFrame.TextBlock.02}"
                        Text="{Binding N0239_G1_Nhom, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.CanSelectedRefGenDrugCatID_1, Converter={StaticResource VisibilityConverter}}" />

                    <AxControls:KeyEnabledComboBox
                        Grid.Row="3"
                        Grid.Column="1"
                        Width="200"
                        Margin="1"
                        HorizontalAlignment="Left"
                        cal:Message.Attach="[Event SelectionChanged]=[Action KeyEnabledComboBox_SelectionChanged($source,$eventArgs)]"
                        DisplayMemberPath="CategoryName"
                        IsEnabled="{Binding CanSave}"
                        ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.RefGenericDrugCategory_1s}"
                        SelectedValueEx="{Binding RefGenDrugCatID_1, Mode=TwoWay, NotifyOnValidationError=True}"
                        SelectedValuePath="RefGenDrugCatID_1"
                        Style="{StaticResource MainFrame.ComboBox}"
                        TabIndex="25"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.CanSelectedRefGenDrugCatID_1, Converter={StaticResource VisibilityConverter}}" />
                    <!--  30/12/2020 DatTB  -->

                    <TextBlock
                        Grid.Row="0"
                        Grid.Column="4"
                        Margin="5,1,5,1"
                        HorizontalAlignment="Right"
                        Style="{StaticResource MainFrame.TextBlock.02}"
                        Text="{Binding K3449_G1_DienThoai, Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}" />
                    <TextBox
                        Grid.Row="0"
                        Grid.Column="5"
                        Margin="1"
                        IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.IsEnableCustomerInfo}"
                        Style="{StaticResource MainFrame.TextBox}"
                        TabIndex="2"
                        Text="{Binding PhoneNumber, Mode=TwoWay}"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}"
                        d:LayoutOverrides="Width" />
                    <TextBlock
                        Grid.Row="4"
                        Grid.Column="0"
                        Margin="5,1,5,1"
                        HorizontalAlignment="Right"
                        Style="{StaticResource MainFrame.TextBlock.00}"
                        Text="{Binding G1183_G1_Ghichu, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"
                        TextWrapping="Wrap"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}"/>
                    <TextBox
                        Grid.Row="4"
                        Grid.RowSpan="2"
                        Grid.Column="1"
                        Margin="1"
                        AcceptsReturn="True"
                        Style="{StaticResource MainFrame.TextBox}"
                        TabIndex="2"
                        Text="{Binding Notes, Mode=TwoWay}"
                        Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsBalanceView, Converter={StaticResource BooleanToVisibilityNotConverter}}"
                        d:LayoutOverrides="Width" 
                        IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.IsEnableTextBoxNote}"/>
                </Grid>
                <!--<Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="25" />
                        <RowDefinition Height="25" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="120" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="150" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition />

                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Row="1" HorizontalAlignment="Right" TextWrapping="Wrap" Text="{Binding T3534_G1_MaPhX, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Margin="5,1,5,1" Style="{StaticResource MainFrame.TextBlock.00}" />

                    <TextBox Grid.Row="1" Grid.Column="1" Margin="1,1,1,0" d:LayoutOverrides="Width" Style="{StaticResource MainFrame.TextBox}"  Text="{Binding OutInvID}" IsReadOnly="True" VerticalAlignment="Top" />

                    <TextBlock Grid.Row="2" Grid.Column="0" HorizontalAlignment="Right" TextWrapping="Wrap" Margin="5,1,5,1" Text="{Binding N0130_G1_NgXuat, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.00}" />
                    <TextBox Grid.Row="2" Grid.Column="1" Margin="1" d:LayoutOverrides="Width" Style="{StaticResource MainFrame.TextBox}"  Text="{Binding OutDate, StringFormat='dd/MM/yyyy'}" IsReadOnly="True" />
                    <TextBlock Grid.Column="2" HorizontalAlignment="Right" TextWrapping="Wrap" Margin="5,1,5,1" Text="{Binding N0297_G1_NhVienXuat, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Grid.Row="2" Style="{StaticResource MainFrame.TextBlock.00}" />
                    <TextBox  Grid.Column="3" Margin="1" d:LayoutOverrides="Width" Style="{StaticResource MainFrame.TextBox}" Grid.Row="2" Text="{Binding StaffName}" IsReadOnly="True" />
                    <TextBlock Grid.Row="1" Grid.Column="2" HorizontalAlignment="Right" TextWrapping="Wrap" Margin="5,1,5,1" Text="{Binding T3571_G1_MaPhYC, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"
                               Style="{StaticResource MainFrame.TextBlock.00}" />

                    <TextBox Grid.Column="3" Margin="1" d:LayoutOverrides="Width" Style="{StaticResource MainFrame.TextBox}" Grid.Row="1" Text="{Binding ReqNumCode}" IsReadOnly="True" />
                    <Button Grid.Row="1" Content="..." Grid.Column="4" Width="20" Style="{StaticResource MainFrame.Button}" Name="btnFindRequest"
                             Visibility="{Binding bBtnEdit, Converter={StaticResource BooleanToVisibility} }" TabIndex="0" />

                    <TextBlock Grid.Column="5" HorizontalAlignment="Right" TextWrapping="Wrap" Margin="5,1,5,1" Text="{Binding T2189_G1_KhoNhan, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Grid.Row="1" Style="{StaticResource MainFrame.TextBlock.00}" Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForClinic, Converter={StaticResource VisibilityConverter}}" />
                    <AxControls:KeyEnabledComboBox Name="cbxInClinicDept" Grid.Row="1" Grid.Column="6" Margin="1" Style="{StaticResource MainFrame.ComboBox}" ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.StoreClinicDept}"
                                       SelectedValuePath="StoreID" DisplayMemberPath="swhlName" SelectedValueEx="{Binding ToStoreID, Mode=TwoWay}" IsEnabled="{Binding IsEnableToStore}" Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForClinic, Converter={StaticResource VisibilityConverter}}"></AxControls:KeyEnabledComboBox>


                    <TextBlock Grid.Column="5" HorizontalAlignment="Right" TextWrapping="Wrap" Margin="5,1,5,1" Text="{Binding T2189_G1_KhoNhan, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Grid.Row="1" Style="{StaticResource MainFrame.TextBlock.00}" Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForStore, Converter={StaticResource VisibilityConverter}}" />
                    <AxControls:KeyEnabledComboBox Name="cbxInDeptStorage" Grid.Row="1" Grid.Column="6" Margin="1" Style="{StaticResource MainFrame.ComboBox}" ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.FromStoreCbx}"
                                       SelectedValuePath="StoreID" DisplayMemberPath="swhlName" SelectedValueEx="{Binding ToStoreID, Mode=TwoWay}" IsEnabled="{Binding IsEnableToStore}" Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForStore, Converter={StaticResource VisibilityConverter}}"></AxControls:KeyEnabledComboBox>

                    <TextBlock Grid.Column="5" HorizontalAlignment="Right" TextWrapping="Wrap" Margin="5,1,5,1" Text="{Binding K0962_G1_BSiNhan, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Grid.Row="1" Style="{StaticResource MainFrame.TextBlock.00}" Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForDoctor, Converter={StaticResource VisibilityConverter}}" />
                    <AxControls:KeyEnabledComboBox Name="cbxNguoiDuyet" Grid.Column="6" Margin="1" Style="{StaticResource MainFrame.ComboBox}" Grid.Row="1" SelectedValueEx="{Binding ToStaffID, Mode=TwoWay}"  SelectedValuePath="StaffID" DisplayMemberPath="IDAndFullName" ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.ListStaff}"
                                           IsEnabled="{Binding IsEnableToStore}"  Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForDoctor, Converter={StaticResource VisibilityConverter}}"></AxControls:KeyEnabledComboBox>

                    <TextBlock Grid.Column="5" HorizontalAlignment="Right" TextWrapping="Wrap" Margin="5,1,5,1" Text="{Binding K1400_G1_BVBan, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Grid.Row="1" Style="{StaticResource MainFrame.TextBlock.00}" Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForHospital, Converter={StaticResource VisibilityConverter}}" />
                    <AxControls:KeyEnabledComboBox Name="cbxBVBan" Grid.Column="6" Margin="1" Style="{StaticResource MainFrame.ComboBox}" Grid.Row="1" SelectedValueEx="{Binding HosID, Mode=TwoWay}"  SelectedValuePath="HosID" DisplayMemberPath="HosName" ItemsSource="{Binding ElementName=LayoutRoot, Path=DataContext.Hospitals}"
                                           IsEnabled="{Binding IsEnableToStore}"  Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForHospital, Converter={StaticResource VisibilityConverter}}" TabIndex="1"></AxControls:KeyEnabledComboBox>


                    <TextBlock Grid.Row="2" Grid.Column="5" HorizontalAlignment="Right" TextWrapping="Wrap" Margin="0,-1,2,3" Text="{Binding G1183_G1_Ghichu, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.00}" />
                    <TextBox Grid.Row="2" Grid.Column="6" Margin="1" d:LayoutOverrides="Width" Style="{StaticResource MainFrame.TextBox}" Text="{Binding Notes, Mode=TwoWay}" TabIndex="2" />

                    <TextBlock Height="21" x:Name="tbloutiID" Text="{Binding outiID}" Visibility="Collapsed" />
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Grid.Column="0" Grid.ColumnSpan="4">
                        <TextBlock  VerticalAlignment="Center" Margin="2,1" Text="{Binding T2873_G1_LoaiXuat, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.00}" />
                        <RadioButton GroupName="Sell" Content="{Binding K1003_G1_Ban, Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding IsInternal_Sell, Mode=TwoWay}" IsEnabled="{Binding CanSaveAndPaid}"></RadioButton>
                        <RadioButton GroupName="Sell" Content="{Binding K1897_G1_ChoMuon, Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding IsInternal_Loan, Mode=TwoWay}" IsEnabled="{Binding CanSaveAndPaid}"></RadioButton>

                        <TextBlock  VerticalAlignment="Center" Margin="10,1,2,1" Text="{Binding K1008_G1_BanTheo, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.00}" Visibility="{Binding IsInternal_Sell, Converter={StaticResource VisibilityConverter}}" />
                        <RadioButton GroupName="Price" Content="{Binding T1160_G1_GVon, Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding IsSell_Cost, Mode=TwoWay}" Visibility="{Binding IsInternal_Sell, Converter={StaticResource VisibilityConverter}}" cal:Message.Attach="[Event Checked] = [Action RadioButton_Checked($source, $eventArgs)];[Event Unchecked] = [Action RadioButton_Unchecked($source, $eventArgs)]" IsEnabled="{Binding CanSaveAndPaid}"></RadioButton>
                        <RadioButton GroupName="Price" Content="{Binding T1147_G1_GiaThongThuong, Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding IsNotSell_Cost, Mode=TwoWay}" Visibility="{Binding IsInternal_Sell, Converter={StaticResource VisibilityConverter}}" IsEnabled="{Binding CanSaveAndPaid}"></RadioButton>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="4" Grid.ColumnSpan="8">
                        <TextBlock  VerticalAlignment="Center" Margin="2,1" Text="{Binding G2844_G1_XuatDen, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.00}" />
                        <RadioButton Content="{Binding T2183_G1_KhoCuaKhoaPh, Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForClinic, Mode=TwoWay}" IsEnabled="{Binding IsEnableToStore}"></RadioButton>
                        <RadioButton Content="{Binding T2185_G1_KhoKhac, Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForStore, Mode=TwoWay}" IsEnabled="{Binding IsEnableToStore}"></RadioButton>
                        <RadioButton Content="{Binding K0961_G1_BSi, Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForDoctor, Mode=TwoWay}" IsEnabled="{Binding IsEnableToStore}"></RadioButton>
                        <RadioButton Content="{Binding K1400_G1_BVBan, Source={StaticResource eHCMSResources}}" Margin="2,1" VerticalAlignment="Center" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding ElementName=LayoutRoot, Path=DataContext.IsInternalForHospital, Mode=TwoWay}" IsEnabled="{Binding IsEnableToStore}"></RadioButton>
                    </StackPanel>
                </Grid>-->
            </Border>
        </Grid>

        <Border
            Grid.Row="3"
            Margin="3"
            Style="{StaticResource LightBlueBorderStyle}">
            <Grid x:Name="Details">
                <Grid.RowDefinitions>
                    <RowDefinition Height="35" />
                    <RowDefinition Height="200*" />
                    <RowDefinition Height="22" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="80" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Border
                    Grid.Row="0"
                    Grid.Column="0"
                    Grid.ColumnSpan="3"
                    Margin="2"
                    Style="{StaticResource LightBlueBorderStyle}"
                    Visibility="{Binding mXuatTraHang_PhieuMoi, Converter={StaticResource BooleanToVisibility}}">
                    <AxControls:AxGrid Name="grid1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="80" />
                            <ColumnDefinition Width="300*" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="60" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="80" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="60" />
                            <ColumnDefinition Width="80" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock
                                Margin="2,1"
                                Style="{StaticResource MainFrame.TextBlock.00}"
                                Text="{Binding K2170_G1_ChonThuoc, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                            <RadioButton
                                Margin="2,1"
                                cal:Message.Attach="[Event Checked]=[Action Code_Checked($source,$eventArgs)]"
                                Content="{Binding K2569_G1_Code, Source={StaticResource eHCMSResources}}"
                                GroupName="ChooseDrug" />
                            <RadioButton
                                Margin="2,1"
                                cal:Message.Attach="[Event Checked]=[Action Name_Checked($source,$eventArgs)]"
                                Content="{Binding T0829_G1_Ten, Source={StaticResource eHCMSResources}}"
                                GroupName="ChooseDrug"
                                IsChecked="True" />
                        </StackPanel>
                        <!--<TextBlock Margin="2,1"  HorizontalAlignment="Right" VerticalAlignment="Center" Text="{Binding K2170_G1_ChonThuoc, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.TextBlock.01}" />-->
                        <AxControls:AxTextBox
                            Grid.Column="1"
                            Margin="2,1"
                            cal:Message.Attach="[Event LostFocus] = [Action AxTextBox_LostFocus($source, $eventArgs)];                                               [Event Loaded] = [Action AxTextBox_Loaded($source, $eventArgs)]"
                            IsEnabled="{Binding VisibilityCode, Mode=OneWay}"
                            Style="{StaticResource MainFrame.TextBox}"
                            TabIndex="6"
                            Text="{Binding SelectedSellVisitor.Code, Mode=TwoWay}" />
                        <AxControls:AxAutoComplete
                            Name="AutoDrug_Text"
                            Grid.Column="2"
                            Margin="2,1"
                            cal:Message.Attach="[Event Populating] = [Action AutoCompleteBox_Populating($source, $eventArgs)];                                                    [Event DropDownClosed] = [Action AutoDrug_Text_DropDownClosed($source, $eventArgs)];                                                    [Event Loaded] = [Action AutoDrug_Text_Loaded($source, $eventArgs)]"
                            FilterMode="None"
                            FontWeight="Bold"
                            IsEnabled="{Binding VisibilityName, Mode=OneWay}"
                            IsTabStop="False"
                            ItemContainerStyle="{StaticResource AxAutoCompleteBoxBkg}"
                            ItemTemplate="{StaticResource AutoCompleteTemplate}"
                            SelectedItem="{Binding SelectedSellVisitor, Mode=TwoWay}"
                            Style="{StaticResource AxAutoCompleteMyStyle}"
                            TabIndex="7"
                            TextBoxStyle="{StaticResource MainFrame.TextBox}"
                            ValueMemberBinding="{Binding BrandName, Mode=TwoWay}" />

                        <TextBlock
                            Grid.Column="3"
                            Margin="2,1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.01}"
                            Text="{Binding K3966_G1_Dvt, Source={StaticResource eHCMSResources}}" />
                        <TextBox
                            Grid.Column="4"
                            Margin="2,1"
                            IsEnabled="False"
                            Style="{StaticResource MainFrame.TextBox}"
                            Text="{Binding SelectedSellVisitor.SelectedUnit.UnitName, Mode=OneWay}" />
                        <TextBlock
                            Grid.Column="5"
                            Margin="2,1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.01}"
                            Text="{Binding S0670_G1_SLggTon, Source={StaticResource eHCMSResources}}" />
                        <AxControls:AxTextBox
                            Grid.Column="6"
                            Margin="2,1"
                            IsEnabled="False"
                            Style="{StaticResource MainFrame.TextBox}"
                            Text="{Binding SelectedSellVisitor.Remaining, Converter={StaticResource DecimalConverter3}}"
                            TextAlignment="Right" />
                        <TextBlock
                            Grid.Column="7"
                            Margin="2,1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource MainFrame.TextBlock.01}"
                            Text="{Binding S0672_G1_SLggXuat, Source={StaticResource eHCMSResources}}" />
                        <AxControls:AxTextBox
                            Grid.Column="8"
                            Margin="2,1"
                            cal:Message.Attach="[Event Loaded] = [Action Quantity_Loaded($source, $eventArgs)]"
                            IsEnabled="{Binding SelectedOutInvoice.CanSaveAndPaid, Mode=OneWay}"
                            Style="{StaticResource MainFrame.TextBox}"
                            TabIndex="8"
                            Text="{Binding SelectedSellVisitor.RequiredNumber, Mode=TwoWay}"
                            TextAlignment="Right" />
                        <Button
                            Name="AddItem"
                            Grid.Column="9"
                            Width="75"
                            Margin="2,1"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                            IsEnabled="{Binding SelectedOutInvoice.CanSaveAndPaid, Mode=OneWay}"
                            Style="{StaticResource MainFrame.Button}"
                            TabIndex="9" />
                    </AxControls:AxGrid>
                </Border>
                <DataGrid
                    x:Name="grdPrescription"
                    Grid.Row="1"
                    Grid.Column="0"
                    Grid.ColumnSpan="3"
                    cal:Message.Attach="[Event LoadingRow] = [Action grdPrescription_LoadingRow($source, $eventArgs)];                           [Event Loaded] = [Action grdPrescription_Loaded($source, $eventArgs)];                           [Event Unloaded] = [Action grdPrescription_Unloaded($source, $eventArgs)]"
                    AutoGenerateColumns="False"
                    CanUserAddRows="False"
                    ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle}"
                    HeadersVisibility="All"
                    HorizontalScrollBarVisibility="Auto"
                    IsReadOnly="{Binding SelectedOutInvoice.CanSaveAndPaid, Converter={StaticResource InverseBoolConverter}}"
                    ItemsSource="{Binding SelectedOutInvoice.OutwardDrugClinicDepts, Mode=OneWay}"
                    SelectedItem="{Binding SelectedOutwardDrugClinicDept, Mode=TwoWay}"
                    Style="{StaticResource MainFrame.DataGridStyle}"
                    VerticalScrollBarVisibility="Visible">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn CellTemplate="{StaticResource ColDeleteTemplate}" />
                        <DataGridTextColumn
                            x:Name="colDrugID"
                            Binding="{Binding GenMedProductItem.Code}"
                            ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                            Header="{Binding K2569_G1_Code, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            x:Name="colDrugName"
                            Binding="{Binding GenMedProductItem.BrandName}"
                            ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"
                            Header="{Binding T0854_G1_TenHg, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            x:Name="colContent"
                            Binding="{Binding GenMedProductItem.Content}"
                            ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                            Header="{Binding T1316_G1_HLg, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            x:Name="colCityStateZipCode"
                            Binding="{Binding GenMedProductItem.SelectedUnit.UnitName}"
                            ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                            Header="{Binding K3966_G1_Dvt, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                        <DataGridTemplateColumn
                            CellTemplate="{StaticResource ColChooseLoTemplate}"
                            Header="{Binding T2628_G1_LoSX, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            Binding="{Binding OutQuantity, Mode=TwoWay, Converter={StaticResource DecimalConverter3}, UpdateSourceTrigger=LostFocus}"
                            ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                            Header="{Binding S0612_G1_SLgXuat, Source={StaticResource eHCMSResources}}" />
                        <DataGridTextColumn
                            Binding="{Binding OutPrice, Converter={StaticResource DecimalConverter}}"
                            ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                            Header="{Binding K3591_G1_DGia, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            Binding="{Binding OutAmount, Converter={StaticResource DecimalConverter}}"
                            ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                            Header="{Binding G0085_G1_TTien, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            x:Name="colTelephone"
                            Binding="{Binding InExpiryDate, Mode=OneWay, StringFormat='dd/MM/yyyy'}"
                            ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                            Header="{Binding T1363_G1_HDung, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            x:Name="colLocation"
                            MinWidth="40"
                            Binding="{Binding GenMedProductItem.ShelfName, Mode=OneWay}"
                            ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"
                            Header="{Binding T2013_G1_Ke, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                        <DataGridTextColumn
                            x:Name="colNotes"
                            MinWidth="80"
                            Binding="{Binding OutNotes, Mode=TwoWay}"
                            ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"
                            Header="{Binding G1183_G1_Ghichu, Source={StaticResource eHCMSResources}}" />

                        <DataGridTextColumn
                            Binding="{Binding VAT}"
                            ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                            Header="{Binding G2156_G1_VAT, Source={StaticResource eHCMSResources}}"
                            IsReadOnly="True" />
                    </DataGrid.Columns>
                </DataGrid>
                <TextBlock
                    Grid.Row="2"
                    Grid.Column="0"
                    Width="70"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Text="{Binding G1691_G1_TThai, StringFormat='{}{0} :', Source={StaticResource eHCMSResources}}" />
                <TextBlock
                    Grid.Row="2"
                    Grid.Column="0"
                    Margin="70,1,0,1"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Style="{StaticResource MainFrame.TextBlock.00}"
                    Text="{Binding SelectedOutInvoice.OutDrugInvStatus}" />
                <TextBlock
                    Name="label3"
                    Grid.Row="2"
                    Grid.Column="1"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Foreground="Red"
                    Text="{Binding G1559_G1_TgTien, StringFormat='{}{0} :', Source={StaticResource eHCMSResources}}" />
                <TextBlock
                    Grid.Row="2"
                    Grid.Column="2"
                    Margin="10,0,0,0"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    FontWeight="Bold"
                    Text="{Binding TotalPrice, Converter={StaticResource DecimalConverterRound}}"
                    TextAlignment="Right" />
            </Grid>
        </Border>
        <StackPanel
            Grid.Row="4"
            HorizontalAlignment="Right"
            Orientation="Horizontal">
            <Button
                Name="btnNew"
                Grid.Row="3"
                Width="75"
                Margin="2,1"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Content="{Binding P0373_G1_PhMoi, Source={StaticResource eHCMSResources}}"
                Style="{StaticResource MainFrame.Button}"
                TabIndex="9"
                Visibility="{Binding mXuatTraHang_PhieuMoi, Converter={StaticResource BooleanToVisibility}}" />
            <Button
                Name="btnSave"
                Grid.Row="3"
                Width="95"
                Margin="2,1"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Content="{Binding G0739_G1_THien, Source={StaticResource eHCMSResources}}"
                IsEnabled="{Binding SelectedOutInvoice.CanSave, Mode=OneWay}"
                Style="{StaticResource MainFrame.Button}"
                TabIndex="6"
                Visibility="{Binding mXuatTraHang_PhieuMoi, Converter={StaticResource BooleanToVisibility}}" />
            <Button
                Name="btnUpdate"
                Grid.Row="3"
                Width="95"
                Margin="2,1"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Content="{Binding K1599_G1_CNhat, Source={StaticResource eHCMSResources}}"
                IsEnabled="{Binding SelectedOutInvoice.CanUpdate, Mode=OneWay}"
                Style="{StaticResource MainFrame.Button}"
                TabIndex="6"
                Visibility="{Binding IsEnableUpdateButton, Converter={StaticResource BooleanToVisibility}}" />
            <Button
                Name="btnPreview"
                Grid.Row="3"
                Width="75"
                Margin="2,1"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Content="{Binding G2521_G1_XemIn, Source={StaticResource eHCMSResources}}"
                IsEnabled="{Binding SelectedOutInvoice.CanPrint, TargetNullValue=False, Mode=OneWay}"
                Style="{StaticResource MainFrame.Button}"
                TabIndex="10"
                Visibility="{Binding mXuatTraHang_XemIn, Converter={StaticResource BooleanToVisibility}}" />
            <Button
                Name="btnPreviewPhieuTruyenMau"
                Grid.Row="3"
                Margin="2,1"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Content="Phiếu truyền máu"
                IsEnabled="{Binding SelectedOutInvoice.CanPrint, TargetNullValue=False, Mode=OneWay}"
                Style="{StaticResource MainFrame.Button}"
                TabIndex="10"
                Visibility="{Binding IsBloodView, Converter={StaticResource BooleanToVisibility}}" />
            <Button
                Name="btnPrint"
                Grid.Row="3"
                Width="75"
                Margin="2,1"
                HorizontalAlignment="Right"
                VerticalAlignment="Bottom"
                Content="{Binding T1820_G1_In, Source={StaticResource eHCMSResources}}"
                IsEnabled="{Binding SelectedOutInvoice.CanPrint, TargetNullValue=False, Mode=OneWay}"
                Style="{StaticResource MainFrame.Button}"
                TabIndex="11"
                Visibility="{Binding mXuatTraHang_In, Converter={StaticResource BooleanToVisibility}}" />
        </StackPanel>
    </Grid>
</UserControl>
