<UserControl    x:Class="aEMR.DrugDept.Views.XapNhapPXHangKyGoiView"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                xmlns:cal="http://www.caliburnproject.org"
                xmlns:AxControls="clr-namespace:aEMR.Controls;assembly=aEMR.Controls"
                x:Name="Me"
                xmlns:vm="clr-namespace:aEMR.Common.Converters;assembly=aEMR.Common"
                xmlns:Resources="clr-namespace:eHCMSLanguage;assembly=aEMRLanguage"
                mc:Ignorable="d"
                d:DesignWidth="932" d:DesignHeight="650" >
    <UserControl.Resources>
        <Resources:eHCMSResources x:Key="eHCMSResources"/>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibility"/>
        <vm:LongToNotBooleanConverter x:Key="LongToNotBooleanConverter"/>
        <vm:DecimalConverter x:Key="DecimalConverter"/>
        <vm:DecimalConverter2 x:Key="DecimalConverter2"/>
        <DataTemplate x:Key="QtyPackagingCellEditTemplate">
            <AxControls:AxTextBox Height="22" Name="txtDrugName"  Text="{Binding PackageQuantity,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverter2}}"    TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}" />
        </DataTemplate>
        <DataTemplate x:Key="QtyPackagingCellTemplate">
            <TextBlock Height="22" Name="txtDrugName"  Text="{Binding PackageQuantity,Converter={StaticResource DecimalConverter2}}"    HorizontalAlignment="Right" Margin="0" />
        </DataTemplate>

        <DataTemplate x:Key="QtyCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName"  Text="{Binding InQuantity,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverterRound}}"    TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="QtyCellTemplate">
            <StackPanel>
                <TextBlock Height="22" Name="txtDrugName"  Text="{Binding InQuantity,Converter={StaticResource DecimalConverterRound}}"    HorizontalAlignment="Right" Margin="0" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="DonatedCellEditTemplate">
            <StackPanel>
                <ComboBox Name="cbxCurrency" SelectedValuePath="LookupID" DisplayMemberPath="ObjectValue" SelectedItem="{Binding ObjV_GoodsType,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                          cal:Message.Attach="[Event Loaded] = [Action GoodsType_Loaded($source, $eventArgs)]"></ComboBox>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="DonatedCellTemplate">
            <StackPanel>
                <TextBlock Name="cbxCurrency"  Text="{Binding ObjV_GoodsType.ObjectValue}" HorizontalAlignment="Center"/>
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="PackagePriceCellEditTemplate">

            <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding PackagePrice,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverter}}"   TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>

        </DataTemplate>
        <DataTemplate x:Key="PackagePriceCellTemplate">
            <TextBlock  Name="txtDrugName" Text="{Binding PackagePrice,Converter={StaticResource DecimalConverter}}"  HorizontalAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="UnitPriceCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding RefGenMedProductDetails.UnitPrice,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverter}}"   TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="UnitPriceCellTemplate">
            <TextBlock  Name="txtDrugName" Text="{Binding RefGenMedProductDetails.UnitPrice,Converter={StaticResource DecimalConverter}}"  HorizontalAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="DiscountByPercentCellTemplate">
            <StackPanel VerticalAlignment="Center">
                <TextBlock Name="txtDrugName" Text="{Binding DiscountingByPercent,Converter={StaticResource DecimalConverter}}"  Margin="0" Padding="0"  HorizontalAlignment="Right"  />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="DiscountByPercentCellEditTemplate">
            <AxControls:AxTextBox    Text="{Binding DiscountingByPercent,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,ValidatesOnExceptions=True, NotifyOnValidationError=True,Converter={StaticResource DecimalConverter}}" TextAlignment="Right"  />
        </DataTemplate>
        <DataTemplate x:Key="DiscountingCellTemplate">
            <StackPanel VerticalAlignment="Center">
                <TextBlock Name="txtDrugName" Text="{Binding Discounting,Converter={StaticResource DecimalConverter}}"  Margin="0" Padding="0"  HorizontalAlignment="Right" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="DiscountingCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding Discounting,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverter}}" TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="InBatchNumberPriceCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding InBatchNumber,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"   Style="{StaticResource MainFrame.TextBox.Grid}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="InBatchNumberPriceCellTemplate">
            <TextBlock Height="22" Name="txtDrugName" Text="{Binding InBatchNumber}"  HorizontalAlignment="Center" />
        </DataTemplate>
        <DataTemplate x:Key="InProductionDateCellEditTemplate">
            <StackPanel>
                <AxControls:AxDatePicker  Height="22" SelectedDate="{Binding InProductionDate,TargetNullValue=Null,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0" Padding="0"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="InProductionDateCellTemplate">
            <TextBlock  Height="22" Text="{Binding InProductionDate,StringFormat='dd/MM/yyyy'}" Margin="0" Padding="0"/>
        </DataTemplate>
        <DataTemplate x:Key="InExpiryDateCellEditTemplate">
            <StackPanel>
                <AxControls:AxDatePicker Height="22" SelectedDate="{Binding InExpiryDate,TargetNullValue=Null,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Margin="0" Padding="0"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="InExpiryDateCellTemplate">
            <TextBlock Height="22" Text="{Binding InExpiryDate,StringFormat='dd/MM/yyyy'}" Margin="0" Padding="0" HorizontalAlignment="Center"/>
        </DataTemplate>

        <DataTemplate x:Key="TotalNotVATCellEditTemplate">
            <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding TotalPriceNotVAT,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverter}}"   TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>
        </DataTemplate>
        <DataTemplate x:Key="TotalNotVATCellTemplate">
            <TextBlock  Name="txtDrugName" Text="{Binding TotalPriceNotVAT,Converter={StaticResource DecimalConverter}}"  HorizontalAlignment="Right" />
        </DataTemplate>
        
        <DataTemplate x:Key="CollnkDelete">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Button x:Name="hplDelete" cal:Message.Attach="[Event Click] = [Action hplDelete_Click($source, $eventArgs)]" ToolTipService.ToolTip="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}"
                        Style="{StaticResource MainFrame.HyperlinkButton.01}">
                        <Image Source="/aEMR.CommonViews;component/Assets/Images/Delete.png" Height="13" Width="13" Opacity="1" />
                </Button>
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="CollnkRefGenMedProductDetail">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                <Button x:Name="lnkRefGenMedProductDetail" cal:Message.Attach="[Event Click] = [Action lnkRefGenMedProductDetail_Click($source, $eventArgs)]" ToolTipService.ToolTip="{Binding G0568_G1_TTinCTietHg, Source={StaticResource eHCMSResources}}"
                        Style="{StaticResource MainFrame.HyperlinkButton.01}">
                    <Image Source="/aEMR.CommonViews;component/Assets/Images/view-details.png" Height="13" Width="13" Opacity="1" />
                </Button>
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="CollnkDeleteMain">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                <Button x:Name="lnkDeleteMain" cal:Message.Attach="[Event Click] = [Action lnkDeleteMain_Click($source, $eventArgs)]" ToolTipService.ToolTip="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}"
                        Style="{StaticResource MainFrame.HyperlinkButton.01}">
                    <Image Source="/aEMR.CommonViews;component/Assets/Images/Delete.png" Height="13" Width="13" Opacity="1" />
                </Button>
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="CollnkRefGenMedProductDetail_Inward">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" >
                <Button x:Name="lnkRefGenMedProductDetail_Inward" cal:Message.Attach="[Event Click] = [Action lnkRefGenMedProductDetail_Inward_Click($source, $eventArgs)]" ToolTipService.ToolTip="{Binding G0568_G1_TTinCTietHg, Source={StaticResource eHCMSResources}}"
                        Style="{StaticResource MainFrame.HyperlinkButton.01}">
                    <Image Source="/aEMR.CommonViews;component/Assets/Images/view-details.png" Height="13" Width="13" Opacity="1" />
                </Button>
            </StackPanel>
        </DataTemplate>

        <DataTemplate x:Key="SdlDescriptionTemplete">
            <AxControls:AxAutoComplete Name="acbDrug" IsDropDownOpen="True" Text="{Binding SdlDescription,Mode=TwoWay}"
                                                IsTextCompletionEnabled="False"  FilterMode="None"
                                           ValueMemberBinding="{Binding SdlDescription, Mode=OneWay}" 
                                           cal:Message.Attach="[Event Populating] = [Action AutoLocation_Text_Populating($source, $eventArgs)]
                                                              ;[Event SelectionChanged] = [Action AutoLocation_Tex_SelectionChanged($source, $eventArgs)]"
                                           BorderBrush="#FFC1D2E6"
                                           Style="{StaticResource MainFrame.AutoCompleteBox}"
                                       ItemContainerStyle="{StaticResource AxAutoCompleteBoxBkg}">
                <AxControls:AxAutoComplete.ItemTemplate>
                    <DataTemplate>
                        <TextBlock Name="txtDrugName" Text="{Binding SdlDescription}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" />
                    </DataTemplate>
                </AxControls:AxAutoComplete.ItemTemplate>
            </AxControls:AxAutoComplete>
        </DataTemplate>

        <DataTemplate x:Key="AutoSupplierTemplate">
            <TextBlock Name="txtDrugName" Text="{Binding SupplierName}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" />
        </DataTemplate>
        <DataTemplate x:Key="NormalPriceCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding RefGenMedProductDetails.NormalPrice,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverterRound}}"   TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="NormalPriceCellTemplate">
            <TextBlock  Name="txtDrugName" Text="{Binding RefGenMedProductDetails.NormalPrice,Converter={StaticResource DecimalConverterRound}}"  HorizontalAlignment="Right" />
        </DataTemplate>

        <DataTemplate x:Key="HIPatientPriceCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding RefGenMedProductDetails.HIPatientPrice,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverterRound}}"   TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="HIPatientPriceCellTemplate">
            <TextBlock  Name="txtDrugName" Text="{Binding RefGenMedProductDetails.HIPatientPrice,Converter={StaticResource DecimalConverterRound}}"  HorizontalAlignment="Right" />
        </DataTemplate>

        <DataTemplate x:Key="HIPriceCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding RefGenMedProductDetails.HIAllowedPrice,Mode=TwoWay , UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverterRound}}"   TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="HIPriceCellTemplate">
            <TextBlock  Name="txtDrugName" Text="{Binding RefGenMedProductDetails.HIAllowedPrice,Converter={StaticResource DecimalConverterRound}}"  HorizontalAlignment="Right" />
        </DataTemplate>
    </UserControl.Resources>
    <!--<toolkit:BusyIndicator HorizontalAlignment="Stretch"
                                         VerticalAlignment="Stretch"
                                         IsBusy="{Binding IsLoading, Mode=OneWay}"                                         
                                         DisplayAfter="0:0:0.100"
                                         Margin="0,0,0,10">-->
        <Grid x:Name="LayoutRoot">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
                <RowDefinition Height="Auto"></RowDefinition>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
                <ColumnDefinition Width="Auto"></ColumnDefinition>
            </Grid.ColumnDefinitions>
            <Grid Grid.Row="0" Grid.ColumnSpan="3">
                <TextBlock  Text="{Binding strHienThi, Mode=OneWay}" Style="{StaticResource TBlock.TitleFormSmall}" HorizontalAlignment="Center"></TextBlock>
            </Grid>
            <StackPanel Orientation="Horizontal"  Margin="2" Grid.Row="1" Grid.ColumnSpan="3"  Visibility="{Binding mSapNhapHangKyGui_Tim,Converter={StaticResource BooleanToVisibility} }">
                <TextBlock HorizontalAlignment="Left" VerticalAlignment="Center" TextWrapping="Wrap" Text="{Binding T3575_G1_MaPN, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Margin="11,1,5,1" Style="{StaticResource MainFrame.TextBlock.02}"/>
                <TextBox Name="tbx_SearchPN" Margin="1,1,1,1" d:LayoutOverrides="Width" Style="{StaticResource MainFrame.TextBox}" Text="{Binding SearchCriteria.InwardID,Mode=TwoWay}" Width="200" cal:Message.Attach="[Event KeyUp] = [Action tbx_Search_KeyUpPN($source, $eventArgs)]" />

                <TextBlock HorizontalAlignment="Left" VerticalAlignment="Center" TextWrapping="Wrap" Text="{Binding T1664_G1_HDonCu, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Margin="11,1,5,1" Style="{StaticResource MainFrame.TextBlock.02}"/>
                <TextBox Name="tbx_Search" Margin="1,1,1,1" d:LayoutOverrides="Width" Style="{StaticResource MainFrame.TextBox}" Text="{Binding SearchCriteria.InvoiceNumber,Mode=TwoWay}" Width="200" cal:Message.Attach="[Event KeyUp] = [Action tbx_Search_KeyUp($source, $eventArgs)]" />

                <Button  Name="btnSearch" Content="{Binding G0981_G1_Tim, Source={StaticResource eHCMSResources}}" Margin="2,1,2,1" Style="{StaticResource MainFrame.Button}" Width="75"/>
            </StackPanel>
            <!--Thông tin Đơn Hàng-->
            <Border Margin="2" Grid.Row="2" Style="{StaticResource LightBlueBorderStyle}">
                <AxControls:AxGrid DataContext="{Binding CurrentInwardDrugMedDeptInvoice,Mode=TwoWay}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="120*"/>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="80*" />
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="80*"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="100*"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>

                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <TextBlock Text="{Binding G0591_G1_TTinDHg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="5" Style="{StaticResource MainFrame.TextBlock.00}" />
                    <StackPanel Orientation="Horizontal" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1">
                    <RadioButton VerticalContentAlignment="Center" Content="{Binding G1800_G1_TrongNuoc, Source={StaticResource eHCMSResources}}" Name="rdtTrongNuoc" IsChecked="{Binding IsTrongNuoc,Mode=TwoWay}" GroupName="rdtChooseType" Margin="2,2,2,2" Style="{StaticResource MainFrame.RadioButton}" cal:Message.Attach="[Event Checked] = [Action rdtTrongNuoc_Checked($source, $eventArgs)]"/>
                    <RadioButton VerticalContentAlignment="Center" Content="{Binding N0145_G1_NgoaiNuoc, Source={StaticResource eHCMSResources}}" Name="rdtNgoaiNuoc"  IsChecked="{Binding IsForeign,Mode=TwoWay}" GroupName="rdtChooseType" Margin="2,2,2,2" Style="{StaticResource MainFrame.RadioButton}" cal:Message.Attach="[Event Checked] = [Action rdtNgoaiNuoc_Checked($source, $eventArgs)]" />
                </StackPanel>
                    <TextBlock Grid.Row="2" HorizontalAlignment="Left" Margin="2,1" Text="{Binding S0647_G1_SoHD, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" Width="45"/>
                    <TextBox Grid.Row="2" Grid.Column="1"   Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"  Text="{Binding InvInvoiceNumber,Mode=TwoWay}" TabIndex="1" />

                    <TextBlock Grid.Row="3" Grid.Column="0" HorizontalAlignment="Left" Margin="2,1" Text="{Binding Z0003_G1_NgayHD, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <DatePicker Grid.Row="3" Grid.Column="1"   Margin="2,1"   Style="{StaticResource MainFrame.DatePicker}" SelectedDate="{Binding InvDateInvoice, Mode=TwoWay}" TabIndex="2"/>


                    <TextBlock Grid.Row="1" Grid.Column="2"  HorizontalAlignment="Left" Margin="2,1" Text="{Binding N0175_G1_NhaCC, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <AxControls:AxAutoComplete Name="AutoDrug_Text" Text="{Binding SupplierName}"  Grid.Row="1" Grid.Column="3" Grid.ColumnSpan="3" Margin="2,1,40,1" IsEnabled="{Binding ElementName=LayoutRoot,Path=DataContext.IsHideAuSupplier}" TabIndex="3"
                                           ValueMemberBinding="{Binding SupplierName,Mode=TwoWay}" 
                                           cal:Message.Attach="[Event Populating] = [Action AutoCompleteBox_Populating($source, $eventArgs)]
                                                      ;[Event DropDownClosed] = [Action AutoDrug_Text_DropDownClosed($source, $eventArgs)]"
                                           FilterMode="None" ItemsSource="{Binding ElementName=LayoutRoot,Path=DataContext.Suppliers}"
                                           Style="{StaticResource AxAutoCompleteMyStyle}"
                                               MinimumPopulateDelay="300" MinimumPrefixLength="0"
                                           ItemTemplate="{StaticResource AutoSupplierTemplate}" SelectedItem="{Binding SelectedSupplier,Mode=TwoWay}"></AxControls:AxAutoComplete>
                    <Button Name="btnSupplier" Content="..." Grid.Row="1" Grid.Column="3" Grid.ColumnSpan="3" Margin="2,1" Style="{StaticResource MainFrame.Button}" Width="35" HorizontalAlignment="Right" IsEnabled="{Binding ElementName=LayoutRoot,Path=DataContext.IsHideAuSupplier}"/>

                    <TextBlock Grid.Row="1" Grid.Column="6"  HorizontalAlignment="Left" Margin="2,1" Text="{Binding T2144_G1_Kho, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <AxControls:KeyEnabledComboBox Margin="1" Name="cbxKho" Style="{StaticResource MainFrame.ComboBox}" Grid.Column="7"  SelectedItemEx="{Binding SelectedStorage,Mode=TwoWay}" SelectedValuePath="StoreID"  DisplayMemberPath="swhlName" 
                                                   ItemsSource="{Binding ElementName=LayoutRoot,Path=DataContext.StoreCbx}" Grid.Row="1" TabIndex="7" IsTabStop="True" IsEnabled="{Binding ElementName=LayoutRoot,Path=DataContext.IsHideAuSupplier}"/>

                    <TextBlock Grid.Row="2" Grid.Column="6"  HorizontalAlignment="Left" Margin="2,1" Text="{Binding G1183_G1_Ghichu, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" TextWrapping="Wrap" Grid.RowSpan="2"/>
                    <TextBox Grid.Row="2" Grid.Column="7"  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}" AcceptsReturn="True" Grid.RowSpan="2" Text="{Binding Notes,Mode=TwoWay}" TabIndex="8" />

                    <TextBlock Grid.Row="2" Grid.Column="2"  HorizontalAlignment="Left" Margin="2,1" Text="{Binding G1272_G1_TinhBang, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <AxControls:KeyEnabledComboBox Name="cbxCurrency" Grid.Row="2" Grid.Column="3"  Margin="2,1" Style="{StaticResource MainFrame.ComboBox}" SelectedValuePath="CurrencyID" DisplayMemberPath="CurrencyName" ItemsSource="{Binding ElementName=LayoutRoot,Path=DataContext.Currencies}" 
                          SelectedItemEx="{Binding SelectedCurrency,Mode=TwoWay}" TabIndex="4" SelectionChanged="cbxCurrency_SelectionChanged"/>
                    <TextBlock Grid.Row="2" Grid.Column="4"  HorizontalAlignment="Left" Margin="2,1" Text="{Binding G2087_G1_TyGiaNT, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <TextBox Grid.Row="2" Grid.Column="5"  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" Text="{Binding ExchangeRates,TargetNullValue='1',Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True,Converter={StaticResource DecimalConverter}}" 
                              TabIndex="5" IsEnabled="{Binding IsInputExchangeRate}"/>
                    
                    <TextBlock Grid.Row="4" Grid.Column="0" HorizontalAlignment="Left" Margin="2,1" Text="{Binding N0094_G1_NgNhap, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <DatePicker Grid.Row="4" Grid.Column="1"   Margin="2,1"   Style="{StaticResource MainFrame.DatePicker}" SelectedDate="{Binding DSPTModifiedDate, Mode=TwoWay}" TabIndex="2"/>

                    <TextBlock Grid.Row="5" Grid.Column="0"  HorizontalAlignment="Left" Margin="2,1" Text="{Binding T3575_G1_MaPN, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <TextBox Grid.Row="5" Grid.Column="1"  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"  Text="{Binding InvID,Mode=TwoWay}" IsReadOnly="True"/>
                    <TextBlock Grid.Row="6" Grid.Column="0" HorizontalAlignment="Left" Margin="2,1" Text="{Binding S0688_G1_SoSerial, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center" Style="{StaticResource Title}" />
                    <TextBox Grid.Row="6" Grid.Column="1" Margin="2,1" VerticalContentAlignment="Center" Style="{StaticResource MainFrame.TextBox}" Text="{Binding SerialNumber, Mode=TwoWay}" IsReadOnly="False" />
                    <TextBlock Grid.Row="6" Grid.Column="2" HorizontalAlignment="Left" Margin="2,1" Text="{Binding Z2591_G1_MauHoaDon, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center" Style="{StaticResource Title}" />
                    <TextBox Grid.Row="6" Grid.Column="3" Margin="2,1" VerticalContentAlignment="Center" Style="{StaticResource MainFrame.TextBox}" Text="{Binding InvoiceForm, Mode=TwoWay}" IsReadOnly="False" />
                    <CheckBox Content="{Binding Z2166_G1_KiemTraCLGiaBan, Source={StaticResource eHCMSResources}}" Grid.Row="5" Grid.Column="2" Grid.ColumnSpan="2" Style="{StaticResource MainFrame.Checkbox}" Margin="2,1" VerticalAlignment="Center" VerticalContentAlignment="Center" IsChecked="{Binding IsCheckBuyingPrice, Mode=TwoWay}" IsEnabled="{Binding inviID, Mode=OneWay, Converter={StaticResource LongToNotBooleanConverter}}"></CheckBox>
                    <TextBlock Grid.Row="3" Grid.Column="2"  HorizontalAlignment="Left" Margin="2,1" Text="{Binding G0931_G1_TienThueNK, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <TextBox Grid.Row="3" Grid.Column="3"  Margin="2,1" Text="{Binding CustomTax,Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True,Converter={StaticResource DecimalConverter}}" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right"/>

                    <TextBlock Grid.Row="3" HorizontalAlignment="Left" Margin="2,1" Grid.Column="4" Text="{Binding G2179_G1_VATx, Source={StaticResource eHCMSResources}}" VerticalAlignment="Center" Style="{StaticResource Title}" />
                    <!--<AutoCompleteBox Text="{Binding VAT,Mode=TwoWay,Converter={StaticResource DecimalConverter}}" Grid.Row="3" Grid.Column="5"  Margin="2,1"    IsTextCompletionEnabled="False"  FilterMode="Contains"
                                           ValueMemberBinding="{Binding Value, Mode=OneWay}"
                                             ItemsSource="{Binding ElementName=LayoutRoot,Path=DataContext.ObjectVats}">
                            <AutoCompleteBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Value,Converter={StaticResource DecimalConverter}}"></TextBlock>
                                </DataTemplate>
                            </AutoCompleteBox.ItemTemplate>
                        </AutoCompleteBox>-->
                    <TextBox  Grid.Row="3" Grid.Column="5"  Margin="2,1" Text="{Binding VAT,Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True,Converter={StaticResource DecimalConverter}}" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right" IsEnabled="False"/>
                    <TextBlock Grid.Row="4" Grid.Column="2"  HorizontalAlignment="Left" Margin="2,1" Text="CK (1+x %) " VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <TextBox  Name="tbxPercent" Grid.Row="4" Grid.Column="3"   Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"   Text="{Binding DiscountingByPercent,Mode=TwoWay,Converter={StaticResource DecimalConverter}}" TextAlignment="Right" IsReadOnly="{Binding CanPercentIsEnable,Converter={StaticResource InverseBoolConverter}}"/>

                    <TextBlock Grid.Row="4" Grid.Column="4"  HorizontalAlignment="Left" Margin="2,1" Text="{Binding G0915_G1_TienCK, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <TextBox Name="tbxValue" Grid.Row="4" Grid.Column="5"   Margin="2,1,2,0"  Style="{StaticResource MainFrame.TextBox}"   Text="{Binding Discounting,Mode=TwoWay,Converter={StaticResource DecimalConverter}}" TextAlignment="Right" IsReadOnly="{Binding CanPercentIsEnable}" Height="24" VerticalAlignment="Center" />
                    <CheckBox Name="chkCK" Content="{Binding Z0312_G1_TinhTheoPhanTram, Source={StaticResource eHCMSResources}}" Grid.Row="4" Grid.Column="6" Grid.ColumnSpan="2" Style="{StaticResource MainFrame.Checkbox}" Margin="2,1" VerticalAlignment="Center" VerticalContentAlignment="Center" IsChecked="{Binding IsPercent,Mode=TwoWay}" />

                <StackPanel Grid.Row="5" Grid.Column="0" Grid.ColumnSpan="8" Orientation="Horizontal" HorizontalAlignment="Right">

                        <Button Name="btnNew" Content="{Binding P0373_G1_PhMoi, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.Button}" Width="75" Margin="2,1" 
                                Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mSapNhapHangKyGui_PhieuMoi,Converter={StaticResource BooleanToVisibility} ,Mode=OneWay}"/>

                        <Button  Name="btnAdd" Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.Button}" Width="75" Margin="2,1" IsEnabled="{Binding CanAdd}"
                                 Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mSapNhapHangKyGui_PhieuMoi,Converter={StaticResource BooleanToVisibility} }" TabIndex="9"/>
                        <Button  Name="btnEdit" Content="{Binding K1599_G1_CNhat, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.Button}" Width="75" Margin="2,1" IsEnabled="{Binding CanEditAndDelete}"
                                 Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mSapNhapHangKyGui_CapNhat,Converter={StaticResource BooleanToVisibility} }" TabIndex="10"/>
                        <Button Name="btnDeletePhieu" Content="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.Button}" Width="75" Margin="2,1" IsEnabled="{Binding CanEditAndDelete}"
                                Visibility="{Binding ElementName=LayoutRoot,Path=DataContext.mSapNhapHangKyGui_Xoa,Converter={StaticResource BooleanToVisibility} }" TabIndex="11"/>
                    </StackPanel>
                </AxControls:AxGrid>
            </Border>
            <Border Margin="2" Grid.Row="2" Grid.Column="1" Style="{StaticResource LightBlueBorderStyle}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0"  Margin="2,1" Text="{Binding Z0283_G1_TgTienChuaVAT, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"   Style="{StaticResource Title}" />
                    <TextBox  Grid.Column="1"  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"   Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalPriceNotVAT,Converter={StaticResource DecimalConverter}}" IsReadOnly="True" TextAlignment="Right"/>
                    <TextBlock  Grid.Row="1" Grid.Column="0"  Margin="2,1" Text="{Binding G1468_G1_TgCK, Source={StaticResource eHCMSResources}}"   Style="{StaticResource Title}" />
                    <TextBox Grid.Row="1" Grid.Column="1"  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"   Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalDiscountInvoice,Converter={StaticResource DecimalConverter}}" IsReadOnly="True"  TextAlignment="Right"/>
                    <TextBlock Grid.Row="2" Grid.Column="0"  Margin="2,1" Text="{Binding G1472_G1_TCong, Source={StaticResource eHCMSResources}}"   Style="{StaticResource Title}" />
                    <TextBox  Grid.Row="2" Grid.Column="1" Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"   Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalPrice,Converter={StaticResource DecimalConverter}}" IsReadOnly="True"  TextAlignment="Right"/>
                    <TextBlock Grid.Row="3" Grid.Column="0"  Margin="2,1" Text="{Binding Z0280_G1_TgCongCoThueNK, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"   Style="{StaticResource Title}" />
                    <TextBox Grid.Row="3" Grid.Column="1"  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"   Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalHaveCustomTax,Converter={StaticResource DecimalConverter}}" IsReadOnly="True"  TextAlignment="Right"/>
                    <TextBlock Grid.Row="4" Grid.Column="0"  Margin="2,1" Text="{Binding Z0281_G1_TgCongCoVAT, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"   Style="{StaticResource Title}" />
                    <TextBox Grid.Row="4" Grid.Column="1"  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"   Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalPriceVAT,Converter={StaticResource DecimalConverter}}" IsReadOnly="True"  TextAlignment="Right"/>
                    <TextBlock Grid.Row="5" Grid.Column="0" Margin="2,1" Text="{Binding G1506_G1_TCongTTe, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"   Style="{StaticResource Title}" />
                    <TextBox  Grid.Row="5" Grid.Column="1" Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"   Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalPriceActual,Mode=TwoWay,Converter={StaticResource DecimalConverter}}"  TextAlignment="Right"  cal:Message.Attach="[Event KeyUp] = [Action Actual_KeyUp($source, $eventArgs)]" />
                    <TextBlock Grid.Row="6" Grid.Column="0"  Margin="2,1" Text="{Binding S0539_G1_SaiSo, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"   Style="{StaticResource Title}" />
                    <TextBox Grid.Row="6" Grid.Column="1"  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"   Text="{Binding CurrentInwardDrugMedDeptInvoice.SaiSo,Converter={StaticResource DecimalConverter}}" IsReadOnly="True"  TextAlignment="Right"/>

                    <TextBlock Grid.Row="0" Grid.Column="2"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.SelectedCurrency.CurrencyName}"   Style="{StaticResource Title}" />
                    <TextBlock Grid.Row="1" Grid.Column="2"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.SelectedCurrency.CurrencyName}"  Style="{StaticResource Title}" />
                    <TextBlock Grid.Row="2" Grid.Column="2"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.SelectedCurrency.CurrencyName}"  Style="{StaticResource Title}" />
                    <TextBlock Grid.Row="3" Grid.Column="2"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.SelectedCurrency.CurrencyName}"  Style="{StaticResource Title}" />
                    <TextBlock Grid.Row="4" Grid.Column="2"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.SelectedCurrency.CurrencyName}"  Style="{StaticResource Title}" />
                    <TextBlock Grid.Row="5" Grid.Column="2"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.SelectedCurrency.CurrencyName}"  Style="{StaticResource Title}" />
                    <TextBlock Grid.Row="6" Grid.Column="2"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.SelectedCurrency.CurrencyName}"  Style="{StaticResource Title}" />
                </Grid>
            </Border>
            <Border Margin="2" Grid.Row="2" Grid.Column="2" Style="{StaticResource LightBlueBorderStyle}" Visibility="{Binding CurrentInwardDrugMedDeptInvoice.IsInputExchangeRate,Converter={StaticResource VisibilityConverter}}">
                <Grid Grid.Column="1" >
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <TextBox Grid.Row="0" Grid.Column="1"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalPriceNotVAT_QĐ, Mode=OneWay, Converter={StaticResource DecimalConverter2}}" Style="{StaticResource MainFrame.TextBox}" IsReadOnly="True" TextAlignment="Right"/>
                <TextBox Grid.Row="1" Grid.Column="1"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalDiscountInvoice_QĐ, Mode=OneWay, Converter={StaticResource DecimalConverter2}}" Style="{StaticResource MainFrame.TextBox}" IsReadOnly="True" TextAlignment="Right"/>
                <TextBox  Grid.Row="2" Grid.Column="1" Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalPrice_QĐ, Mode=OneWay, Converter={StaticResource DecimalConverter2}}" Style="{StaticResource MainFrame.TextBox}" IsReadOnly="True" TextAlignment="Right"/>
                <TextBox Grid.Row="3" Grid.Column="1"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalHaveCustomTax_QĐ, Mode=OneWay, Converter={StaticResource DecimalConverter2}}" Style="{StaticResource MainFrame.TextBox}" IsReadOnly="True" TextAlignment="Right"/>
                <TextBox Grid.Row="4" Grid.Column="1"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalPriceVAT_QĐ, Mode=OneWay, Converter={StaticResource DecimalConverter2}}" Style="{StaticResource MainFrame.TextBox}" IsReadOnly="True" TextAlignment="Right"/>
                    <TextBox  Grid.Row="5" Grid.Column="1" Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.TotalPriceActual_QĐ,Mode=TwoWay,Converter={StaticResource DecimalConverter2}}" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right"   cal:Message.Attach="[Event KeyUp] = [Action ActualQD_KeyUp($source, $eventArgs)]" />
                <TextBox Grid.Row="6" Grid.Column="1"  Margin="2,1" Text="{Binding CurrentInwardDrugMedDeptInvoice.SaiSo_QĐ, Mode=OneWay, Converter={StaticResource DecimalConverter2}}" Style="{StaticResource MainFrame.TextBox}" IsReadOnly="True" TextAlignment="Right"/>
                    <TextBlock Grid.Row="0" Grid.Column="2"  Margin="2,1" Text="{Binding G1616_G1_VND, StringFormat='{} {0}', Source={StaticResource eHCMSResources}}"   />
                    <TextBlock Grid.Row="1" Grid.Column="2"  Margin="2,1" Text="{Binding G1616_G1_VND, StringFormat='{} {0}', Source={StaticResource eHCMSResources}}"   />
                    <TextBlock Grid.Row="2" Grid.Column="2"  Margin="2,1" Text="{Binding G1616_G1_VND, StringFormat='{} {0}', Source={StaticResource eHCMSResources}}"   />
                    <TextBlock Grid.Row="3" Grid.Column="2"  Margin="2,1" Text="{Binding G1616_G1_VND, StringFormat='{} {0}', Source={StaticResource eHCMSResources}}"   />
                    <TextBlock Grid.Row="4" Grid.Column="2"  Margin="2,1" Text="{Binding G1616_G1_VND, StringFormat='{} {0}', Source={StaticResource eHCMSResources}}"   />
                    <TextBlock Grid.Row="5" Grid.Column="2"  Margin="2,1" Text="{Binding G1616_G1_VND, StringFormat='{} {0}', Source={StaticResource eHCMSResources}}"   />
                    <TextBlock Grid.Row="6" Grid.Column="2"  Margin="2,1" Text="{Binding G1616_G1_VND, StringFormat='{} {0}', Source={StaticResource eHCMSResources}}"   />
                </Grid>
            </Border>


            <!--chọn pnhập tạm-->
            <Grid Grid.Row="3" Grid.ColumnSpan="3" Margin="2,1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="27"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                    </Grid.RowDefinitions>

                    <Label Grid.Row="0" Content="{Binding K1938_G1_ChonDeXapNhap, Source={StaticResource eHCMSResources}}" FontWeight="Bold"></Label>

                    <Grid Grid.Row="1">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="150"></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="22*"></RowDefinition>
                            <RowDefinition Height="104*"></RowDefinition>
                            <RowDefinition Height="Auto"></RowDefinition>
                        </Grid.RowDefinitions>

                        <TextBlock HorizontalAlignment="Right" Margin="2,1" Text="{Binding T3448_G1_MaPhDatHg, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                        <ComboBox Grid.Column="1"   Margin="2,1" x:Name="cbxChonDH" Style="{StaticResource MainFrame.ComboBox}" ItemsSource="{Binding DrugDeptPurchaseOrderList}" SelectedValuePath="PharmacyPoID" DisplayMemberPath="PONumber"  
                                      cal:Message.Attach="[Event Loaded] = [Action cbxChonDH_Loaded($source, $eventArgs)]"  IsEnabled="{Binding IsEnabled}"/>

                        <Button Name="btnFilter" Content="{Binding K1916_G1_Chon, Source={StaticResource eHCMSResources}}" Margin="2,1" Grid.Column="2" Style="{StaticResource MainFrame.Button}" Width="75" VerticalAlignment="Center" HorizontalAlignment="Left"/>


                        <CheckBox Name="ckbCKHangNhap" Content="{Binding K1858_G1_ChKhauTungThuocTinhTheo, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.Checkbox}" Margin="2,1" Grid.Column="3" Grid.ColumnSpan="3" VerticalAlignment="Center" VerticalContentAlignment="Center"
                                      cal:Message.Attach="[Event Checked] = [Action ckbCKHangNhap_Checked($source, $eventArgs)];[Event Unchecked] = [Action ckbCKHangNhap_Unchecked($source, $eventArgs)]"
                                      IsChecked="{Binding IsPercentInwardDrug,Mode=TwoWay}"></CheckBox>

                        <!---->
                      
                        <!--ItemsSource="{Binding ObjPNTemp_BySupplierIDList_Virtual}"--> 
                    <AxControls:AxDataGridNy x:Name="GridSuppliers"  AutoGenerateColumns="False" IsReadOnly="False"
                                                 CanUserSortColumns="False" HeadersVisibility="All" 
                                                 EnableColumnVirtualization="True" CanUserAddRows="False" 
                                                 RowHeaderStyle="{StaticResource MainFrame.DataGridRowHeaderStyle}"
                                                 Grid.Column="0" Grid.ColumnSpan="4" Grid.Row="1"  
                                                 SelectionMode="Single" SelectionUnit="FullRow" 
                                                 SelectedItem="{Binding PNTemp_BySupplierIDSelected,Mode=TwoWay}"
                                                 ItemsSource="{Binding CV_ObjPNTemp_BySupplierIDList}" 
                                                 MaxHeight="600"  Margin="2" HorizontalScrollBarVisibility="Auto" 
                                                 VerticalScrollBarVisibility="Auto" 
                                                 FrozenColumnCount="{Binding CDC,Mode=TwoWay}"
                                                 Style="{StaticResource MainFrame.DataGridStyle.OneColor}"
                                                 ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle.01}" 
                                                 cal:Message.Attach="[Event CellEditEnding] = [Action grdRequestDetails_CellEditEnding($source, $eventArgs)]
                                                         ;[Event Loaded] = [Action GridSuppliers_Loaded($source, $eventArgs)]
                                                         ;[Event PreparingCellForEdit] = [Action grdRequestDetails_PreparingCellForEdit($source, $eventArgs)]
                                                         ;[Event LoadingRow] = [Action GridOutwardDrug_LoadingRow($source, $eventArgs)]">
                            <!--<DataGrid.RowGroupHeaderStyles>
                                --><!-- Style for groups at top level --><!--
                                <Style TargetType="DataGridRowGroupHeader">
                                    <Setter Property="PropertyNameVisibility" Value="Collapsed" />
                                    <Setter Property="Background" Value="#FFC7C7D1" />
                                    <Setter Property="Foreground" Value="#FF444D58" />
                                    <Setter Property="FontWeight" Value="Bold" />
                                    <Setter Property="Height" Value="25"/>
                                    <Setter Property="SublevelIndent" Value="0" />
                                </Style>
                                --><!-- Style for groups under the top level --><!--
                                <Style TargetType="DataGridRowGroupHeader">
                                    <Setter Property="Background" Value="#FFA8B5BE" />
                                </Style>
                            </DataGrid.RowGroupHeaderStyles>-->
                            <DataGrid.Columns>

                                <DataGridTemplateColumn Width="Auto" >
                                    <DataGridTemplateColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <CheckBox IsThreeState="False" IsChecked="{Binding ElementName=LayoutRoot, Path= DataContext.OutwardAllChecked, Mode=TwoWay}" ToolTipService.ToolTip="{Binding K2122_G1_ChonTatCa, Source={StaticResource eHCMSResources}}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.HeaderTemplate>
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <CheckBox IsChecked="{Binding IsCheckedForDel, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>

                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Header="" CellTemplate="{StaticResource CollnkDelete}" Width="40"/>

                            <DataGridTemplateColumn Header="" CellTemplate="{StaticResource CollnkRefGenMedProductDetail}" Width="25"/>

                            <DataGridTextColumn Header="{Binding P0367_G1_PhDH, Source={StaticResource eHCMSResources}}" Width="80" Binding="{Binding PONumber}" IsReadOnly="True"/>

                            <DataGridTextColumn Header="{Binding T1794_G1_ID, Source={StaticResource eHCMSResources}}" Width="60" Binding="{Binding InID}" Visibility="Collapsed" IsReadOnly="True"/>

                            <DataGridTextColumn Header="{Binding K2569_G1_Code, Source={StaticResource eHCMSResources}}" Binding="{Binding RefGenMedProductDetails.Code}" IsReadOnly="True"/>

                            <DataGridTextColumn Header="{Binding T0854_G1_TenHg, Source={StaticResource eHCMSResources}}" Binding="{Binding RefGenMedProductDetails.BrandName}" IsReadOnly="True" MinWidth="150" ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"/>

                            <DataGridCheckBoxColumn Header="{Binding M0025_G1_MuaTheoQuyCach, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Binding="{Binding IsUnitPackage,TargetNullValue=False,Mode=TwoWay}" Width="75"/>

                            <DataGridTextColumn Header="{Binding K3954_G1_DViLe, Source={StaticResource eHCMSResources}}"  AxControls:DataGridColNamingUtil.ColName="col04" 
                                                 Binding="{Binding  RefGenMedProductDetails.SelectedUnit.UnitName}"
                                                  CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True" Width="65"/>

                            <DataGridTextColumn Header="{Binding Q0487_G1_QuyCach, Source={StaticResource eHCMSResources}}"  AxControls:DataGridColNamingUtil.ColName="col05"
                                                 Binding="{Binding  RefGenMedProductDetails.Packaging}"
                                                  CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True" Width="Auto"/>

                            <DataGridTextColumn Header="{Binding S0605_G1_SLgQuyCach, Source={StaticResource eHCMSResources}}"  AxControls:DataGridColNamingUtil.ColName="col06" 
                                                 Binding="{Binding  RefGenMedProductDetails.UnitPackaging}"
                                                  CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True" Width="50"/>

                            <DataGridTemplateColumn Header="{Binding N0109_G1_NgSX, Source={StaticResource eHCMSResources}}" CellEditingTemplate="{StaticResource InProductionDateCellEditTemplate}" CellTemplate="{StaticResource InProductionDateCellTemplate}" Width="100"/>

                            <DataGridTemplateColumn Header="{Binding S0655_G1_SoLo, Source={StaticResource eHCMSResources}}" CellEditingTemplate="{StaticResource InBatchNumberPriceCellEditTemplate}" CellTemplate="{StaticResource InBatchNumberPriceCellTemplate}" Width="70"/>

                            <DataGridTemplateColumn Header="{Binding T1363_G1_HDung, Source={StaticResource eHCMSResources}}" CellEditingTemplate="{StaticResource InExpiryDateCellEditTemplate}" CellTemplate="{StaticResource InExpiryDateCellTemplate}" Width="100"/>

                            <!--<DataGridTextColumn x:Name="col03"
                                                 Binding="{Binding PoUnitQty,Converter={StaticResource DecimalConverter}}"
                                                 Header="{Binding S0617_G1_SLgDH, Source={StaticResource eHCMSResources}}" CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True" Width="65">
                                    </DataGridTextColumn>
                                    <DataGridTextColumn x:Name="ColMed02"
                                                 Binding="{Binding InQty,Converter={StaticResource DecimalConverter}}"
                                                  CellStyle="{StaticResource CellStyleReadOnly}"  IsReadOnly="True" Width="75">
                                    <DataGridTextColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource MainFrame.DataGridColumnHeaderStyle}">
                                    <Setter Property="ContentTemplate">
                                    <Setter.Value>
                                    <DataTemplate>
                                    <TextBlock Text="{Binding S0591_G1_SLgDaNhap, Source={StaticResource eHCMSResources}}" />
                                    </DataTemplate>
                                    </Setter.Value>
                                    </Setter>
                                    </Style>
                                    </DataGridTextColumn.HeaderStyle>
                                    </DataGridTextColumn>-->
                            <DataGridTemplateColumn Header="{Binding S0595_G1_SLgDongGoi, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colPackagingQty"   CellEditingTemplate="{StaticResource QtyPackagingCellEditTemplate}" CellTemplate="{StaticResource QtyPackagingCellTemplate}" Width="70"/>

                            <DataGridTemplateColumn Header="{Binding S0600_G1_SLgLe, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colQty"  CellEditingTemplate="{StaticResource QtyCellEditTemplate}" CellTemplate="{StaticResource QtyCellTemplate}" Width="60"/>

                            <DataGridTemplateColumn Header="{Binding T2764_G1_LoaiHg, Source={StaticResource eHCMSResources}}" CellEditingTemplate="{StaticResource DonatedCellEditTemplate}" CellTemplate="{StaticResource DonatedCellTemplate}"  Width="85"/>

                            <DataGridTemplateColumn AxControls:DataGridColNamingUtil.ColName="colPackagePrice" Header="Đơn giá Đóng Gói" CellEditingTemplate="{StaticResource PackagePriceCellEditTemplate}" CellTemplate="{StaticResource PackagePriceCellTemplate}" Width="70" />
                            <DataGridTemplateColumn AxControls:DataGridColNamingUtil.ColName="colUnitPrice" Header="Đơn giá lẻ" CellEditingTemplate="{StaticResource UnitPriceCellEditTemplate}" CellTemplate="{StaticResource UnitPriceCellTemplate}" Width="70" />
                            <DataGridTemplateColumn Header="{Binding Z0004_G1_TTienChuaVAT, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colTotalNotVAT" CellEditingTemplate="{StaticResource TotalNotVATCellEditTemplate}" CellTemplate="{StaticResource TotalNotVATCellTemplate}" Width="85"/>

                            <DataGridTemplateColumn Header="CK(1+x %)" CellTemplate="{StaticResource DiscountByPercentCellTemplate}" CellEditingTemplate="{StaticResource DiscountByPercentCellEditTemplate}" Width="85" IsReadOnly="True" CellStyle="{StaticResource CellStyleReadOnlyRight}"/>
                            <DataGridTemplateColumn Header="{Binding G0915_G1_TienCK, Source={StaticResource eHCMSResources}}" CellTemplate="{StaticResource DiscountingCellTemplate}"  CellEditingTemplate="{StaticResource DiscountingCellEditTemplate}" Width="65"/>

                            <DataGridTemplateColumn Header="{Binding T0875_G1_GiaBanDV, Source={StaticResource eHCMSResources}}" CellEditingTemplate="{StaticResource NormalPriceCellEditTemplate}" CellTemplate="{StaticResource NormalPriceCellTemplate}" Width="70" IsReadOnly="True"/>

                            <DataGridTemplateColumn Header="{Binding T0964_G1_GiaChoBNBH, Source={StaticResource eHCMSResources}}" CellEditingTemplate="{StaticResource HIPatientPriceCellEditTemplate}" CellTemplate="{StaticResource HIPatientPriceCellTemplate}" Width="70" IsReadOnly="True"/>

                            <DataGridTemplateColumn Header="{Binding T0909_G1_GiaBHQDinh, Source={StaticResource eHCMSResources}}" CellEditingTemplate="{StaticResource HIPriceCellEditTemplate}" CellTemplate="{StaticResource HIPriceCellTemplate}" Width="70" IsReadOnly="True"/>

                            <DataGridTextColumn Header="{Binding G2156_G1_VAT, Source={StaticResource eHCMSResources}}" Binding="{Binding VAT, Mode=TwoWay}" ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" IsReadOnly="True"/>

                        </DataGrid.Columns>
                        <DataGrid.GroupStyle>
                            <GroupStyle>
                                <GroupStyle.ContainerStyle>
                                    <Style TargetType="{x:Type GroupItem}">
                                        <Setter Property="Margin" Value="1,1,1,1" />
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="{x:Type GroupItem}">
                                                    <Expander IsExpanded="True" Background="WhiteSmoke"  BorderBrush="#FF002255" Foreground="DarkBlue"  BorderThickness="1,1,1,5">
                                                        <Expander.Header>
                                                            <DockPanel>
                                                                <TextBlock FontWeight="Bold" Foreground="DarkBlue" Text="{Binding Path=Name}" Margin="25,0,0,0" Width="200" />
                                                            </DockPanel>
                                                        </Expander.Header>
                                                        <Expander.Content>
                                                            <ItemsPresenter />
                                                        </Expander.Content>
                                                    </Expander>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </GroupStyle.ContainerStyle>
                            </GroupStyle>
                        </DataGrid.GroupStyle>
                    </AxControls:AxDataGridNy>
                        <StackPanel Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" >
                            <TextBlock  Margin="2,1" Text="{Binding K2556_G1_CoDinhCot, Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                            <TextBox  Margin="2,1"  Style="{StaticResource MainFrame.TextBox}"  Text="{Binding CDC,Mode=TwoWay}" Width="40" HorizontalAlignment="Left"/>
                            <Button Name="btnDeleteSelOutItem" Content="{Binding G2806_G1_XoaNhieuDong, Source={StaticResource eHCMSResources}}" Margin="20,1,30,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" 
                        Visibility="{Binding mPhieuYeuCau_Xoa, Converter={StaticResource BooleanToVisibility} }" IsEnabled="{Binding RequestDrug.CanDelete}"/>

                        </StackPanel>

                        <StackPanel Grid.Row="2" Grid.Column="2" Grid.ColumnSpan="12" Orientation="Horizontal" HorizontalAlignment="Right">
                            <Button Name="btnDeleteItemNotInOrder" Content="{Binding G2795_G1_XoaHgKhongCoPhDh, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.Button}" Width="190" Margin="2,1" />

                            <Button Name="btnNhapHang" Content="{Binding N0205_G1_NhapHg, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.Button}" Width="75" Margin="2,1" IsEnabled="{Binding CurrentInwardDrugMedDeptInvoice.inviID,Mode=OneWay,Converter={StaticResource IsEnableConverter}}" 
                                        Visibility="{Binding mSapNhapHangKyGui_PhieuMoi,Converter={StaticResource BooleanToVisibility} }"/>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Grid>
            <!--chọn pnhập tạm-->
            
            <Grid Grid.Row="4" Grid.ColumnSpan="3" Margin="2,1" HorizontalAlignment="Right">                
                <StackPanel>
                
                </StackPanel>
            </Grid>


            <Border Grid.Row="5" Style="{StaticResource LightBlueBorderStyle}" Grid.ColumnSpan="3" Margin="2,1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <TextBlock Text="{Binding G0564_G1_TTinCTietDHg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="5" Style="{StaticResource MainFrame.TextBlock.00}" />

                    <DataGrid x:Name="GridInwardDrug" HeadersVisibility="All" AutoGenerateColumns="False" Grid.Column="0" Grid.Row="2"
                                      ItemsSource="{Binding InwardDrugMedDeptList}"   Margin="2" MaxHeight="600" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" 
                                      ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyleWrap}" 
                                      IsReadOnly="True"  Style="{StaticResource MainFrame.DataGridStyle}" 
                                      SelectedItem="{Binding CurrentInwardDrugMedDept,Mode=TwoWay}"
                                      cal:Message.Attach="[Event Loaded] = [Action GridInwardDrug_Loaded($source, $eventArgs)]
                                      ;[Event LoadingRow] = [Action GridInwardDrug_LoadingRow($source, $eventArgs)]">

                        <DataGrid.Columns>

                            <!--<DataGridTemplateColumn Width="Auto" >
                                <DataGridTemplateColumn.HeaderStyle>
                                    <Style TargetType="DataGridColumnHeader" BasedOn="{StaticResource MainFrame.DataGridColumnHeaderStyle}">
                                        <Setter Property="ContentTemplate">
                                            <Setter.Value>
                                                <DataTemplate>
                                                    <CheckBox IsThreeState="False" Margin="2,0,-13,0" IsChecked="{Binding ElementName=LayoutRoot, Path= DataContext.InwardAllChecked, Mode=TwoWay}" ToolTipService.ToolTip="{Binding K2122_G1_ChonTatCa, Source={StaticResource eHCMSResources}}"/>
                                                </DataTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </DataGridTemplateColumn.HeaderStyle>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsCheckedForDel, Mode=TwoWay}" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>

                            </DataGridTemplateColumn>-->
                            
                            <DataGridTemplateColumn CellTemplate="{StaticResource CollnkDeleteMain}" Header="" Width="25" IsReadOnly="True"/>
                            <DataGridTemplateColumn CellTemplate="{StaticResource CollnkRefGenMedProductDetail_Inward}" Header="" Width="25" IsReadOnly="True"/>
                        <DataGridTextColumn Header="{Binding T3455_G1_MaPhDH, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colMaPhieuDH"  Binding="{Binding PONumber}"  ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}" Width="80" IsReadOnly="True"/>

                        <DataGridTextColumn Header="{Binding K2569_G1_Code, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colDrugID"    Binding="{Binding RefGenMedProductDetails.Code}" ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" Width="60" IsReadOnly="True"/>

                        <DataGridTextColumn Header="{Binding T0854_G1_TenHg, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colMiddleName"   Binding="{Binding RefGenMedProductDetails.BrandName}" ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}" MinWidth="150" IsReadOnly="True"/>

                        <DataGridCheckBoxColumn Header="{Binding M0025_G1_MuaTheoQuyCach, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Binding="{Binding IsUnitPackage,TargetNullValue=False,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Width="75"/>

                        <DataGridTextColumn Header="{Binding K3966_G1_Dvt, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colCityStateZipCode"  Binding="{Binding RefGenMedProductDetails.SelectedUnit.UnitName}"   ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" Width="65" IsReadOnly="True"/>

                            <DataGridTextColumn Header="{Binding Q0487_G1_QuyCach, Source={StaticResource eHCMSResources}}" Binding="{Binding  RefGenMedProductDetails.Packaging}"
                                                  ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" IsReadOnly="True"/>

                            <DataGridTextColumn Header="{Binding S0605_G1_SLgQuyCach, Source={StaticResource eHCMSResources}}" Binding="{Binding  RefGenMedProductDetails.UnitPackaging}"  Width="50" ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" IsReadOnly="True"/>

                        <DataGridTextColumn Header="{Binding N0109_G1_NgSX, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colPAHEmailAddress"  Binding="{Binding InProductionDate,StringFormat='dd/MM/yyy', UpdateSourceTrigger=PropertyChanged}"   ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" Width="90" IsReadOnly="True"/>

                        <DataGridTextColumn Header="{Binding T2628_G1_LoSX, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colWebSiteAddress"  Binding="{Binding InBatchNumber, UpdateSourceTrigger=PropertyChanged}"  ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" Width="75" IsReadOnly="True"/>

                        <DataGridTextColumn Header="{Binding T1363_G1_HDung, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colFaxNumber"  Binding="{Binding InExpiryDate,StringFormat='dd/MM/yyyy', UpdateSourceTrigger=PropertyChanged}"   ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" Width="90" IsReadOnly="True"/>

                        <DataGridTextColumn Header="{Binding S0595_G1_SLgDongGoi, Source={StaticResource eHCMSResources}}" Binding="{Binding PackageQuantity, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverter}}" ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" Width="65" IsReadOnly="True"/>

                            <DataGridTextColumn Header="{Binding S0600_G1_SLgLe, Source={StaticResource eHCMSResources}}" Binding="{Binding InQuantity, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverter}}" ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" Width="65" IsReadOnly="True"/>

                        <DataGridTextColumn Header="{Binding T2764_G1_LoaiHg, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colLoaiHang"    Binding="{Binding GoodsTypeName}" ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" Width="75" IsReadOnly="True"/>

                        <DataGridTextColumn Header="{Binding T1135_G1_GiaMua, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colSupplierDescription" Binding="{Binding InBuyingPrice, UpdateSourceTrigger=PropertyChanged,Converter={StaticResource DecimalConverter}}"   ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}" Width="75" IsReadOnly="True"/>

                        <DataGridTextColumn Header="{Binding Z0004_G1_TTienChuaVAT, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colTelephoneNumber"   Binding="{Binding TotalPriceNotVAT,Converter={StaticResource DecimalConverter}}"   IsReadOnly="True" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}" Width="85"/>

                        <DataGridTextColumn AxControls:DataGridColNamingUtil.ColName="colTele02"   Binding="{Binding DiscountingByPercent,Converter={StaticResource DecimalConverter}}"  Header="CK(1+x %) " IsReadOnly="True" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}" Width="85"></DataGridTextColumn>
                        <DataGridTextColumn Header="{Binding G0915_G1_TienCK, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colTele03"   Binding="{Binding Discounting,Converter={StaticResource DecimalConverter}}"   IsReadOnly="True" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}" Width="70"/>

                        <DataGridTextColumn Header="{Binding T1160_G1_GVon, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colTele04"  Binding="{Binding InBuyingPriceActual,Converter={StaticResource DecimalConverterRound}}"   IsReadOnly="True" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}" Width="70"/>

                        <DataGridTextColumn Header="{Binding T0875_G1_GiaBanDV, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}" Binding="{Binding NormalPrice,Converter={StaticResource DecimalConverterRound}}" IsReadOnly="True" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"/>

                        <DataGridTextColumn Header="{Binding T0964_G1_GiaChoBNBH, Source={StaticResource eHCMSResources}}" Binding="{Binding HIPatientPrice,Converter={StaticResource DecimalConverterRound}}" IsReadOnly="True" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"/>

                        <DataGridTextColumn Header="{Binding T0909_G1_GiaBHQDinh, Source={StaticResource eHCMSResources}}" Binding="{Binding HIAllowedPrice,Converter={StaticResource DecimalConverterRound}}" IsReadOnly="True" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"/>

                        <DataGridTextColumn Header="{Binding G2156_G1_VAT, Source={StaticResource eHCMSResources}}" Binding="{Binding VAT, Mode=TwoWay}" ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}" IsReadOnly="True"/>

                    </DataGrid.Columns>
                    </DataGrid>
                    <AxControls:DataPager Grid.Row="3"  Margin="0,0,0,0" Name="dataPager1" Source="{Binding InwardDrugMedDeptList}"/>

                </Grid>
            </Border>


            <Grid Grid.Row="6" Grid.ColumnSpan="3" Margin="2,1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                </Grid.ColumnDefinitions>

                <!--<Button Name="btnDeleteSelInItem" Content="{Binding G2806_G1_XoaNhieuDong, Source={StaticResource eHCMSResources}}" Grid.Column="0" Margin="20,1,0,1" Style="{StaticResource MainFrame.Button}" MinWidth="75" 
                        Height="25" Visibility="{Binding mPhieuYeuCau_Xoa, Converter={StaticResource BooleanToVisibility} }" IsEnabled="{Binding RequestDrug.CanDelete}"/>-->

                <DataGrid Grid.Column="1" HeadersVisibility="All" AutoGenerateColumns="False"  HorizontalAlignment="Center" ItemsSource="{Binding CurrentInwardDrugMedDeptInvoice.CostTableMedDeptLists}"
                              IsReadOnly="True" ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle}"  Style="{StaticResource MainFrame.DataGridStyle}" cal:Message.Attach="[Event LoadingRow] = [Action GridListCost_LoadingRow($source, $eventArgs)]">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="{Binding T0892_G1_TenPhi, Source={StaticResource eHCMSResources}}"  Binding="{Binding CoListName}" ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"/>
                    <DataGridTextColumn Header="{Binding P0352_G1_PhanTram, Source={StaticResource eHCMSResources}}"  Binding="{Binding Rates,Converter={StaticResource DecimalConverter}}" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}" />
                    <DataGridTextColumn Header="Trị Giá (VNĐ)" Binding="{Binding TotalValueDaDoi,Converter={StaticResource DecimalConverter}}" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}" />
                    <DataGridTextColumn Header="Tổng Tiền PB(VNĐ)" Binding="{Binding TotalPrice,Converter={StaticResource DecimalConverter}}" ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}" />
                    <DataGridTextColumn Header="{Binding G1183_G1_Ghichu, Source={StaticResource eHCMSResources}}"  Binding="{Binding CoListNotes}" ElementStyle="{StaticResource MainFrame.TextBlockLeftAlign}"/>
                   
                </DataGrid.Columns>
                        
                    </DataGrid>
                
                <StackPanel Margin="2,2" Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="2" VerticalAlignment="Bottom">
                    <TextBlock Grid.Column="0"  Margin="2,1" Text="{Binding G1525_G1_TgPhanTram, StringFormat='{}{0} :', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                    <TextBlock Grid.Column="0"  Margin="2,1" Text="{Binding TotalPercent,Converter={StaticResource DecimalConverter}}" VerticalAlignment="Center"  Style="{StaticResource Title}" />
                </StackPanel>
                <StackPanel Margin="2,2" Orientation="Vertical" HorizontalAlignment="Right" Grid.Column="3" VerticalAlignment="Bottom">
                    <Button Name="btnPreview" Content="{Binding G2521_G1_XemIn, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.Button}" Width="75" Margin="2,1" IsEnabled="{Binding CurrentInwardDrugMedDeptInvoice.CanPrint}"
                                    Visibility="{Binding mSapNhapHangKyGui_XemIn,Converter={StaticResource BooleanToVisibility} }"/>
                    <Button Name="btnPrint" Content="{Binding T1820_G1_In, Source={StaticResource eHCMSResources}}" Style="{StaticResource MainFrame.Button}" Width="75" Margin="2,1" IsEnabled="{Binding CurrentInwardDrugMedDeptInvoice.CanPrint}"
                                    Visibility="{Binding mSapNhapHangKyGui_In,Converter={StaticResource BooleanToVisibility} }"/>
                </StackPanel>
            </Grid>
        </Grid>
    <!--</toolkit:BusyIndicator>-->
</UserControl>