<UserControl
    x:Class="aEMR.Registration.Views.OutPatientSettlementView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Resources="clr-namespace:eHCMSLanguage;assembly=aEMRLanguage"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:commonconverters="clr-namespace:aEMR.Common.Converters;assembly=aEMR.Common"
    xmlns:converters="clr-namespace:aEMR.Common.Converters;assembly=aEMR.Common"
    xmlns:customcontrols="clr-namespace:aEMR.Controls;assembly=aEMR.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="900"
    d:DesignWidth="900"
    Loaded="UserControl_Loaded"
    mc:Ignorable="d">

    <UserControl.Resources>
        <converters:StringFormatConverter x:Key="StringFormatConverter" />
        <converters:DecimalConverter2 x:Key="DecimalConverter2" />
        <Resources:eHCMSResources x:Key="eHCMSResources" />
        <commonconverters:EnumConverter x:Key="EnumConverterObj" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
        <DataTemplate x:Key="PrintSettlementTemplate">
            <StackPanel HorizontalAlignment="Stretch" Orientation="Horizontal">
                <Button
                    x:Name="lnkPrintSettlement"
                    Margin="2,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    cal:Message.Attach="[Event Click]=[Action PrintSettlementCmd($datacontext, $eventArgs)]"
                    ToolTipService.ToolTip="{Binding T1936_G1_InQToanL, Source={StaticResource eHCMSResources}}">
                    <Button.Content>
                        <Image
                            Width="13"
                            Height="13"
                            Opacity="1"
                            Source="/aEMR.CommonViews;component/Assets/Images/print-icon.png" />
                    </Button.Content>
                </Button>
                <Button
                    Margin="0,0,2,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    cal:Message.Attach="[Event Click]=[Action DeleteSettlementCmd($datacontext, $eventArgs, false)]"
                    ToolTipService.ToolTip="{Binding Z2714_G1_HuyQuyetToan, Source={StaticResource eHCMSResources}}"
                    Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsUserAdmin, Converter={StaticResource BooleanToVisibility}}">
                    <Button.Content>
                        <Image
                            Width="13"
                            Height="13"
                            Opacity="1"
                            Source="/aEMR.CommonViews;component/Assets/Images/Delete.png" />
                    </Button.Content>
                </Button>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="ColPrintTemplate">
            <Button
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                cal:Message.Attach="[Event Click] = [Action lnkPrint_Click($source, $eventArgs)]"
                ToolTipService.ToolTip="{Binding T1927_G1_InPhL, Source={StaticResource eHCMSResources}}">
                <Image
                    Width="13"
                    Height="13"
                    Opacity="1"
                    Source="/aEMR.CommonViews;component/Assets/Images/print-icon.png" />
            </Button>
        </DataTemplate>
    </UserControl.Resources>
    <Grid
        x:Name="LayoutRoot"
        HorizontalAlignment="Stretch"
        VerticalAlignment="Stretch">
        <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="150" />
                    <RowDefinition Height="Auto" MinHeight="24" />
                </Grid.RowDefinitions>
                <StackPanel
                    Margin="0,10,0,10"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">
                    <TextBlock
                        Height="22"
                        Margin="50,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Style="{StaticResource MainFrame.TextBlock.Header.01}"
                        Text="{Binding Z2563_G1_QuyetToanNgoaiTru, Source={StaticResource eHCMSResources}, ConverterParameter=Upper, Mode=OneWay, Converter={StaticResource StringFormatConverter}}" />

                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Margin="0"
                    HorizontalAlignment="Stretch">
                    <Grid
                        Margin="0,0,0,0"
                        HorizontalAlignment="Stretch"
                        d:LayoutOverrides="Height">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Border
                            Height="30"
                            MinWidth="550"
                            Padding="5,0,5,0"
                            HorizontalAlignment="Stretch"
                            BorderThickness="1"
                            Style="{StaticResource LightBlueBorderStyle}">
                            <StackPanel Orientation="Horizontal">
                                <ContentControl
                                    Name="SearchRegistrationContent"
                                    HorizontalContentAlignment="Stretch"
                                    VerticalContentAlignment="Stretch" />
                                <Button
                                    x:Name="OldRegistrationsCmd"
                                    Margin="5,0,0,0"
                                    VerticalAlignment="Center"
                                    Content="{Binding K1461_G1_LanDKTruoc, Source={StaticResource eHCMSResources}}"
                                    IsEnabled="{Binding CurrentRegMode, ConverterParameter=PATIENT_NOT_SELECTED, Converter={StaticResource NotOperatorEnumConverter}, Mode=OneWay}"
                                    Style="{StaticResource MainFrame.HyperlinkButton.01}"
                                    Visibility="{Binding CurPatient, Mode=OneWay, Converter={StaticResource IfNotNullVisibilityConverter}}" />
                            </StackPanel>
                        </Border>
                        <Border
                            Grid.Column="1"
                            Width="310"
                            Height="30"
                            Padding="5,0,5,0"
                            BorderThickness="1"
                            Style="{StaticResource LightBlueBorderStyle}">
                            <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                <Border
                                    Height="26"
                                    Padding="5,0,5,0"
                                    HorizontalAlignment="Stretch"
                                    Background="AntiqueWhite"
                                    BorderThickness="1"
                                    Style="{StaticResource LightBlueBorderStyle}">
                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                        <TextBlock
                                            Margin="10,0,0,0"
                                            VerticalAlignment="Center"
                                            FontSize="11"
                                            FontWeight="Bold"
                                            Foreground="Blue"
                                            Style="{StaticResource TextBlock.Heading.04}"
                                            Text="{Binding T3332_G1_MaDK, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                            TextWrapping="Wrap" />
                                        <TextBlock
                                            MinWidth="80"
                                            Margin="5,0,10,0"
                                            VerticalAlignment="Center"
                                            FontSize="13"
                                            FontWeight="Bold"
                                            Style="{StaticResource TextBlock.Heading.Impression}"
                                            Text="{Binding CurRegistration.PtRegistrationCode, Mode=OneWay}" />
                                    </StackPanel>
                                </Border>

                                <TextBlock
                                    Margin="0,0,0,0"
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlock.Heading.04}"
                                    Text="{Binding N0045_G1_Ng, StringFormat='{}{0}: ', Source={StaticResource eHCMSResources}}"
                                    TextWrapping="Wrap" />
                                <TextBox
                                    x:Name="txtToday"
                                    Width="100"
                                    Height="22"
                                    Margin="0,0,0,0"
                                    IsEnabled="False"
                                    Text="{Binding CurRegistration.ExamDate, Mode=TwoWay, StringFormat=dd/MM/yyyy}" />
                            </StackPanel>
                        </Border>
                    </Grid>
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Orientation="Horizontal">
                    <GroupBox
                        Margin="0,5,0,0"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Header="{Binding G0675_G1_TTinTToan, Source={StaticResource eHCMSResources}}"
                        IsEnabled="{Binding isChangeDept, Mode=OneWay}"
                        Style="{StaticResource MainFrame.GroupBox}">
                        <Border Padding="3,3,3,3" Style="{StaticResource LightBlueBorderStyleNew}">
                            <Grid VerticalAlignment="Top">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="182" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="24" />
                                    <RowDefinition Height="24" />
                                    <RowDefinition Height="24" />
                                    <RowDefinition Height="24" />
                                    <RowDefinition Height="24" />
                                    <RowDefinition />
                                    <RowDefinition Height="24" />
                                </Grid.RowDefinitions>

                                <TextBlock
                                    Grid.Row="0"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    FontWeight="Normal"
                                    Foreground="Black"
                                    Text="{Binding G1544_G1_TgTUChuaQToan, StringFormat='{}{0}(1):', Source={StaticResource eHCMSResources}}" />
                                <TextBlock
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Width="110"
                                    Height="22"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Stretch"
                                    FontWeight="Bold"
                                    Foreground="Black"
                                    Text="{Binding TotalAdvPayment, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                    TextAlignment="Right" />

                                <TextBlock
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    FontWeight="Normal"
                                    Foreground="Black"
                                    Text="{Binding G1499_G1_TgCNoChuaQToan, StringFormat='{}{0}(2):', Source={StaticResource eHCMSResources}}" />
                                <TextBlock
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Width="110"
                                    Height="22"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    FontWeight="Bold"
                                    Foreground="Black"
                                    Text="{Binding TotalPayment, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                    TextAlignment="Right" />
                                <TextBlock
                                    Grid.Row="2"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    FontWeight="Normal"
                                    Foreground="Black"
                                    Text="{Binding G1597_G1_TgTienHoanLai, StringFormat='{}{0}(3):', Source={StaticResource eHCMSResources}}" />
                                <TextBlock
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    Width="110"
                                    Height="22"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Stretch"
                                    FontWeight="Bold"
                                    Foreground="Black"
                                    Text="{Binding TotalRefundMoney, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                    TextAlignment="Right" />

                                <TextBlock
                                    Grid.Row="3"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    FontWeight="Normal"
                                    Foreground="Black"
                                    Text="{Binding G1551_G1_TgTUDaQToan, StringFormat='{}{0}(4):', Source={StaticResource eHCMSResources}}" />
                                <TextBlock
                                    Grid.Row="3"
                                    Grid.Column="1"
                                    Width="110"
                                    Height="22"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Stretch"
                                    FontWeight="Bold"
                                    Foreground="Black"
                                    Text="{Binding TotalPatientPaid_Finalized, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                    TextAlignment="Right" />

                                <TextBlock
                                    Grid.Row="4"
                                    Grid.Column="0"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    FontWeight="Normal"
                                    Foreground="Black"
                                    Text="{Binding G1528_G1_TgQuyHTChuaQToan, StringFormat='{}{0}(5):', Source={StaticResource eHCMSResources}}" />
                                <TextBlock
                                    Grid.Row="4"
                                    Grid.Column="1"
                                    Width="110"
                                    Height="22"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Center"
                                    FontWeight="Bold"
                                    Foreground="Black"
                                    Text="{Binding TotalSupportFund_NotFinalized, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                    TextAlignment="Right" />

                                <Line
                                    Grid.Row="5"
                                    Grid.Column="0"
                                    Grid.ColumnSpan="2"
                                    Height="1"
                                    HorizontalAlignment="Stretch"
                                    VerticalAlignment="Top"
                                    Fill="#FFF4F4F5"
                                    Stroke="#FFCCCCCC" />

                                <TextBlock
                                    x:Name="TotalBalanceCredit"
                                    Grid.Row="6"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Right"
                                    VerticalAlignment="Center"
                                    FontWeight="Normal"
                                    Foreground="Black"
                                    Text="{Binding S0644_G1_SoDu3, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                <TextBlock
                                    Grid.Row="6"
                                    Grid.Column="1"
                                    Width="110"
                                    Height="22"
                                    Margin="0,0,10,0"
                                    HorizontalAlignment="Left"
                                    VerticalAlignment="Stretch"
                                    cal:Message.Attach="[Event Loaded]=[Action TotalBalanceCredit_Loaded($source)]"
                                    FontWeight="Bold"
                                    Foreground="Red"
                                    Text="{Binding BalanceCreditRemaining, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                    TextAlignment="Right" />

                            </Grid>
                        </Border>
                    </GroupBox>

                    <ContentControl
                        Name="PatientSummaryInfoContent"
                        Width="1400"
                        Height="Auto"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch" />
                </StackPanel>


                <DockPanel
                    Grid.Row="4"
                    HorizontalAlignment="Stretch"
                    LastChildFill="True">
                    <TabControl
                        Name="tabRegistrationInfo"
                        Height="Auto"
                        Margin="0"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        IsTabStop="False"
                        Style="{StaticResource MainFrame.TabControl}">
                        <TabItem x:Name="tabitem" Header="Chưa quyết toán">
                            <customcontrols:ReadOnlyDataGrid
                                Height="500"
                                AutoGenerateColumns="False"
                                CanUserAddRows="false"
                                ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle}"
                                HorizontalScrollBarVisibility="Auto"
                                IsReadOnly="True"
                                ItemsSource="{Binding ListPatientRegistration}"
                                SelectedItem="{Binding SelectedPatientRegistration, Mode=TwoWay}"
                                Style="{StaticResource MainFrame.DataGridStyle}"
                                VerticalScrollBarVisibility="Auto">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="24">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox
                                                    x:Name="chk"
                                                    HorizontalAlignment="Center"
                                                    HorizontalContentAlignment="Center"
                                                    cal:Message.Attach="[Event Click]=[Action ckbIsChecked_Click($source,$datacontext)]"
                                                    Style="{StaticResource MainFrame.Checkbox.Title1}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn MinWidth="30" CellTemplate="{StaticResource ColPrintTemplate}" />
                                    <DataGridTextColumn
                                        x:Name="colExamDate"
                                        Width="115"
                                        Binding="{Binding ExamDate, StringFormat='dd/MM/yyyy HH:mm:ss'}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                        Header="{Binding R0425_G1_Ngvao, Source={StaticResource eHCMSResources}}" />

                                    <DataGridTextColumn
                                        x:Name="colDischargeDate"
                                        Width="115"
                                        Binding="{Binding DischargeDate, StringFormat='dd/MM/yyyy HH:mm:ss', Mode=OneWay}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                        Header="{Binding R0422_G1_NgRV, Source={StaticResource eHCMSResources}}" />


                                    <DataGridTextColumn
                                        x:Name="colPtRegistrationCode"
                                        Width="85"
                                        Binding="{Binding PtRegistrationCode}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                        Header="{Binding T3332_G1_MaDK, Source={StaticResource eHCMSResources}}" />

                                    <DataGridTextColumn
                                        x:Name="colTotalAmountForSettlement"
                                        MinWidth="100"
                                        Binding="{Binding TotalAmountForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding G1559_G1_TgTien, Source={StaticResource eHCMSResources}}" />

                                    <DataGridTextColumn
                                        x:Name="colTotalHIPaymentForSettlement"
                                        MinWidth="100"
                                        Binding="{Binding TotalHIPaymentForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding K1232_G1_BHTra, Source={StaticResource eHCMSResources}}"
                                        IsReadOnly="True" />

                                    <DataGridTextColumn
                                        x:Name="colTotalPatientPaymentForSettlement"
                                        MinWidth="100"
                                        Binding="{Binding TotalPatientPaymentForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding K1294_G1_BNPhaiTra, Source={StaticResource eHCMSResources}}"
                                        IsReadOnly="True" />

                                    <DataGridTextColumn
                                        x:Name="colTotalDiscountForSettlement"
                                        Binding="{Binding TotalDiscountForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding Z2342_G1_MienGiam, Source={StaticResource eHCMSResources}}"
                                        IsReadOnly="True" />

                                    <DataGridTextColumn
                                        x:Name="TotalPatientPaidForSettlement"
                                        Binding="{Binding TotalPatientPaidForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding K1276_G1_BNDaTra, Source={StaticResource eHCMSResources}}"
                                        IsReadOnly="True" />
                                </DataGrid.Columns>
                            </customcontrols:ReadOnlyDataGrid>
                        </TabItem>
                        <TabItem x:Name="tabitemNewItems" Header="{Binding Z1568_G1_DaQToan, Source={StaticResource eHCMSResources}}">
                            <customcontrols:ReadOnlyDataGrid
                                Height="500"
                                AutoGenerateColumns="False"
                                CanUserAddRows="false"
                                ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle}"
                                HorizontalScrollBarVisibility="Auto"
                                IsReadOnly="True"
                                ItemsSource="{Binding ListPatientRegistrationSettlement}"
                                SelectedItem="{Binding SelectedPatientRegistrationSettlement, Mode=TwoWay}"
                                Style="{StaticResource MainFrame.DataGridStyle}"
                                VerticalScrollBarVisibility="Auto">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn Width="24">
                                        <DataGridTemplateColumn.CellTemplate>
                                            <DataTemplate>
                                                <CheckBox
                                                    x:Name="chk"
                                                    HorizontalAlignment="Center"
                                                    HorizontalContentAlignment="Center"
                                                    cal:Message.Attach="[Event Click]=[Action ckbIsChecked_Click($source,$datacontext)]"
                                                    Style="{StaticResource MainFrame.Checkbox.Title1}" />
                                            </DataTemplate>
                                        </DataGridTemplateColumn.CellTemplate>
                                    </DataGridTemplateColumn>
                                    <DataGridTemplateColumn MinWidth="30" CellTemplate="{StaticResource ColPrintTemplate}" />
                                    <DataGridTextColumn
                                        x:Name="colExamDateComplete"
                                        Width="115"
                                        Binding="{Binding ExamDate, StringFormat='dd/MM/yyyy HH:mm:ss'}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                        Header="{Binding R0425_G1_Ngvao, Source={StaticResource eHCMSResources}}" />

                                    <DataGridTextColumn
                                        x:Name="colDischargeDateComplete"
                                        Width="115"
                                        Binding="{Binding DischargeDate, StringFormat='dd/MM/yyyy HH:mm:ss', Mode=OneWay}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                        Header="{Binding R0422_G1_NgRV, Source={StaticResource eHCMSResources}}" />


                                    <DataGridTextColumn
                                        x:Name="colPtRegistrationCodeComplete"
                                        Width="85"
                                        Binding="{Binding PtRegistrationCode}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockCenterAlign}"
                                        Header="{Binding T3332_G1_MaDK, Source={StaticResource eHCMSResources}}" />

                                    <DataGridTextColumn
                                        x:Name="colTotalAmountForSettlementComplete"
                                        MinWidth="100"
                                        Binding="{Binding TotalAmountForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding G1559_G1_TgTien, Source={StaticResource eHCMSResources}}" />

                                    <DataGridTextColumn
                                        x:Name="colTotalHIPaymentForSettlementComplete"
                                        MinWidth="100"
                                        Binding="{Binding TotalHIPaymentForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding K1232_G1_BHTra, Source={StaticResource eHCMSResources}}"
                                        IsReadOnly="True" />

                                    <DataGridTextColumn
                                        x:Name="colTotalPatientPaymentForSettlementComplete"
                                        MinWidth="100"
                                        Binding="{Binding TotalPatientPaymentForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding K1294_G1_BNPhaiTra, Source={StaticResource eHCMSResources}}"
                                        IsReadOnly="True" />

                                    <DataGridTextColumn
                                        x:Name="colTotalDiscountForSettlementComplete"
                                        Binding="{Binding TotalDiscountForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding Z2342_G1_MienGiam, Source={StaticResource eHCMSResources}}"
                                        IsReadOnly="True" />

                                    <DataGridTextColumn
                                        x:Name="TotalPatientPaidForSettlementComplete"
                                        Binding="{Binding TotalPatientPaidForSettlement, Mode=OneWay, Converter={StaticResource DecimalConverter2}}"
                                        ElementStyle="{StaticResource MainFrame.TextBlockRightAlign}"
                                        Header="{Binding K1276_G1_BNDaTra, Source={StaticResource eHCMSResources}}"
                                        IsReadOnly="True" />
                                </DataGrid.Columns>
                            </customcontrols:ReadOnlyDataGrid>
                        </TabItem>
                    </TabControl>
                </DockPanel>

                <DockPanel
                    Grid.Row="5"
                    HorizontalAlignment="Stretch"
                    LastChildFill="True">
                    <GroupBox
                        Margin="0,5,0,0"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Header="{Binding K1475_G1_LanQToan, Source={StaticResource eHCMSResources}}"
                        Style="{StaticResource MainFrame.GroupBox}">
                        <ScrollViewer>
                            <DataGrid
                                Name="gridCashAdvanceBill"
                                Height="300"
                                Margin="2,1"
                                VerticalAlignment="Top"
                                AutoGenerateColumns="False"
                                ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle}"
                                HorizontalScrollBarVisibility="Auto"
                                IsReadOnly="True"
                                ItemsSource="{Binding PatientSettlementList, Mode=OneWay}"
                                RowHeaderStyle="{StaticResource MainFrame.DataGridRowHeaderStyle}"
                                Style="{StaticResource MainFrame.DataGridStyle}"
                                VerticalScrollBarVisibility="Auto">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn
                                        x:Name="colPrintSettlement"
                                        Width="Auto"
                                        CellTemplate="{StaticResource PrintSettlementTemplate}" />
                                    <DataGridTextColumn
                                        Width="100"
                                        Binding="{Binding FinalizedReceiptNum, Mode=OneWay}"
                                        Header="{Binding S0649_G1_SoHDon, Source={StaticResource eHCMSResources}}" />
                                    <DataGridTextColumn
                                        Width="140"
                                        Binding="{Binding DateFinalize, Mode=OneWay, StringFormat='dd/MM/yyyy HH:mm:ss'}"
                                        Header="{Binding N0102_G1_NgQuyetToan, Source={StaticResource eHCMSResources}}" />
                                    <DataGridTextColumn
                                        Width="85"
                                        Binding="{Binding TotalHIPayment, Mode=OneWay, StringFormat='#,#.##'}"
                                        ElementStyle="{StaticResource RightAligmentTextBlock}"
                                        Header="{Binding K1232_G1_BHTra, Source={StaticResource eHCMSResources}}" />
                                    <DataGridTextColumn
                                        Width="85"
                                        Binding="{Binding TotalPatientPayment, Mode=OneWay, StringFormat='#,#.##'}"
                                        ElementStyle="{StaticResource RightAligmentTextBlock}"
                                        Header="{Binding K1296_G1_BNTra, Source={StaticResource eHCMSResources}}" />
                                    <DataGridTextColumn
                                        Width="85"
                                        Binding="{Binding TotalSupportFund, Mode=OneWay, StringFormat='#,#.##'}"
                                        ElementStyle="{StaticResource RightAligmentTextBlock}"
                                        Header="{Binding Q0490_G1_QuyHT, Source={StaticResource eHCMSResources}}" />
                                    <DataGridTextColumn
                                        Width="85"
                                        Binding="{Binding TotalInvoicePrice, Mode=OneWay, StringFormat='#,#.##'}"
                                        ElementStyle="{StaticResource RightAligmentTextBlock}"
                                        Header="{Binding G1472_G1_TCong, Source={StaticResource eHCMSResources}}" />
                                    <DataGridTextColumn
                                        Width="150"
                                        Binding="{Binding SettlementStaff.FullName, Mode=OneWay}"
                                        Header="{Binding N0194_G1_NhVien, Source={StaticResource eHCMSResources}}" />
                                </DataGrid.Columns>
                            </DataGrid>
                        </ScrollViewer>
                    </GroupBox>

                </DockPanel>

                <StackPanel
                    Grid.Row="6"
                    Margin="0,0,0,0"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Bottom"
                    Orientation="Vertical">
                    <StackPanel Margin="0,10,0,5" Orientation="Horizontal">
                        <Button
                            x:Name="PayCmd"
                            Width="80"
                            Content="{Binding G0739_G1_THien, Source={StaticResource eHCMSResources}}"
                            Style="{StaticResource MainFrame.Button}" />
                        <!--  IsEnabled="{Binding CanPay, Mode=OneWay}"  -->
                        <Button
                            x:Name="XuatHD"
                            Width="120"
                            Margin="10,0,0,0"
                            Content="{Binding Z2372_G1_XuatHoaDon, Source={StaticResource eHCMSResources}}"
                            Style="{StaticResource MainFrame.Button}"
                            Visibility="Collapsed" />
                        <Button
                            x:Name="btnDelTranFinal"
                            Width="120"
                            Margin="10,0,0,0"
                            Content="{Binding Z2714_G1_HuyQuyetToan, Source={StaticResource eHCMSResources}}"
                            Style="{StaticResource MainFrame.Button}"
                            Visibility="Collapsed" />
                    </StackPanel>
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</UserControl>