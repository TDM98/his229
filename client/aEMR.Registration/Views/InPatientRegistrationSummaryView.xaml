<!--
    20170218 #001 CMN: Add Checkbox AllDept for InPtBills
-->
<UserControl
    x:Class="aEMR.Registration.Views.InPatientRegistrationSummaryView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:AxControls="clr-namespace:aEMR.Controls;assembly=aEMR.Controls"
    xmlns:Converters="clr-namespace:aEMR.Common.Converters;assembly=aEMR.Common"
    xmlns:Resources="clr-namespace:eHCMSLanguage;assembly=aEMRLanguage"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:toolkit="http://schemas.xceed.com/wpf/xaml/toolkit"
    d:DesignHeight="750"
    d:DesignWidth="1000"
    mc:Ignorable="d">
    <UserControl.Resources>
        <Resources:eHCMSResources x:Key="eHCMSResources" />
        <Converters:EnumValueToStringConverter x:Key="EnumValueToStringConverter" />
        <Converters:DecimalConverter x:Key="DecimalConverter" />
        <Converters:DecimalConverter3 x:Key="DecimalConverter3" />
        <Converters:ShortDateConverter x:Key="ShortDateConverter" />
        <Converters:InverseBoolConverter x:Key="InverseBoolConverter" />
        <Converters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <Converters:LongToNotBooleanConverter2 x:Key="LongToNotBooleanConverter2" />
        <DataTemplate x:Key="RemoveItemButtonTemplate">
            <Button
                x:Name="lnkDelete"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                cal:Message.Attach="[Event Click]=[Action RemoveItemCmd($datacontext,$eventArgs)]"
                IsEnabled="{Binding Path=DataContext.CanDelete, ElementName=LayoutRoot, Mode=OneWay}"
                Style="{StaticResource MainFrame.HyperlinkButton.01}"
                ToolTipService.ToolTip="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}">
                <Image
                    Width="13"
                    Height="13"
                    Opacity="1"
                    Source="/aEMR.CommonViews;component/Assets/Images/Delete.png" />
            </Button>
        </DataTemplate>
        <DataTemplate x:Key="SelectInPackageTemplate">
            <CheckBox
                cal:Message.Attach="[Event Click]=[Action chkInPackage_Click($source,$datacontext)]"
                IsChecked="{Binding IsInPackage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                Style="{StaticResource MainFrame.Checkbox.Title1}" />
        </DataTemplate>
        <DataTemplate x:Key="SelectCountHITemplate">
            <CheckBox
                cal:Message.Attach="[Event Click]=[Action chkCountHI_Click($source,$datacontext)]"
                IsChecked="{Binding IsCountHI, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                IsEnabled="{Binding IsCountPatientCOVID, Mode=OneWay, Converter={StaticResource InverseBoolConverter}}"
                Style="{StaticResource MainFrame.Checkbox.Title1}" />
        </DataTemplate>
        <DataTemplate x:Key="SelectCountPatientTemplate">
            <CheckBox
                cal:Message.Attach="[Event Click]=[Action chkCountPatient_Click($source,$datacontext)]"
                IsChecked="{Binding IsCountPatient, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                IsEnabled="{Binding Path=DataContext.IsEnableCountPatient, ElementName=LayoutRoot, Mode=OneWay}"
                Style="{StaticResource MainFrame.Checkbox.Title1}" />
        </DataTemplate>
        <DataTemplate x:Key="SelectCountPatientCOVIDTemplate">
            <CheckBox
                cal:Message.Attach="[Event Click]=[Action chkCountPatientCOVID_Click($source,$datacontext)]"
                IsChecked="{Binding IsCountPatientCOVID, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.mCheckCovid, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                Style="{StaticResource MainFrame.Checkbox.Title1}" />
        </DataTemplate>
        <DataTemplate x:Key="DoctorStaffCellEditTemplate">
            <AxControls:AxAutoComplete
                cal:Message.Attach="[Event Populating]=[Action AutoDoctor_Populating($source,$eventArgs)];                                        [Event Loaded]=[Action AutoDoctor_Loaded($source,$eventArgs)];                                        [Event DropDownClosed]=[Action AutoDoctor_DropDownClosed($source,$eventArgs)]"
                BorderThickness="0"
                FilterMode="None"
                IsEnabled="{Binding IntPtDiagDrInstructionID, Converter={StaticResource LongToNotBooleanConverter2}}"
                ItemContainerStyle="{StaticResource AxAutoCompleteBoxBkg}"
                MinimumPopulateDelay="300"
                Style="{StaticResource AxAutoCompleteMyStyle}"
                Text="{Binding DoctorStaff.FullName}"
                ValueMemberBinding="{Binding FullName, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}">
                <AxControls:AxAutoComplete.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock
                                Margin="0"
                                Padding="0"
                                Style="{StaticResource MainFrame.TextBlock.Auto}"
                                Text="{Binding FullName}" />
                        </StackPanel>
                    </DataTemplate>
                </AxControls:AxAutoComplete.ItemTemplate>
            </AxControls:AxAutoComplete>
        </DataTemplate>
        <DataTemplate x:Key="DoctorStaffCellTemplate">
            <StackPanel VerticalAlignment="Center">
                <TextBlock Margin="2,0,0,0" Text="{Binding DoctorStaff.FullName}" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="MedicalInstructionDateCellEditTemplate">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <!--<DatePicker SelectedDate="{Binding MedicalInstructionDate, TargetNullValue=Null, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />-->
                <Button
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    cal:Message.Attach="[Event Click]=[Action EditMedicalInstructionDate($datacontext,$eventArgs)]"
                    IsEnabled="{Binding IsNotBedService, Mode=OneWay}"
                    Style="{StaticResource MainFrame.HyperlinkButton.02}">
                    <TextBlock Text="{Binding MedicalInstructionDate, StringFormat='dd/MM/yyyy HH:mm', TargetNullValue=Null, Mode=TwoWay}" />
                </Button>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="MedicalInstructionDateCellTemplate">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock HorizontalAlignment="Center" Text="{Binding MedicalInstructionDate, StringFormat='dd/MM/yyyy HH:mm'}" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="ResultDateCellEditTemplate">
            <StackPanel
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                IsEnabled="{Binding IntPtDiagDrInstructionID, Converter={StaticResource LongToNotBooleanConverter2}}">
                <!--<DatePicker SelectedDate="{Binding ResultDate, TargetNullValue=Null, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />-->
                <Button
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    cal:Message.Attach="[Event Click]=[Action EditResultDate($datacontext,$eventArgs)]"
                    IsEnabled="{Binding IsNotBedService, Mode=OneWay}"
                    Style="{StaticResource MainFrame.HyperlinkButton.02}">
                    <TextBlock Text="{Binding ResultDate, StringFormat='dd/MM/yyyy HH:mm', TargetNullValue=Null, Mode=TwoWay}" />
                </Button>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="ResultDateCellTemplate">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock HorizontalAlignment="Center" Text="{Binding ResultDate, StringFormat='dd/MM/yyyy HH:mm'}" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="SelectCountSETemplate">
            <CheckBox
                cal:Message.Attach="[Event Click]=[Action chkCountSE_Click($source,$datacontext)]"
                IsChecked="{Binding IsCountSE, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                IsEnabled="{Binding IsCountPatientCOVID, Mode=OneWay, Converter={StaticResource InverseBoolConverter}}"
                Style="{StaticResource MainFrame.Checkbox.Title1}" />
        </DataTemplate>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibility" />
        <Converters:BooleanToVisibilityNotConverter x:Key="BooleanToNotVisibility" />
        <Converters:IntConverterMin1 x:Key="IntConverterMin1" />
    </UserControl.Resources>
    <ScrollViewer
        CanContentScroll="True"
        HorizontalScrollBarVisibility="Auto"
        VerticalScrollBarVisibility="Auto">
        <Grid
            x:Name="LayoutRoot"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" MaxHeight="150" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>
                <StackPanel
                    Margin="0,10,0,10"
                    HorizontalAlignment="Center"
                    Orientation="Horizontal">
                    <TextBlock
                        Height="22"
                        Margin="5,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Foreground="Red"
                        Style="{StaticResource MainFrame.TextBlock.Header.01}"
                        Text="{Binding DeptLocTitle}" />
                    <TextBlock
                        Height="22"
                        Margin="50,0,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Style="{StaticResource MainFrame.TextBlock.Header.01}"
                        Text="{Binding TitleForm}" />
                </StackPanel>
                <StackPanel
                    Grid.Row="1"
                    Margin="0"
                    HorizontalAlignment="Stretch">
                    <Grid
                        Margin="0,0,0,0"
                        HorizontalAlignment="Stretch"
                        d:LayoutOverrides="Height">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>
                        <Border
                            Height="30"
                            MinWidth="500"
                            Padding="5,0,5,0"
                            HorizontalAlignment="Stretch"
                            BorderThickness="1"
                            Style="{StaticResource LightBlueBorderStyle}">
                            <StackPanel Orientation="Horizontal">
                                <ContentControl
                                    Name="SearchRegistrationContent"
                                    HorizontalContentAlignment="Stretch"
                                    VerticalContentAlignment="Stretch" />
                                <!--<HyperlinkButton x:Name="hplkNhapVien" Content="{Binding N0221_G1_NhapVien, Source={StaticResource eHCMSResources}}"
                                   VerticalAlignment="Center" Margin="5,0,0,0" />-->
                            </StackPanel>
                        </Border>
                        <Border
                            Grid.Column="1"
                            Width="310"
                            Height="30"
                            Padding="5,0,5,0"
                            BorderThickness="1"
                            Style="{StaticResource LightBlueBorderStyle}">
                            <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                <Border
                                    Height="26"
                                    Padding="5,0,5,0"
                                    HorizontalAlignment="Stretch"
                                    Background="AntiqueWhite"
                                    BorderThickness="1"
                                    Style="{StaticResource LightBlueBorderStyle}">
                                    <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                                        <TextBlock
                                            Margin="10,0,0,0"
                                            VerticalAlignment="Center"
                                            FontSize="11"
                                            FontWeight="Bold"
                                            Foreground="Blue"
                                            Style="{StaticResource TextBlock.Heading.04}"
                                            Text="{Binding T3332_G1_MaDK, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                            TextWrapping="Wrap" />
                                        <TextBlock
                                            MinWidth="80"
                                            Margin="5,0,10,0"
                                            VerticalAlignment="Center"
                                            FontSize="13"
                                            FontWeight="Bold"
                                            Style="{StaticResource TextBlock.Heading.Impression}"
                                            Text="{Binding CurRegistration.PtRegistrationCode, Mode=OneWay}" />
                                    </StackPanel>
                                </Border>
                                <TextBlock
                                    Margin="0,0,0,0"
                                    VerticalAlignment="Center"
                                    Style="{StaticResource TextBlock.Heading.04}"
                                    Text="{Binding N0045_G1_Ng, StringFormat='{}{0}: ', Source={StaticResource eHCMSResources}}"
                                    TextWrapping="Wrap" />
                                <TextBox
                                    x:Name="txtToday"
                                    Width="100"
                                    Height="22"
                                    Margin="0,0,0,0"
                                    Text="{Binding CurRegistration.ExamDate, Mode=TwoWay, StringFormat=dd/MM/yyyy}" />
                            </StackPanel>
                        </Border>
                    </Grid>
                </StackPanel>
                <StackPanel
                    Grid.Row="2"
                    MaxHeight="150"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    Orientation="Horizontal">
                    <ContentControl
                        Name="PatientSummaryInfoContent"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch" />
                </StackPanel>

                <TextBlock
                    Grid.Row="3"
                    Height="20"
                    Margin="5,0,0,0"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    FontSize="14"
                    Foreground="Crimson"
                    Style="{StaticResource TextBlock.Heading.04}"
                    Text="{Binding K1181_G1_BNDaXV, Source={StaticResource eHCMSResources}}"
                    Visibility="{Binding isDischarged, Mode=OneWay, Converter={StaticResource BooleanToVisibility}}" />

                <DockPanel
                    Grid.Row="4"
                    HorizontalAlignment="Stretch"
                    LastChildFill="True">
                    <ContentControl
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        IsEnabled="{Binding CanAddEditBill, Mode=OneWay}">
                        <!--  KMx: Nếu BN đã xuất viện rồi thì vẫn enable form cho user xem bill cũ (23/05/2015 10:35).  -->
                        <!--<GroupBox HorizontalAlignment="Stretch" Style="{StaticResource MainFrame.GroupBox}"
                                       VerticalAlignment="Stretch"
                                       Header="{Binding G0581_G1_TTinDK, Source={StaticResource eHCMSResources}}"
                                           IsEnabled="{Binding isChangeDept, Mode=OneWay}"
                                       Margin="0,5,0,0">-->
                        <GroupBox
                            Margin="0,5,0,0"
                            HorizontalAlignment="Stretch"
                            VerticalAlignment="Stretch"
                            Header="{Binding G0581_G1_TTinDK, Source={StaticResource eHCMSResources}}"
                            Style="{StaticResource MainFrame.GroupBox}">
                            <Grid
                                Width="Auto"
                                Height="Auto"
                                Margin="0,0,0,0"
                                HorizontalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="10" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <StackPanel
                                    Grid.ColumnSpan="10"
                                    HorizontalAlignment="Stretch"
                                    Orientation="Horizontal">
                                    <TextBlock
                                        Margin="0,0,0,0"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource TextBlock.Heading.03}"
                                        Text="{Binding T2222_G1_Khoa, StringFormat='{}{0}: ', Source={StaticResource eHCMSResources}}"
                                        TextWrapping="Wrap" />
                                    <ContentControl
                                        Name="DepartmentContent"
                                        Grid.Column="1"
                                        MinWidth="300"
                                        MaxWidth="400"
                                        HorizontalContentAlignment="Stretch"
                                        VerticalContentAlignment="Stretch"
                                        TabIndex="3" />

                                    <TextBlock
                                        Margin="10,0,0,0"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.Title1}"
                                        Text="{Binding G1933_G1_TuNg, Source={StaticResource eHCMSResources}}" />
                                    <DatePicker
                                        VerticalAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        SelectedDate="{Binding FromDate, Mode=TwoWay}"
                                        Style="{StaticResource MainFrame.DatePicker}" />

                                    <TextBlock
                                        Margin="5,0,0,0"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.Title1}"
                                        Text="{Binding K3192_G1_DenNg, Source={StaticResource eHCMSResources}}" />
                                    <DatePicker
                                        VerticalAlignment="Center"
                                        VerticalContentAlignment="Center"
                                        SelectedDate="{Binding ToDate, Mode=TwoWay}"
                                        Style="{StaticResource MainFrame.DatePicker}" />

                                    <TextBlock
                                        Margin="5,0,0,0"
                                        VerticalAlignment="Center"
                                        Style="{StaticResource MainFrame.TextBlock.Title1}"
                                        Text="{Binding G1262_G1_TimTheoTen, Source={StaticResource eHCMSResources}}" />
                                    <TextBox
                                        Width="auto"
                                        Height="22"
                                        MinWidth="200"
                                        MaxWidth="500"
                                        Margin="5,0,5,0"
                                        VerticalContentAlignment="Center"
                                        Text="{Binding ItemNameFilter, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                                    <Button
                                        Name="FilterListItemCmd"
                                        Width="75"
                                        Content="{Binding G1174_G1_TimKiem, Source={StaticResource eHCMSResources}}"
                                        Style="{StaticResource MainFrame.Button}"
                                        Visibility="{Binding mProcessPayment, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                </StackPanel>
                                <!--  Header="{Binding G0252_G1_ThemDV, Source={StaticResource eHCMSResources}}"  -->
                                <!--<Expander
                                        x:Name="ServiceExpander"
                                        Grid.Row="1"
                                        Grid.RowSpan="3"
                                        Width="Auto"
                                        MinWidth="10"
                                        Margin="0,0,0,0"
                                        Background="#FFDBE5F1"
                                        ExpandDirection="Left"
                                        IsExpanded="True"
                                        RenderTransformOrigin="0,0">
                                        <StackPanel>
                                            <StackPanel
                                                Margin="0"
                                                HorizontalAlignment="Stretch"
                                                VerticalAlignment="Stretch">
                                                <Border
                                                    MinHeight="480"
                                                    BorderBrush="#FF5E5E5E"
                                                    BorderThickness="1"
                                                    Style="{StaticResource LightBlueBorderStyleNew}">
                                                    <StackPanel>
                                                        <TextBlock
                                                            Margin="0"
                                                            Foreground="#FF5E5E5E"
                                                            Style="{StaticResource TBlock.Heading.02}"
                                                            Text="{Binding Z0015_G1_DSCacDV, Source={StaticResource eHCMSResources}}"
                                                            TextWrapping="Wrap" />
                                                        <Grid>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                                <RowDefinition Height="Auto" />
                                                            </Grid.RowDefinitions>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="Auto" />
                                                                <ColumnDefinition Width="*" />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBlock
                                                                VerticalAlignment="Center"
                                                                Foreground="#FF5E5E5E"
                                                                Style="{StaticResource TBlock.Heading.03}"
                                                                Text="{Binding T2144_G1_Kho, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                                                TextWrapping="Wrap" />
                                                            <AxControls:AxComboBox
                                                                Grid.Row="0"
                                                                Grid.Column="1"
                                                                Margin="1,2,1,2"
                                                                DisplayMemberPath="swhlName"
                                                                IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                ItemsSource="{Binding WarehouseList, Mode=OneWay}"
                                                                SelectedItemEx="{Binding SelectedWarehouse, Mode=TwoWay}"
                                                                SelectedValuePath="StoreID"
                                                                Style="{StaticResource MainFrame.ComboBox}" />

                                                            <TextBlock
                                                                Grid.Row="1"
                                                                Margin="0"
                                                                VerticalAlignment="Center"
                                                                Foreground="#FF5E5E5E"
                                                                Style="{StaticResource TBlock.Heading.03}"
                                                                Text="{Binding N0108_G1_NgSuDung, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                                                TextWrapping="Wrap" />
                                -->
                                <!--<DatePicker  Grid.Row="1" Grid.Column="1" Margin="1,2,1,2" Name="SelectedDate" Style="{StaticResource MainFrame.DatePicker}" HorizontalAlignment="Left" IsEnabled="{Binding CanRegister, Mode=OneWay}" />-->
                                <!--
                                                            <ContentControl
                                                                x:Name="UseAtDateContent"
                                                                Grid.Row="1"
                                                                Grid.Column="1"
                                                                Height="20"
                                                                Margin="1,2,1,2"
                                                                HorizontalAlignment="Left"
                                                                IsEnabled="{Binding CanRegister, Mode=OneWay}" />

                                                            <TextBlock
                                                                Grid.Row="2"
                                                                Margin="0"
                                                                VerticalAlignment="Center"
                                                                Foreground="#FF5E5E5E"
                                                                Style="{StaticResource TBlock.Heading.03}"
                                                                Text="{Binding N0133_G1_NgYLenh, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                                                TextWrapping="Wrap" />
                                -->
                                <!--<DatePicker Height="22" Grid.Row="2" Grid.Column="1" Margin="1,2,1,2" SelectedDate="{Binding MedicalInstructionDate,TargetNullValue=null, Mode=TwoWay}" Style="{StaticResource MainFrame.DatePicker}" HorizontalAlignment="Left" IsEnabled="{Binding CanRegister, Mode=OneWay}" />-->
                                <!--
                                                            <ContentControl
                                                                x:Name="MedicalInstructionDateContent"
                                                                Grid.Row="2"
                                                                Grid.Column="1"
                                                                Height="20"
                                                                Margin="1,2,1,2"
                                                                HorizontalAlignment="Left"
                                                                IsEnabled="{Binding CanRegister, Mode=OneWay}" />

                                                            <TextBlock
                                                                Grid.Row="3"
                                                                Margin="0"
                                                                VerticalAlignment="Center"
                                                                Foreground="#FF5E5E5E"
                                                                Style="{StaticResource TBlock.Heading.03}"
                                                                Text="{Binding N0080_G1_NgKetQua, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                                                TextWrapping="Wrap" />
                                -->
                                <!--<DatePicker Height="22" Grid.Row="3" Grid.Column="1" Margin="1,2,1,2" SelectedDate="{Binding ResultDate,TargetNullValue=null, Mode=TwoWay}" Style="{StaticResource MainFrame.DatePicker}" HorizontalAlignment="Left" IsEnabled="{Binding CanRegister, Mode=OneWay}" />-->
                                <!--
                                                            <ContentControl
                                                                x:Name="ResultDateContent"
                                                                Grid.Row="3"
                                                                Grid.Column="1"
                                                                Height="20"
                                                                Margin="1,2,1,2"
                                                                HorizontalAlignment="Left"
                                                                IsEnabled="{Binding CanRegister, Mode=OneWay}" />

                                                            <TextBlock
                                                                Grid.Row="4"
                                                                Margin="0"
                                                                VerticalAlignment="Center"
                                                                Foreground="#FF5E5E5E"
                                                                Style="{StaticResource TBlock.Heading.03}"
                                                                Text="{Binding K1377_G1_BSiCDinh, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"
                                                                TextWrapping="Wrap" />

                                                            <ContentControl
                                                                x:Name="aucHoldConsultDoctor"
                                                                Grid.Row="4"
                                                                Grid.Column="1"
                                                                Margin="1,2,1,2"
                                                                HorizontalContentAlignment="Stretch" />

                                -->
                                <!--<Button Name="btnChangeDoctor" Content="{Binding K3576_G1_DoiBs, Source={StaticResource eHCMSResources}}" Grid.Column="2" Margin="2,1,2,1" Style="{StaticResource MainFrame.Button}" Width="75" />-->
                                <!--<TextBlock TextWrapping="Wrap" Text="{Binding G2363_G1_XNhan, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center" Foreground="#FF5E5E5E" Margin="0" Grid.Row="6" Style="{StaticResource TBlock.Heading.03}" />
                                                        <CheckBox IsEnabled="False" IsChecked="{Binding MedRegItemConfirmed, Mode=TwoWay}" Style="{StaticResource MainFrame.Checkbox.Title1}"  Grid.Row="6" Grid.Column="1"  Margin="1,2,1,2" />-->
                                <!--
                                                        </Grid>

                                                        <TabControl
                                                            x:Name="tabPatientInfo"
                                                            Width="300"
                                                            MinHeight="350"
                                                            MaxHeight="400"
                                                            Margin="0"
                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                            IsTabStop="False"
                                                            Style="{StaticResource MainFrame.TabControl}">
                                                            <TabItem x:Name="tabitemService" Header="{Binding K2751_G1_DV, Source={StaticResource eHCMSResources}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        x:Name="InPatientSelectServiceContent"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                                                    <StackPanel
                                                                        Margin="0,2,0,0"
                                                                        HorizontalAlignment="Center"
                                                                        Orientation="Horizontal">
                                                                        <TextBlock VerticalAlignment="Center" Text="{Binding S0583_G1_SLg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                                                        <TextBox
                                                                            x:Name="ServiceQty"
                                                                            Width="40"
                                                                            Height="22"
                                                                            Margin="5,0,5,0"
                                                                            VerticalContentAlignment="Center"
                                                                            Text="{Binding ServiceQty, Mode=TwoWay, Converter={StaticResource IntConverterMin1}}"
                                                                            TextAlignment="Right" />

                                                                        <Button
                                                                            x:Name="AddServiceCmd"
                                                                            Width="80"
                                                                            Height="22"
                                                                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                                        <Button
                                                                            x:Name="AddRegPackCmd"
                                                                            Height="22"
                                                                            MinWidth="80"
                                                                            Margin="5,0,0,0"
                                                                            Padding="5,0"
                                                                            Content="{Binding Z2350_G1_ThemGoiDichVu, Source={StaticResource eHCMSResources}}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}}" />
                                                                    </StackPanel>
                                                                </StackPanel>
                                                            </TabItem>
                                                            <TabItem x:Name="tabitemPCL" Header="{Binding Z1133_G1_CDHA, Source={StaticResource eHCMSResources}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        Name="SelectPCLContent"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                                                    <StackPanel
                                                                        Margin="0,2,40,0"
                                                                        HorizontalAlignment="Right"
                                                                        Orientation="Horizontal">
                                                                        <TextBlock VerticalAlignment="Center" Text="{Binding S0583_G1_SLg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                                                        <TextBox
                                                                            x:Name="PclQty"
                                                                            Width="40"
                                                                            Height="22"
                                                                            Margin="5,0,5,0"
                                                                            VerticalContentAlignment="Center"
                                                                            Text="{Binding PclQty, Mode=TwoWay, Converter={StaticResource IntConverterMin1}}"
                                                                            TextAlignment="Right" />

                                                                        <Button
                                                                            x:Name="AddPclExamTypeCmd"
                                                                            Width="70"
                                                                            Height="22"
                                                                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                                    </StackPanel>
                                                                </StackPanel>
                                                            </TabItem>
                                                            <TabItem x:Name="tabitemPCLLAB" Header="{Binding G2613_G1_XN, Source={StaticResource eHCMSResources}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        Name="SelectPCLContentLAB"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                -->
                                <!--<Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition />
                                                                        <ColumnDefinition />
                                                                    </Grid.ColumnDefinitions>-->
                                <!--  Col0  -->
                                <!--<StackPanel Grid.Column="0" Orientation="Horizontal">
                                                                        <TextBlock Text="{Binding T0913_G1_TenXN, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" VerticalAlignment="Center"></TextBlock>
                                                                        <TextBox Width="100"></TextBox>
                                                                    </StackPanel>-->
                                <!--  Col1  -->
                                <!--
                                                                    <StackPanel
                                                                        Grid.Column="1"
                                                                        HorizontalAlignment="Right"
                                                                        Orientation="Horizontal">
                                                                        <TextBlock VerticalAlignment="Center" Text="{Binding S0583_G1_SLg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                                                        <TextBox
                                                                            x:Name="PclQtyLAB"
                                                                            Width="40"
                                                                            Height="22"
                                                                            Margin="5,0,5,0"
                                                                            VerticalContentAlignment="Center"
                                                                            Text="{Binding PclQtyLAB, Mode=TwoWay, Converter={StaticResource IntConverterMin1}}"
                                                                            TextAlignment="Right" />

                                                                        <Button
                                                                            x:Name="AddPclExamTypeCmdLAB"
                                                                            Width="70"
                                                                            Height="22"
                                                                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />

                                                                        <Button
                                                                            x:Name="AddAllPclExamTypeCmdLAB"
                                                                            Width="85"
                                                                            Height="22"
                                                                            Content="{Binding G0331_G1_ThemTCa, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                                    </StackPanel>
                                -->
                                <!--</Grid>-->
                                <!--
                                                                </StackPanel>
                                                            </TabItem>
                                                            <TabItem
                                                                x:Name="tabitemDrug"
                                                                Header="{Binding G0787_G1_Thuoc, Source={StaticResource eHCMSResources}}"
                                                                Visibility="{Binding AddMedProductToBillDirectly, Converter={StaticResource BooleanToVisibility}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        Name="SelectDrugContent"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                                                    <StackPanel
                                                                        Margin="0,2,40,0"
                                                                        HorizontalAlignment="Right"
                                                                        Orientation="Horizontal">
                                                                        <TextBlock VerticalAlignment="Center" Text="{Binding S0583_G1_SLg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                                                        <TextBox
                                                                            x:Name="DrugQty"
                                                                            Width="40"
                                                                            Height="22"
                                                                            Margin="5,0,5,0"
                                                                            VerticalContentAlignment="Center"
                                                                            Text="{Binding DrugQty, Mode=TwoWay, Converter={StaticResource DecimalConverter3}}"
                                                                            TextAlignment="Right" />

                                                                        <Button
                                                                            x:Name="AddDrugItemCmd"
                                                                            Width="80"
                                                                            Height="22"
                                                                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                                    </StackPanel>
                                                                </StackPanel>
                                                            </TabItem>
                                                            <TabItem
                                                                x:Name="tabitemMedItem"
                                                                Header="{Binding G2907_G1_YCu, Source={StaticResource eHCMSResources}}"
                                                                Visibility="{Binding AddMedProductToBillDirectly, Converter={StaticResource BooleanToVisibility}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        Name="MedItemContent"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                                                    <StackPanel
                                                                        Margin="0,2,40,0"
                                                                        HorizontalAlignment="Right"
                                                                        Orientation="Horizontal">
                                                                        <TextBlock VerticalAlignment="Center" Text="{Binding S0583_G1_SLg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                                                        <TextBox
                                                                            x:Name="MedItemQty"
                                                                            Width="40"
                                                                            Height="22"
                                                                            Margin="5,0,5,0"
                                                                            VerticalContentAlignment="Center"
                                                                            Text="{Binding MedItemQty, Mode=TwoWay, Converter={StaticResource DecimalConverter3}}"
                                                                            TextAlignment="Right" />
                                                                        <Button
                                                                            x:Name="AddMedItemCmd"
                                                                            Width="80"
                                                                            Height="22"
                                                                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                                    </StackPanel>
                                                                </StackPanel>
                                                            </TabItem>

                                                            <TabItem
                                                                x:Name="tabitemChemical"
                                                                Header="{Binding T1310_G1_HC, Source={StaticResource eHCMSResources}}"
                                                                Visibility="{Binding AddMedProductToBillDirectly, Converter={StaticResource BooleanToVisibility}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        Name="ChemicalItemContent"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                -->
                                <!--<my:UC_InPatient_SelectChemical x:Name="ctrlSelectChemical" SelectionChanged="ctrlSelectChemical_SelectionChanged"
                                                                                            VerticalAlignment="Top" />-->
                                <!--
                                                                    <StackPanel
                                                                        Margin="0,2,40,0"
                                                                        HorizontalAlignment="Right"
                                                                        Orientation="Horizontal">
                                                                        <TextBlock VerticalAlignment="Center" Text="{Binding S0583_G1_SLg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                                                        <TextBox
                                                                            x:Name="ChemicalQty"
                                                                            Width="40"
                                                                            Height="22"
                                                                            Margin="5,0,5,0"
                                                                            VerticalContentAlignment="Center"
                                                                            Text="{Binding ChemicalQty, Mode=TwoWay, Converter={StaticResource DecimalConverter3}}"
                                                                            TextAlignment="Right" />
                                                                        <Button
                                                                            x:Name="AddChemicalCmd"
                                                                            Width="80"
                                                                            Height="22"
                                                                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                                    </StackPanel>
                                                                </StackPanel>
                                                            </TabItem>

                                                            <TabItem Header="{Binding A0040_G1_PhauThuat, Source={StaticResource eHCMSResources}}" Visibility="{Binding IsEnableTestFunction, Converter={StaticResource BooleanToVisibility}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        x:Name="SelectGeneralSugeryContent"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                                                    <StackPanel
                                                                        Margin="0,2,40,0"
                                                                        HorizontalAlignment="Right"
                                                                        Orientation="Horizontal">
                                                                        <TextBlock VerticalAlignment="Center" Text="{Binding S0583_G1_SLg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                                                        <TextBox
                                                                            x:Name="SugeryQty"
                                                                            Width="40"
                                                                            Height="22"
                                                                            Margin="5,0,5,0"
                                                                            VerticalContentAlignment="Center"
                                                                            Text="{Binding SugeryQty, Mode=TwoWay, Converter={StaticResource IntConverterMin1}}"
                                                                            TextAlignment="Right" />
                                                                        <Button
                                                                            x:Name="AddGeneralSugeryItemCmd"
                                                                            Width="70"
                                                                            Height="22"
                                                                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                                    </StackPanel>
                                                                </StackPanel>
                                                            </TabItem>
                                                            <TabItem Header="{Binding T1277_G1_Giuong, Source={StaticResource eHCMSResources}}" Visibility="{Binding IsEnableTestFunction, Converter={StaticResource BooleanToVisibility}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        x:Name="SelectBedContent"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                                                    <StackPanel
                                                                        Margin="0,2,40,0"
                                                                        HorizontalAlignment="Right"
                                                                        Orientation="Horizontal">
                                                                        <TextBlock VerticalAlignment="Center" Text="{Binding S0583_G1_SLg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                                                        <TextBox
                                                                            x:Name="BedQty"
                                                                            Width="40"
                                                                            Height="22"
                                                                            Margin="5,0,5,0"
                                                                            VerticalContentAlignment="Center"
                                                                            Text="{Binding BedQty, Mode=TwoWay, Converter={StaticResource IntConverterMin1}}"
                                                                            TextAlignment="Right" />
                                                                        <Button
                                                                            x:Name="AddBedItemCmd"
                                                                            Width="70"
                                                                            Height="22"
                                                                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                                    </StackPanel>
                                                                </StackPanel>
                                                            </TabItem>
                                                            <TabItem Header="{Binding T3709_G1_Mau, Source={StaticResource eHCMSResources}}" Visibility="{Binding IsEnableTestFunction, Converter={StaticResource BooleanToVisibility}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        x:Name="SelectBloodContent"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                                                    <StackPanel
                                                                        Margin="0,2,40,0"
                                                                        HorizontalAlignment="Right"
                                                                        Orientation="Horizontal">
                                                                        <TextBlock VerticalAlignment="Center" Text="{Binding S0583_G1_SLg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" />
                                                                        <TextBox
                                                                            x:Name="BloodQty"
                                                                            Width="40"
                                                                            Height="22"
                                                                            Margin="5,0,5,0"
                                                                            VerticalContentAlignment="Center"
                                                                            Text="{Binding BloodQty, Mode=TwoWay, Converter={StaticResource IntConverterMin1}}"
                                                                            TextAlignment="Right" />
                                                                        <Button
                                                                            x:Name="AddBloodItemCmd"
                                                                            Width="70"
                                                                            Height="22"
                                                                            Content="{Binding G0156_G1_Them, Source={StaticResource eHCMSResources}}"
                                                                            IsEnabled="{Binding CanRegister, Mode=OneWay}"
                                                                            Style="{StaticResource MainFrame.Button}"
                                                                            Visibility="{Binding mDangKyNoiTru_ThemDV, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                                    </StackPanel>
                                                                </StackPanel>
                                                            </TabItem>
                                -->
                                <!--<TabItem Header="Gói DVKT" Visibility="{Binding IsEnableTestFunction, Converter={StaticResource BooleanToVisibility}}">
                                                                <StackPanel>
                                                                    <ContentControl
                                                                        x:Name="SelectPackageContent"
                                                                        HorizontalContentAlignment="Stretch"
                                                                        VerticalContentAlignment="Stretch" />
                                                                </StackPanel>
                                                            </TabItem>-->
                                <!--
                                                        </TabControl>

                                                        <CheckBox
                                                            HorizontalAlignment="Center"
                                                            Content="{Binding T2668_G1_LoadPhCLSChuaTHien, Source={StaticResource eHCMSResources}}"
                                                            IsChecked="{Binding IsLoadPCLRequestWaiting, Mode=TwoWay}"
                                                            Style="{StaticResource MainFrame.Checkbox.Title1}"
                                                            Visibility="Collapsed" />
                                -->
                                <!--
                                                        <Button
                                                            Name="LoadBillCmd"
                                                            Content="{Binding T2664_G1_Loadbill, Source={StaticResource eHCMSResources}}"
                                                            Style="{StaticResource MainFrame.Button}"
                                                            Visibility="{Binding mProcessPayment, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />
                                                    </StackPanel>
                                                </Border>
                                            </StackPanel>
                                        </StackPanel>
                                    </Expander>-->

                                <StackPanel
                                    Grid.Row="2"
                                    Grid.RowSpan="3"
                                    Grid.Column="2">
                                    <AxControls:ReadOnlyDataGrid
                                        x:Name="grid"
                                        Width="Auto"
                                        Height="500"
                                        VerticalContentAlignment="Stretch"
                                        cal:Message.Attach="[Event Loaded]=[Action grid_Loaded($source,$eventArgs)];                                              [Event CellEditEnding]=[Action CellEditEnding($source,$eventArgs)];                                              [Event BeginningEdit]=[Action BeginningEdit($source,$eventArgs)];                                              [Event DblClick]=[Action gridRegDetails_DbClick($source,$eventArgs)]"
                                        AutoGenerateColumns="False"
                                        CanUserAddRows="False"
                                        ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyle.01}"
                                        HorizontalScrollBarVisibility="Auto"
                                        IsReadOnly="{Binding CanEditOnGrid, Mode=OneWay, Converter={StaticResource InverseBoolConverter}}"
                                        ItemsSource="{Binding AllRegistrationItemsFilter, Mode=OneWay}"
                                        LoadingRow="grid_LoadingRow"
                                        RowHeaderStyle="{StaticResource MainFrame.DataGridRowHeaderStyle}"
                                        SelectedItem="{Binding SelectedRegistrationItem, Mode=TwoWay}"
                                        Style="{StaticResource MainFrame.DataGridStyle}"
                                        VerticalScrollBarVisibility="Auto">
                                        <!--  KMx: Sử dụng event LoadingRow của .NET sẽ tốt hơn của Caliburn. Vì nếu view này là pop-up thì sẽ không nhận event LoadingRow của Caliburn (16/01/2015 16:49).  -->
                                        <DataGrid.Resources>
                                            <AxControls:BindingProxy x:Key="proxy" Data="{Binding}" />
                                        </DataGrid.Resources>
                                        <DataGrid.Columns>
                                            <DataGridTemplateColumn
                                                x:Name="colDelete"
                                                Width="24"
                                                CellTemplate="{StaticResource RemoveItemButtonTemplate}"
                                                Header=""
                                                IsReadOnly="True" />
                                            <DataGridTemplateColumn
                                                x:Name="colCountSE"
                                                CellTemplate="{StaticResource SelectCountSETemplate}"
                                                IsReadOnly="True" 
                                                Visibility="{Binding Data.IsEnableCountSE, Source={StaticResource proxy}, Converter={StaticResource BooleanToVisibilityConverter}}" >
                                                <DataGridTemplateColumn.HeaderTemplate>
                                                    <DataTemplate>
                                                        <StackPanel>
                                                            <TextBlock Text="{Binding Z3261_G1_TinhDV, Source={StaticResource eHCMSResources}}" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.HeaderTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn
                                                x:Name="colCountHI"
                                                CellTemplate="{StaticResource SelectCountHITemplate}"
                                                IsReadOnly="True">
                                                <DataGridTemplateColumn.HeaderTemplate>
                                                    <DataTemplate>
                                                        <StackPanel>
                                                            <TextBlock Text="{Binding G1279_G1_TinhBH, Source={StaticResource eHCMSResources}}" />
                                                            <CheckBox
                                                                HorizontalAlignment="Center"
                                                                IsChecked="{Binding Path=DataContext.CheckAllCountHI, ElementName=LayoutRoot, Mode=TwoWay}"
                                                                IsEnabled="false"
                                                                IsThreeState="False"
                                                                ToolTipService.ToolTip="{Binding G1281_G1_TinhBHTCa, Source={StaticResource eHCMSResources}}" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.HeaderTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn
                                                x:Name="colCountPtient"
                                                CellTemplate="{StaticResource SelectCountPatientTemplate}"
                                                IsReadOnly="True">
                                                <DataGridTemplateColumn.HeaderTemplate>
                                                    <DataTemplate>
                                                        <StackPanel>
                                                            <TextBlock Text="{Binding G1283_G1_TinhBn, Source={StaticResource eHCMSResources}}" />
                                                            <CheckBox
                                                                HorizontalAlignment="Center"
                                                                IsChecked="{Binding Path=DataContext.CheckAllCountPatient, ElementName=LayoutRoot, Mode=TwoWay}"
                                                                IsEnabled="{Binding Path=DataContext.IsEnableCountPatient, ElementName=LayoutRoot, Mode=OneWay}"
                                                                IsThreeState="False"
                                                                ToolTipService.ToolTip="{Binding G1284_G1_TinhBnTCa, Source={StaticResource eHCMSResources}}" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.HeaderTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTemplateColumn
                                                x:Name="colCountPtientCOVID"
                                                CellTemplate="{StaticResource SelectCountPatientCOVIDTemplate}"
                                                IsReadOnly="True"
                                                Visibility="{Binding Data.IsShowPatientCOVID, Source={StaticResource proxy}}">
                                                <DataGridTemplateColumn.HeaderTemplate>
                                                    <DataTemplate>
                                                        <StackPanel>
                                                            <TextBlock Text="COVID" />
                                                            <CheckBox
                                                                HorizontalAlignment="Center"
                                                                IsChecked="{Binding Path=DataContext.CheckAllCountCOVID, ElementName=LayoutRoot, Mode=TwoWay}"
                                                                IsEnabled="false"
                                                                IsThreeState="False"
                                                                ToolTipService.ToolTip="{Binding G1284_G1_TinhBnTCa, Source={StaticResource eHCMSResources}}" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.HeaderTemplate>
                                            </DataGridTemplateColumn>
                                            <!--<DataGridTemplateColumn Header="{Binding Z2343_G1_MienGiam, Source={StaticResource eHCMSResources}}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <CheckBox
                                                            cal:Message.Attach="[Event Click]=[Action ckbDiscount_Click($source,$datacontext)]"
                                                            IsChecked="{Binding IsDiscounted, Mode=OneWay}"
                                                            IsEnabled="{Binding ElementName=LayoutRoot, Path=DataContext.CanEditOnGrid, Mode=OneWay}" />
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>-->
                                            <DataGridTextColumn
                                                Width="Auto"
                                                Binding="{Binding ChargeableItemCode, Mode=OneWay}"
                                                Header="{Binding K2569_G1_Code, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTextColumn
                                                Width="Auto"
                                                Binding="{Binding ChargeableItemName, Mode=OneWay}"
                                                Header="{Binding K3421_G1_DV, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTextColumn
                                                x:Name="colMedProductType"
                                                Width="Auto"
                                                Binding="{Binding MedProductType, Mode=OneWay, Converter={StaticResource EnumValueToStringConverter}}"
                                                Header="{Binding T2669_G1_Loai, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTextColumn
                                                Width="40"
                                                AxControls:DataGridColNamingUtil.ColName="colQty"
                                                Binding="{Binding Qty, Mode=TwoWay, UpdateSourceTrigger=LostFocus, Converter={StaticResource DecimalConverter3}}"
                                                Header="{Binding S0583_G1_SLg, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="False" />
                                            <DataGridTextColumn
                                                x:Name="colInvoicePrice"
                                                Width="80"
                                                AxControls:DataGridColNamingUtil.ColName="colInvoicePrice"
                                                Binding="{Binding InvoicePrice, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                                ElementStyle="{StaticResource RightAligmentTextBlock}"
                                                Header="{Binding T0849_G1_Gia, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTextColumn
                                                x:Name="colHIAllowedPrice"
                                                Width="80"
                                                AxControls:DataGridColNamingUtil.ColName="colHIAllowedPrice"
                                                Binding="{Binding HIAllowedPrice, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                                ElementStyle="{StaticResource RightAligmentTextBlock}"
                                                Header="{Binding T0895_G1_GiaBH, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTextColumn
                                                Width="80"
                                                Binding="{Binding TotalPatientPayment, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                                ElementStyle="{StaticResource RightAligmentTextBlock}"
                                                Header="{Binding K1296_G1_BNTra, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTextColumn
                                                Width="80"
                                                Binding="{Binding TotalHIPayment, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                                ElementStyle="{StaticResource RightAligmentTextBlock}"
                                                Header="{Binding K1232_G1_BHTra, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTextColumn
                                                Width="80"
                                                Binding="{Binding OtherAmt, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                                ElementStyle="{StaticResource RightAligmentTextBlock}"
                                                Header="Nhà nước trả"
                                                IsReadOnly="True"
                                                Visibility="{Binding Data.IsShowPatientCOVID, Source={StaticResource proxy}}" />
                                            <DataGridTextColumn
                                                Width="Auto"
                                                Binding="{Binding DrugInvoice.SelectedStorage.swhlName, Mode=OneWay}"
                                                Header="{Binding T2144_G1_Kho, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTextColumn
                                                Width="Auto"
                                                Binding="{Binding InvoiceID, Mode=OneWay}"
                                                Header="{Binding T3584_G1_MaPX, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTemplateColumn
                                                Width="Auto"
                                                AxControls:DataGridColNamingUtil.ColName="colDoctorStaff"
                                                CellEditingTemplate="{StaticResource DoctorStaffCellEditTemplate}"
                                                CellTemplate="{StaticResource DoctorStaffCellTemplate}"
                                                Header="{Binding K1377_G1_BSiCDinh, Source={StaticResource eHCMSResources}}" />
                                            <DataGridTemplateColumn
                                                Width="Auto"
                                                AxControls:DataGridColNamingUtil.ColName="colMedicalInstructionDate"
                                                CellEditingTemplate="{StaticResource MedicalInstructionDateCellEditTemplate}"
                                                CellTemplate="{StaticResource MedicalInstructionDateCellTemplate}"
                                                Header="{Binding N0133_G1_NgYLenh, Source={StaticResource eHCMSResources}}" />
                                            <DataGridTemplateColumn
                                                Width="Auto"
                                                AxControls:DataGridColNamingUtil.ColName="colResultDate"
                                                CellEditingTemplate="{StaticResource ResultDateCellEditTemplate}"
                                                CellTemplate="{StaticResource ResultDateCellTemplate}"
                                                Header="{Binding N0080_G1_NgKetQua, Source={StaticResource eHCMSResources}}" />
                                            <DataGridTemplateColumn Width="80" Header="{Binding Z2342_G1_MienGiam, Source={StaticResource eHCMSResources}}">
                                                <DataGridTemplateColumn.CellTemplate>
                                                    <DataTemplate>
                                                        <StackPanel
                                                            HorizontalAlignment="Stretch"
                                                            VerticalAlignment="Stretch"
                                                            Orientation="Horizontal">
                                                            <TextBox
                                                                MinWidth="100"
                                                                HorizontalAlignment="Stretch"
                                                                VerticalAlignment="Stretch"
                                                                cal:Message.Attach="[Event LostFocus]=[Action txtDiscount_LostFocus($source,$eventArgs)]"
                                                                IsEnabled="{Binding IsDiscountChecked}"
                                                                Text="{Binding DiscountAmt, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                                                Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.CanApplyIsOnPriceDiscount, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                            <Button
                                                                HorizontalContentAlignment="Right"
                                                                cal:Message.Attach="[Event Click]=[Action btnDiscount_Click($source,$eventArgs)]"
                                                                Content="{Binding DiscountAmt, Mode=OneWay, Converter={StaticResource DecimalConverter}}"
                                                                FontWeight="Bold"
                                                                Foreground="Blue"
                                                                Style="{StaticResource MainFrame.HyperlinkButton}"
                                                                Visibility="{Binding ElementName=LayoutRoot, Path=DataContext.IsShowPrintDiscountButton, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </DataGridTemplateColumn.CellTemplate>
                                            </DataGridTemplateColumn>
                                            <DataGridTextColumn
                                                Width="Auto"
                                                Binding="{Binding V_Ekip.ObjectValue, Mode=OneWay}"
                                                Header="{Binding Z2646_G1_Ekip, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                            <DataGridTextColumn
                                                Width="Auto"
                                                Binding="{Binding V_EkipIndex.ObjectValue, Mode=OneWay}"
                                                Header="{Binding Z2731_G1_LoaiEkip, Source={StaticResource eHCMSResources}}"
                                                IsReadOnly="True" />
                                        </DataGrid.Columns>
                                    </AxControls:ReadOnlyDataGrid>

                                    <StackPanel Orientation="Horizontal">
                                        <Button
                                            Name="SaveBillingInvoiceCmd"
                                            Width="75"
                                            Content="{Binding T2937_G1_Luu, Source={StaticResource eHCMSResources}}"
                                            Style="{StaticResource MainFrame.Button}"
                                            Visibility="{Binding mProcessPayment, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />

                                        <Button
                                            x:Name="CancelChangesCmd"
                                            Width="80"
                                            Content="{Binding K1305_G1_BoQua, Source={StaticResource eHCMSResources}}"
                                            Style="{StaticResource MainFrame.Button}"
                                            Visibility="{Binding mProcessPayment, Converter={StaticResource BooleanToVisibility}, Mode=TwoWay}" />

                                        <!--<Button
                                            x:Name="btnDiscount"
                                            MinWidth="80"
                                            Content="{Binding Z2342_G1_MienGiam, Source={StaticResource eHCMSResources}}"
                                            Style="{StaticResource MainFrame.Button}" />-->

                                        <!--<Button
                                            x:Name="SetEkip"
                                            Height="22"
                                            MinWidth="80"
                                            Content="{Binding Z2732_G1_ThietLapEkip, Source={StaticResource eHCMSResources}}"
                                            Style="{StaticResource MainFrame.Button}" />-->
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </GroupBox>
                    </ContentControl>
                </DockPanel>
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>
