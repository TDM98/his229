<UserControl x:Class="aEMR.Common.Views.CMMedicalDevices_Chemical_AddEditView"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"             
                          
             xmlns:ct="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Data.Input" 
             xmlns:AxControls="clr-namespace:aEMR.Controls;assembly=aEMR.Controls"
              xmlns:cal="http://www.caliburnproject.org"
             xmlns:converter="clr-namespace:aEMR.Common.Converters;assembly=aEMR.Common"
    mc:Ignorable="d"
    d:DesignHeight="500" d:DesignWidth="800"
    xmlns:Resources="clr-namespace:eHCMSLanguage;assembly=aEMRLanguage"
             xmlns:toolkit="http://schemas.xceed.com/wpf/xaml/toolkit">
    <UserControl.Resources>
        <Resources:eHCMSResources x:Key="eHCMSResources"/>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibility"/>
        <converter:DecimalConverter x:Key="DecimalConverter"/>
        <DataTemplate x:Key="LinkTemplate">
            <Button x:Name="lnkDelete" cal:Message.Attach="[Event Click]=[Action btnDeleteCC_Click($source,$eventArgs)]"  ToolTipService.ToolTip="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}" HorizontalAlignment="Center" VerticalAlignment="Center" CommandParameter="{Binding SupplierID}">
                <Image Source="/aEMR.CommonViews;component/Assets/Images/Delete.png" Height="13" Width="13" Opacity="1" />
            </Button>
        </DataTemplate>
        <DataTemplate x:Key="SupplierNameTemplete">
            <StackPanel VerticalAlignment="Center">
                <TextBlock  Name="txtDrugName" Text="{Binding SelectedSupplier.SupplierName}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" VerticalAlignment="Bottom" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="SupplierCodeTemplate">
            <StackPanel VerticalAlignment="Center">
                <TextBlock Name="txtSupplierCode" Text="{Binding SelectedSupplier.SupplierCode}" Style="{StaticResource MainFrame.TextBlock.Auto}" Margin="0" Padding="0" VerticalAlignment="Bottom" />
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="AutoSupplierTemplete">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition></ColumnDefinition>
                    <ColumnDefinition Width="Auto"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <AxControls:KeyEnabledComboBox Name="acbDrug" SelectedValuePath="SupplierID" Style="{StaticResource MainFrame.ComboBox}"
                                               DisplayMemberPath="SupplierName" SelectedItemEx="{Binding SelectedSupplier,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" MinWidth="150" MaxWidth="220"
                                      cal:Message.Attach="[Event Loaded] = [Action acbDrug_Loaded($source, $eventArgs)]"    />
                <Button Content="..."  Style="{StaticResource MainFrame.Button}" Grid.Column="1"  cal:Message.Attach="[Event Click] = [Action Supplier_Click($source, $eventArgs)]" ></Button>
            </Grid>
        </DataTemplate>
        <DataTemplate x:Key="UnitPriceCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding UnitPrice,Mode=TwoWay,UpdateSourceTrigger=LostFocus,Converter={StaticResource DecimalConverter}}"   TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="UnitPriceCellTemplate">
            <TextBlock  Style="{StaticResource TextBlock.Heading.04}"  Name="txtDrugName" Text="{Binding UnitPrice,Converter={StaticResource DecimalConverter}}"  HorizontalAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="PackagePriceCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding PackagePrice,UpdateSourceTrigger=LostFocus,Mode=TwoWay,Converter={StaticResource DecimalConverter}}"   TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="PackagePriceCellTemplate">
            <TextBlock  Style="{StaticResource TextBlock.Heading.04}"  Name="txtDrugName" Text="{Binding PackagePrice,Converter={StaticResource DecimalConverter}}"  HorizontalAlignment="Right" />
        </DataTemplate>
        <DataTemplate x:Key="VATCellEditTemplate">
            <StackPanel>
                <AxControls:AxTextBox Height="22" Name="txtDrugName" Text="{Binding VAT,Mode=TwoWay,UpdateSourceTrigger=LostFocus,Converter={StaticResource DecimalConverter}}"   TextAlignment="Right" Style="{StaticResource MainFrame.TextBox.Grid}"/>
            </StackPanel>
        </DataTemplate>
        <DataTemplate x:Key="VATCellTemplate">
            <TextBlock  Style="{StaticResource TextBlock.Heading.04}"  Name="txtDrugName" Text="{Binding VAT,Converter={StaticResource DecimalConverter}}"  HorizontalAlignment="Right" />
        </DataTemplate>
    </UserControl.Resources>

    <toolkit:BusyIndicator HorizontalAlignment="Stretch"
                                         VerticalAlignment="Stretch"
                                         IsBusy="{Binding IsProcessing, Mode=OneWay}"                                         
                                         DisplayAfter="0:0:0.100"
                                         Margin="0,0,0,10">
        <toolkit:BusyIndicator.BusyContent>
            <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding Path=StatusText, Mode=OneWay}"
                           FontSize="14"
                           FontWeight="Bold" />
        </toolkit:BusyIndicator.BusyContent>

        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
            <Grid x:Name="LayoutRoot" Background="White">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"></RowDefinition>
                    <RowDefinition Height="Auto"></RowDefinition>
                </Grid.RowDefinitions>

                <Grid Grid.Row="0">
                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" x:Name="TitleForm" Text="TitleForm" HorizontalAlignment="Center" Foreground="#FF0084FF" FontSize="14" FontWeight="Bold" Margin="0,10,0,15"></TextBlock>
                </Grid>

                <AxControls:AxGrid x:Name="GridInfoItem" Grid.Row="1">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition MinWidth="120" Width="200*" MaxWidth="200" />
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition MinWidth="100" Width="100*" MaxWidth="150"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition MinWidth="100" Width="100*" MaxWidth="150"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition></RowDefinition>
                        <RowDefinition Height="Auto"></RowDefinition>
                    </Grid.RowDefinitions>
                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding T0854_G1_TenHg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Margin="0,2,3,0"  />
                    <TextBox TabIndex="0" MaxLength="128" Text="{Binding ObjRefGenMedProductDetails_Current.BrandName,Mode=TwoWay,NotifyOnValidationError=True}" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0" VerticalAlignment="Top"></TextBox>
                    <AxControls:DescriptionViewer Grid.Column="3" Description="{Binding Z0058_G1_NhapTenThuongMai, Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding T0908_G1_TenTiengViet, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="1" Margin="0,2,3,0"  />
                    <TextBox TabIndex="1" MaxLength="128" Text="{Binding ObjRefGenMedProductDetails_Current.GenericName,Mode=TwoWay,NotifyOnValidationError=True}" Grid.Row="1" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"></TextBox>
                    <AxControls:DescriptionViewer Grid.Row="1" Grid.Column="3" Description="{Binding Z0058_G1_NhapTenThuongMai, Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K2262_G1_CNang, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="2" Margin="0,2,3,0"  />
                    <TextBox TabIndex="2" MaxLength="512" Text="{Binding ObjRefGenMedProductDetails_Current.Functions,Mode=TwoWay}" Grid.Row="2" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"></TextBox>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding Z0036_G1_ThSoKThuat, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="3" Margin="0,2,3,0"  />
                    <TextBox TabIndex="3" MaxLength="128" Text="{Binding ObjRefGenMedProductDetails_Current.TechInfo,Mode=TwoWay}" Grid.Row="3" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"></TextBox>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K1799_G1_ChatLieu2, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="4" Margin="0,2,3,0"  />
                    <TextBox TabIndex="4" MaxLength="50" Text="{Binding ObjRefGenMedProductDetails_Current.Material,Mode=TwoWay}" Grid.Row="4" Grid.Column="1" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"></TextBox>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding N0243_G1_NhomHg, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="5" Margin="0,2,3,0"  />
                    <AxControls:AxAutoComplete Text="{Binding ObjRefGenMedProductDetails_Current.SelectedDrugClass.FaName}"  IsTabStop="False" 
                                                   ValueMemberBinding="{Binding FaName, Mode=TwoWay}"   
                                                  FontWeight="Bold" IsDropDownOpen="True" Style="{StaticResource AxAutoCompleteMyStyle}"
                                             TextBoxStyle="{StaticResource MainFrame.TextBox}" MinimumPrefixLength="0"
                                            cal:Message.Attach="[Event Loaded] = [Action Auto_DrugClass_Loaded($source, $eventArgs)]
                                                                ;[Event DropDownClosed] = [Action NhomHang_DropDownClosed($source, $eventArgs)]"
                                                  TabIndex="5" Name="cbx_FamilyTherapy" Grid.Column="1"  Margin="2,2,3,0" Grid.Row="5"  SelectedItem="{Binding ObjRefGenMedProductDetails_Current.SelectedDrugClass,NotifyOnValidationError=True}"
                                                  ItemsSource="{Binding FamilyTherapies}"
                                               ItemContainerStyle="{StaticResource AxAutoCompleteBoxBkg}">
                        <AxControls:AxAutoComplete.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding FaName}"></TextBlock>
                            </DataTemplate>
                        </AxControls:AxAutoComplete.ItemTemplate>
                    </AxControls:AxAutoComplete>
                    <AxControls:DescriptionViewer Grid.Row="5" Grid.Column="3" Description="{Binding Z0071_G1_NhapNhomHang, Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding T1410_G1_HgSX2, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="6" Margin="0,2,3,0"  />
                    <AxControls:AxAutoComplete Text="{Binding ObjRefGenMedProductDetails_Current.PharmaceuticalCompany.PCOName}"  IsTabStop="False" 
                                                   ValueMemberBinding="{Binding PCOName, Mode=TwoWay}"   
                                                  FontWeight="Bold" IsDropDownOpen="True" Style="{StaticResource AxAutoCompleteMyStyle}"
                                             TextBoxStyle="{StaticResource MainFrame.TextBox}" MinimumPrefixLength="0"
                                            cal:Message.Attach="[Event Loaded] = [Action Auto_PharmaCompany_Loaded($source, $eventArgs)]
                                                                ;[Event DropDownClosed] = [Action HangSX_DropDownClosed($source, $eventArgs)]"         
                                         TabIndex="6" Grid.Column="1"  Margin="2" Grid.Row="6" SelectedItem="{Binding ObjRefGenMedProductDetails_Current.PharmaceuticalCompany,NotifyOnValidationError=True}"
                                                  ItemsSource="{Binding PharmaceuticalCompanies}"
                                               ItemContainerStyle="{StaticResource AxAutoCompleteBoxBkg}">
                        <AxControls:AxAutoComplete.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding PCOName}"></TextBlock>
                            </DataTemplate>
                        </AxControls:AxAutoComplete.ItemTemplate>
                    </AxControls:AxAutoComplete>
                    <AxControls:DescriptionViewer Grid.Row="6" Grid.Column="3" Description="{Binding Z0072_G1_NhapHangSX, Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding Q0484_G1_QuocGia, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="7" Margin="0,2,3,0"  />
                    <AxControls:AxAutoComplete Text="{Binding ObjRefGenMedProductDetails_Current.SelectedCountry.CountryName}"  IsTabStop="False" 
                                                   ValueMemberBinding="{Binding CountryName, Mode=TwoWay}"   
                                                  FontWeight="Bold" IsDropDownOpen="True" Style="{StaticResource AxAutoCompleteMyStyle}"
                                             TextBoxStyle="{StaticResource MainFrame.TextBox}" MinimumPrefixLength="0"
                                            cal:Message.Attach="[Event Loaded] = [Action Auto_PharmaCountry_Loaded($source, $eventArgs)]
                                                            ;[Event DropDownClosed] = [Action Country_DropDownClosed($source, $eventArgs)]"
                                                  TabIndex="7" Grid.Column="1"  Margin="2" Grid.Row="7"  SelectedItem="{Binding ObjRefGenMedProductDetails_Current.SelectedCountry,NotifyOnValidationError=True}"
                                                  ItemsSource="{Binding Countries}"
                                               ItemContainerStyle="{StaticResource AxAutoCompleteBoxBkg}">
                        <AxControls:AxAutoComplete.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding CountryName}"></TextBlock>
                            </DataTemplate>
                        </AxControls:AxAutoComplete.ItemTemplate>
                    </AxControls:AxAutoComplete>
                    <AxControls:DescriptionViewer Grid.Row="7" Grid.Column="3" Description="{Binding Z0073_G1_ChonQGia, Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K0940_G1_ApGiaThau2, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="8" Margin="0,2,3,0"  />
                    <!--KMx: Không sử dụng AutoComplete, bởi vì có thể có nhiều bệnh viện trúng thầu (12/09/2014 09:44)-->
                    <!--<AutoCompleteBox Text="{Binding ObjRefGenMedProductDetails_Current.CurrentHospital.HosName}"  IsTabStop="False" 
                                                   ValueMemberBinding="{Binding HosName, Mode=TwoWay}"  
                                            cal:Message.Attach="[Event Loaded] = [Action Auto_Hospital_Loaded($source, $eventArgs)]
                                                                ;[Event DropDownClosed] = [Action ApGiaThau_DropDownClosed($source, $eventArgs)]
                                                                ;[Event Populating] = [Action BvApThau_Populating($source, $eventArgs)]"
                                                  FontWeight="Bold" IsDropDownOpen="True" Style="{StaticResource AxAutoCompleteMyStyle}"
                                             TextBoxStyle="{StaticResource MainFrame.TextBox}" MinimumPrefixLength="0" MinimumPopulateDelay="300"
                                                 TabIndex="8" Grid.Column="1" Margin="2,2,3,0" Grid.Row="8" SelectedItem="{Binding ObjRefGenMedProductDetails_Current.CurrentHospital}"
                                                  ItemsSource="{Binding Hospitals}" FilterMode="None">
                        <AutoCompleteBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding HosName}"></TextBlock>
                            </DataTemplate>
                        </AutoCompleteBox.ItemTemplate>
                    </AutoCompleteBox>-->
                    <TextBox Name="tbx_WinningHospitals" Grid.Column="1"  Margin="2,2,3,0" Grid.Row="8"  Text="{Binding ObjRefGenMedProductDetails_Current.WinningHospitals, Mode=TwoWay}" Style="{StaticResource MainFrame.TextBox}"  TabIndex="8" />
                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding P0344_G1_PhanLoai, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="9" Margin="0,2,3,0" />
                    <AxControls:KeyEnabledComboBox TabIndex="9"  Grid.Column="1"  Margin="2,2,3,0" Grid.Row="9" SelectedValueEx="{Binding ObjRefGenMedProductDetails_Current.RefGenDrugCatID_1,Mode=TwoWay,NotifyOnValidationError=True}" SelectedValuePath="RefGenDrugCatID_1" DisplayMemberPath="CategoryNameAndCategoryDescription"  ItemsSource="{Binding RefGenericDrugCategory_1s}"  Style="{StaticResource MainFrame.ComboBox}"></AxControls:KeyEnabledComboBox>



                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K2569_G1_Code, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right"  Grid.Row="0" Margin="0,2,3,0" Grid.Column="3"/>
                    <TextBox MaxLength="20" Text="{Binding ObjRefGenMedProductDetails_Current.Code,Mode=TwoWay,NotifyOnValidationError=True}" Grid.Column="4" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"  IsReadOnly="{Binding IsReadOnlyCode,Mode=OneWay}" Height="22" VerticalAlignment="Top"></TextBox>
                    <AxControls:DescriptionViewer Grid.Row="0"  Description="{Binding Z0060_G1_NhapCode, Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Column="5"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K2661_G1_CodeBHYT, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="0" Margin="0,2,3,0" Grid.Column="6"/>
                    <TextBox TabIndex="15" MaxLength="20" Text="{Binding ObjRefGenMedProductDetails_Current.HICode,Mode=TwoWay}" Grid.Row="0" Grid.Column="7" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"></TextBox>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K2673_G1_CodeBHYT2, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="1" Margin="0,2,3,0" Grid.Column="6"/>
                    <TextBox TabIndex="15" MaxLength="20" Text="{Binding ObjRefGenMedProductDetails_Current.HICode2,Mode=TwoWay}" Grid.Row="1" Grid.Column="7" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"></TextBox>


                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding T1437_G1_HeSoNhan, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="1" Margin="0,2,3,0" Grid.Column="3"  />
                    <TextBox TabIndex="11" Text="{Binding ObjRefGenMedProductDetails_Current.NumberOfEstimatedMonths_F,Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True}" TextAlignment="Right" Grid.Row="1" Grid.Column="4" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"/>
                    <AxControls:DescriptionViewer Grid.Row="1" Grid.Column="5" Description="{Binding Z0075_G1_NhapHSoNhan, Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding S0692_G1_SoThamChieu, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="2" Margin="0,2,3,0" Grid.Column="6" />
                    <TextBox TabIndex="16" Text="{Binding ObjRefGenMedProductDetails_Current.ProductCodeRefNum,Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True}"  Grid.Row="2" Grid.Column="7" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding T1705_G1_HSAnToan, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="2" Margin="0,2,3,0"  Grid.Column="3" />
                    <TextBox TabIndex="12" Text="{Binding ObjRefGenMedProductDetails_Current.FactorSafety,Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True}"  Grid.Row="2" Grid.Column="4" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0" TextAlignment="Right"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding G2262_G1_Visa, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Row="3" Margin="0,2,3,0" Grid.Column="6"/>
                    <TextBox TabIndex="17" MaxLength="20" Text="{Binding ObjRefGenMedProductDetails_Current.Visa,Mode=TwoWay}" Grid.Row="3" Grid.Column="7" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"></TextBox>


                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding Q0488_G1_QuyCachDG, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Column="3" Grid.Row="3" Margin="2,2,3,0" />
                    <TextBox TabIndex="13" MaxLength="50" Text="{Binding ObjRefGenMedProductDetails_Current.Packaging,Mode=TwoWay}" Grid.Row="3" Grid.Column="4" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0" ></TextBox>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding S0605_G1_SLgQuyCach, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Column="6" Grid.Row="4" Margin="2,2,3,0"  />
                    <TextBox Name="tbUnitPackaging" TabIndex="18" Text="{Binding ObjRefGenMedProductDetails_Current.UnitPackaging,Mode=TwoWay,ValidatesOnExceptions=True,NotifyOnValidationError=True}" Grid.Row="4" Grid.Column="7" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0" TextAlignment="Right" cal:Message.Attach="[Event LostFocus] = [Action TextBox_LostFocus($source, $eventArgs)]" ></TextBox>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K3709_G1_DViTinh, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Column="3" Grid.Row="4" Margin="2,2,3,0"  />
                    <AxControls:KeyEnabledComboBox TabIndex="14" Grid.Column="4" Grid.Row="4" Margin="2,2,3,0"   SelectedValuePath="UnitID" DisplayMemberPath="UnitName" ItemsSource="{Binding Units}" SelectedItemEx="{Binding ObjRefGenMedProductDetails_Current.SelectedUnit,Mode=TwoWay,NotifyOnValidationError=True}"  Style="{StaticResource MainFrame.ComboBox}" ></AxControls:KeyEnabledComboBox>
                    <AxControls:DescriptionViewer Grid.Row="4" Grid.Column="5" Description="{Binding Z0076_G1_ChonDVT, Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K3685_G1_DViDung, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Column="6" Grid.Row="5" Margin="2,2,3,0"  />
                    <AxControls:KeyEnabledComboBox TabIndex="19" Grid.Column="7" Grid.Row="5" Margin="2,2,3,0"   SelectedValuePath="UnitID" DisplayMemberPath="UnitName" ItemsSource="{Binding Units}" SelectedItemEx="{Binding ObjRefGenMedProductDetails_Current.SelectedUnitUse,Mode=TwoWay,NotifyOnValidationError=True}"  Style="{StaticResource MainFrame.ComboBox}" ></AxControls:KeyEnabledComboBox>
                    <AxControls:DescriptionViewer Grid.Row="4" Grid.Column="8" Description="{Binding Z0077_G1_CHonDVD, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K1503_G1_CachDung, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Column="3" Grid.Row="5" Margin="2,2,3,0"  />
                    <TextBox TabIndex="20" MaxLength="128" Text="{Binding ObjRefGenMedProductDetails_Current.Administration,Mode=TwoWay,NotifyOnValidationError=True}" Grid.Row="5" Grid.Column="4"  Margin="2,2,3,0"  />
                    <AxControls:DescriptionViewer Grid.Row="5" Grid.Column="8" Description="{Binding Z0067_G1_NhapCachDung, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Left" VerticalAlignment="Center"/>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding K3526_G1_Dispensevolume, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}"  HorizontalAlignment="Right" Grid.Column="6" Grid.Row="6" Margin="0,2,3,0"
                                Visibility="{Binding IsShowDispenseVolume,Converter={StaticResource BooleanToVisibility} }"/>
                    <TextBox Text="{Binding ObjRefGenMedProductDetails_Current.DispenseVolume,Mode=TwoWay,ValidatesOnExceptions=True, NotifyOnValidationError=True}" Grid.Column="7" Grid.Row="6" Style="{StaticResource MainFrame.TextBox}" TextAlignment="Right"
                             Visibility="{Binding IsShowDispenseVolume,Converter={StaticResource BooleanToVisibility} }"></TextBox>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding T2013_G1_Ke, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Column="3" Grid.Row="6" Margin="2,2,3,0"/>
                    <Grid Grid.Row="6" Grid.Column="4" >
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                        </Grid.ColumnDefinitions>

                        <TextBox TabIndex="21"  Text="{Binding ObjRefGenMedProductDetails_Current.ShelfName,Mode=TwoWay}"  Grid.Column="0" Style="{StaticResource MainFrame.TextBox}" Margin="2,2,3,0"></TextBox>
                    </Grid>

                    <TextBlock  Style="{StaticResource TextBlock.Heading.04}" Text="{Binding M0008_G1_MoTa, StringFormat='{}{0}:', Source={StaticResource eHCMSResources}}" HorizontalAlignment="Right" Grid.Column="3" Grid.Row="7" Margin="2,2,3,0"/>
                    <TextBox TabIndex="22" MaxLength="512" Text="{Binding ObjRefGenMedProductDetails_Current.Description,Mode=TwoWay}" Grid.Row="7" Grid.Column="4" Grid.RowSpan="2" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Visible" AcceptsReturn="True"   Foreground="Black" FontWeight="Normal" Margin="2,2,3,0" Grid.ColumnSpan="4" />

                    <StackPanel Grid.Row="9" Grid.Column="4" Orientation="Horizontal">
                        <CheckBox TabIndex="23" IsChecked="{Binding ObjRefGenMedProductDetails_Current.InsuranceCover,TargetNullValue=False,Mode=TwoWay}"  Content="{Binding K1092_G1_BH, Source={StaticResource eHCMSResources}}" VerticalAlignment="Center" Grid.Column="1"
                                  Style="{StaticResource MainFrame.Checkbox.Title1}" Margin="2,1"/>
                        <CheckBox TabIndex="24" Content="{Binding K2716_G1_ConDung, Source={StaticResource eHCMSResources}}" Grid.Column="4" VerticalAlignment="Center" Grid.Row="9" Margin="10,1,0,1" IsThreeState="False" IsChecked="{Binding ObjRefGenMedProductDetails_Current.IsActive,TargetNullValue=False,Mode=TwoWay}" Style="{StaticResource MainFrame.Checkbox.Title1}" Visibility="{Binding IsEdit,Converter={StaticResource BooleanToVisibility} }"/>
                    </StackPanel>

                    <Border Style="{StaticResource LightBlueBorderStyle}" Margin="2, 5, 2, 5" Grid.Row="10" Grid.Column="4" Grid.ColumnSpan="5" Visibility="{Binding IsShowMedicalMaterial,Converter={StaticResource BooleanToVisibility} }">
                        <StackPanel Orientation="Horizontal">
                            <RadioButton GroupName="rdbMedicalMaterial" Name="rdbReplaceMedicalMaterial" Content="{Binding G2321_G1_VTYTThayThe, Source={StaticResource eHCMSResources}}"  Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding IsReplaceMedicalMaterial,Mode=TwoWay}"  cal:Message.Attach="[Event Click]=[Action RdbMedicalMaterial_Click($source,$eventArgs)]" ></RadioButton>
                            <RadioButton GroupName="rdbMedicalMaterial" Name="rdbDisposeMedicalMaterial" Content="{Binding G2323_G1_VTYTTieuHao, Source={StaticResource eHCMSResources}}" Margin="15, 0, 0, 0" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding IsDisposeMedicalMaterial,Mode=TwoWay}" cal:Message.Attach="[Event Click]=[Action RdbMedicalMaterial_Click($source,$eventArgs)]"></RadioButton>
                            <RadioButton GroupName="rdbMedicalMaterial" Name="rdbNonMedicalMaterial" Content="{Binding T2468_G1_KhongChon, Source={StaticResource eHCMSResources}}" Margin="15, 0, 0, 0" Style="{StaticResource MainFrame.RadioButton}" IsChecked="{Binding IsNonMedicalMaterial,Mode=TwoWay}" cal:Message.Attach="[Event Click]=[Action RdbMedicalMaterial_Click($source,$eventArgs)]" ></RadioButton>

                        </StackPanel>
                    </Border>

                    <Border Style="{StaticResource LightBlueBorderStyle}" Margin="5,10,0,0" Grid.Row="11"  Grid.Column="0" Grid.ColumnSpan="10" Grid.RowSpan="5">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition></RowDefinition>
                            </Grid.RowDefinitions>
                            <Border Margin="10,-12,0,0"  Style="{StaticResource LightBlueBorderStyleNo}" HorizontalAlignment="Left" Grid.ColumnSpan="5">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock   Text="{Binding K3889_G1_DSNCC, StringFormat='{}{0} ', Source={StaticResource eHCMSResources}}"  FontWeight="Bold" Foreground="#FF6F8AA9" Style="{StaticResource TextBlock.Heading.Group}"></TextBlock>
                                    <TextBlock   Text="{Binding K0637_G1_GiaNhapGanNhat, StringFormat='{}({0} :', Source={StaticResource eHCMSResources}}"  FontWeight="Bold" Foreground="#FF6F8AA9" Style="{StaticResource TextBlock.Heading.Group}"></TextBlock>
                                    <TextBlock   Text="{Binding ObjRefGenMedProductDetails_Current.InBuyingPrice,Converter={StaticResource DecimalConverter}}"  FontWeight="Bold" Foreground="Black" Style="{StaticResource TextBlock.Heading.Group}"></TextBlock>
                                    <TextBlock   Text="{Binding Z0027_G1_DauNgoacPhai, Source={StaticResource eHCMSResources}}"  FontWeight="Bold" Foreground="#FF6F8AA9" Style="{StaticResource TextBlock.Heading.Group}"></TextBlock>
                                </StackPanel>
                            </Border>
                            <AxControls:AxDataGridNy Grid.Row="1" x:Name="GridSuppliers" HeadersVisibility="All" AutoGenerateColumns="False"  ItemsSource="{Binding ObjRefGenMedProductDetails_Current.SupplierGenMedProducts,Mode=TwoWay}"   Margin="2" HorizontalScrollBarVisibility="Auto" 
                                                     VerticalScrollBarVisibility="Auto" ColumnHeaderStyle="{StaticResource MainFrame.DataGridColumnHeaderStyleWrap}" Style="{StaticResource MainFrame.DataGridStyle}" 
                                                     RowStyle="{StaticResource MainFrame.DataGridRowStyle.Normal}"
                                                     SelectedItem="{Binding CurrentSupplierGenMedProduct,Mode=TwoWay}"
                              cal:Message.Attach="[Event CellEditEnding] = [Action GridSuppliers_CellEditEnding($source, $eventArgs)]
                                                 ;[Event Loaded] = [Action GridSuppliers_Loaded($source, $eventArgs)]
                                                 ;[Event PreparingCellForEdit] = [Action GridSuppliers_PreparingCellForEdit($source, $eventArgs)]" 
                                                  Width="Auto" MaxWidth="500"
                                                     HorizontalAlignment="Center">
                                <DataGrid.Columns>
                                    <DataGridTemplateColumn CellTemplate="{StaticResource LinkTemplate}" IsReadOnly="True"></DataGridTemplateColumn>
                                    <DataGridTemplateColumn Header="{Binding T0874_G1_TenNCC, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colSupplierName"  MinWidth="150" CellTemplate="{StaticResource SupplierNameTemplete}" CellEditingTemplate="{StaticResource AutoSupplierTemplete}"/>
                                    <DataGridTemplateColumn Header="{Binding T0911_G1_TenVietTat, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colSupplierCode" MinWidth="120" CellTemplate="{StaticResource SupplierCodeTemplate}"/>
                                    <DataGridCheckBoxColumn Header="{Binding K1714_G1_CcChinh, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colMainSupplier"
                                                            Binding="{Binding IsMain,Mode=TwoWay}" Width="60"/>
                                    <DataGridTemplateColumn Header="{Binding T1102_G1_GiaLe, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colUnitPrice" Width="50" CellEditingTemplate="{StaticResource UnitPriceCellEditTemplate}" CellTemplate="{StaticResource UnitPriceCellTemplate}"/>
                                    <DataGridTemplateColumn Header="{Binding T1004_G1_GiaDG, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colPackagePrice" Width="55" CellEditingTemplate="{StaticResource PackagePriceCellEditTemplate}" CellTemplate="{StaticResource PackagePriceCellTemplate}"/>
                                    <DataGridTemplateColumn Header="{Binding G2183_G1_VATx, Source={StaticResource eHCMSResources}}" AxControls:DataGridColNamingUtil.ColName="colVAT" Width="90" CellEditingTemplate="{StaticResource VATCellEditTemplate}" CellTemplate="{StaticResource VATCellTemplate}"/>
                                </DataGrid.Columns>
                            </AxControls:AxDataGridNy>
                        </Grid>
                    </Border>
                    <StackPanel Orientation="Horizontal" Grid.Row="16" Grid.Column="0" Grid.ColumnSpan="10" HorizontalAlignment="Center">
                        <Button x:Name="btClear" HorizontalAlignment="Left" Width="80"  Margin="0,2,1,2" TabIndex="23"
                                Style="{StaticResource MainFrame.Button}">
                            <StackPanel Orientation="Horizontal">
                                <Image Width="20" VerticalAlignment="Center" Height="18" Source="/aEMR.CommonViews;component/Assets/Images/clear.png"/>
                                <TextBlock  Style="{StaticResource TextBlock.Heading.04}" VerticalAlignment="Center" Text="{Binding G2617_G1_Xoa, Source={StaticResource eHCMSResources}}" Margin="5,0,0,0"/>
                            </StackPanel>
                        </Button>

                        <Button x:Name="btSave" HorizontalAlignment="Left" Width="80"  Margin="2,2,1,2" TabIndex="23"
                                Style="{StaticResource MainFrame.Button}">
                            <StackPanel Orientation="Horizontal">
                                <Image Width="20" VerticalAlignment="Center" Height="18" Source="/aEMR.CommonViews;component/Assets/Images/saveanddown24x24border.png"/>
                                <TextBlock  Style="{StaticResource TextBlock.Heading.04}" VerticalAlignment="Center" Text="{Binding T2937_G1_Luu, Source={StaticResource eHCMSResources}}" Margin="5,0,0,0"/>
                            </StackPanel>
                        </Button>

                        <Button x:Name="btClose" HorizontalAlignment="Left" Width="80"  Margin="2,2,1,2" TabIndex="24"
                                Style="{StaticResource MainFrame.Button}">
                            <StackPanel Orientation="Horizontal">
                                <Image Width="20" VerticalAlignment="Center" Height="18" Source="/aEMR.CommonViews;component/Assets/Images/Button-exit-icon.png"/>
                                <TextBlock  Style="{StaticResource TextBlock.Heading.04}" VerticalAlignment="Center" Text="{Binding K3735_G1_Dong, Source={StaticResource eHCMSResources}}" Margin="5,0,0,0"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    <AxControls:ValidationSummary Grid.Row="17" MaxHeight="70" Grid.ColumnSpan="10" VerticalAlignment="Top" x:Name="ValidationSummary1"></AxControls:ValidationSummary>
                </AxControls:AxGrid>
            </Grid>
        </ScrollViewer>
    </toolkit:BusyIndicator>
</UserControl>